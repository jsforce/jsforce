!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.jsforce=t()}}(function(){var t;return function(){function t(e,r,n){function i(s,a){if(!r[s]){if(!e[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=r[s]={exports:{}};e[s][0].call(l.exports,function(t){var r=e[s][1][t];return i(r||t)},l,l.exports,t,e,r,n)}return r[s].exports}for(var o="function"==typeof require&&require,s=0;s<n.length;s++)i(n[s]);return i}return t}()({1:[function(t,e,r){"use strict";var n=t("../core");n.browser=t("./client"),e.exports=n},{"../core":10,"./client":5}],2:[function(t,e,r){"use strict";e.exports="1.9.3"},{}],3:[function(t,e,r){"use strict";e.exports={inherits:t("inherits"),util:t("util"),events:t("events"),"lodash/core":t("lodash/core"),"readable-stream":t("readable-stream"),multistream:t("multistream"),"./VERSION":t("./VERSION"),"./cache":t("./cache"),"./connection":t("./connection"),"./core":t("./core"),"./csv":t("./csv"),"./date":t("./date"),"./http-api":t("./http-api"),"./logger":t("./logger"),"./oauth2":t("./oauth2"),"./process":t("./process"),"./promise":t("./promise"),"./query":t("./query"),"./quick-action":t("./quick-action"),"./record-stream":t("./record-stream"),"./record":t("./record"),"./soap":t("./soap"),"./sobject":t("./sobject"),"./soql-builder":t("./soql-builder"),"./transport":t("./transport")}},{"./VERSION":2,"./cache":8,"./connection":9,"./core":10,"./csv":11,"./date":12,"./http-api":13,"./logger":14,"./oauth2":15,"./process":16,"./promise":17,"./query":18,"./quick-action":19,"./record":21,"./record-stream":20,"./soap":23,"./sobject":24,"./soql-builder":25,"./transport":26,events:37,inherits:39,"lodash/core":43,multistream:44,"readable-stream":62,util:72}],4:[function(t,e,r){"use strict";function n(t){var e={};return t.split(/\n/).forEach(function(t){var r=t.split(/\s*:\s*/),n=r[0].toLowerCase(),i=r[1];e[n]=i}),e}var i=t("readable-stream").Duplex,o=t("lodash/core");e.exports={supported:"object"==typeof Sfdc&&"undefined"!=typeof Sfdc.canvas,createRequest:function(t){return function(e,r){function s(i){var s={client:t.client,method:e.method,data:i};if(e.headers){s.headers={};for(var c in e.headers)"content-type"===c.toLowerCase()?s.contentType=e.headers[c]:s.headers[c]=e.headers[c]}s.success=function(t){var e=n(t.responseHeaders),i=t.payload;o.isString(i)||(i=JSON.stringify(i)),a={statusCode:t.status,headers:e,body:i},r&&r(null,a,a.body),u.end()},s.failure=function(t){r&&r(t)},Sfdc.canvas.client.ajax(e.url,s)}var a,u=new i;u._read=function(t){a&&u.push(a.body)};var c=[],l=!1;return u._write=function(t,e,r){c.push(t.toString(e)),r()},u.on("finish",function(){l||(s(c.join("")),l=!0)}),!e.body&&""!==e.body&&/^(put|post|patch)$/i.test(e.method)||(s(e.body),l=!0),u}}}},{"lodash/core":43,"readable-stream":62}],5:[function(t,e,r){"use strict";function n(t,e,r){var n=screen.width/2-e/2,i=screen.height/2-r/2;return window.open(t,null,"location=yes,toolbar=no,status=no,menubar=no,width="+e+",height="+r+",top="+i+",left="+n)}function i(){var t=o(),e=localStorage.getItem("jsforce_state");if(t&&e&&t.body.state===e){localStorage.removeItem("jsforce_state");var r=e.split("."),n=r[0],i=r[1],s=new p(n);return t.success?(s._storeTokens(t.body),location.hash=""):s._storeError(t.body),"popup"===i&&window.close(),!0}}function o(){var t;if(window.location.hash){if(t=u.parse(window.location.hash.substring(1)),t.access_token)return{success:!0,body:t}}else if(window.location.search&&(t=u.parse(window.location.search.substring(1)),t.error))return{success:!1,body:t}}var s=t("events"),a=t("inherits"),u=t("querystring"),c=t("lodash/core"),l=t("../connection"),f=t("../oauth2"),h=0,p=function(t){this._prefix=t||"jsforce"+h++,this.connection=null};a(p,s.EventEmitter),p.prototype.init=function(t){if(!i()){this.config=t,this.connection=new l(t);var e=this._getTokens();if(e){this.connection.initialize(e);var r=this;setTimeout(function(){r.emit("connect",r.connection)},10)}}},p.prototype.login=function(t,e){c.isFunction(t)&&(e=t,t={}),t=t||{},e=e||function(){},c.extend(t,this.config);this._prompt(t,e)},p.prototype._prompt=function(t,e){var r=this,i=new f(t),o=Math.random().toString(36).substring(2),s=[this._prefix,"popup",o].join(".");localStorage.setItem("jsforce_state",s);var a=i.getAuthorizationUrl({response_type:"token",scope:t.scope,state:s}),u=t.size||{},c=n(a,u.width||912,u.height||513);if(!c)return s=[this._prefix,"redirect",o].join("."),localStorage.setItem("jsforce_state",s),a=i.getAuthorizationUrl({response_type:"token",scope:t.scope,state:s}),void(location.href=a);r._removeTokens();var l=setInterval(function(){try{if(!c||c.closed){clearInterval(l);var t=r._getTokens();if(t)r.connection.initialize(t),r.emit("connect",r.connection),e(null,{status:"connect"});else{var n=r._getError();n?e(new Error(n.error+": "+n.error_description)):e(null,{status:"cancel"})}}}catch(i){}},1e3)},p.prototype.isLoggedIn=function(){return!(!this.connection||!this.connection.accessToken)},p.prototype.logout=function(){this.connection.logout(),this._removeTokens(),this.emit("disconnect")},p.prototype._getTokens=function(){var t=new RegExp("(^|;\\s*)"+this._prefix+"_loggedin=true(;|$)");if(document.cookie.match(t)){var e=Number(localStorage.getItem(this._prefix+"_issued_at"));if(Date.now()<e+72e5){var r,n=localStorage.getItem(this._prefix+"_id");if(n){var i=n.split("/");r={id:i.pop(),organizationId:i.pop(),url:n}}return{accessToken:localStorage.getItem(this._prefix+"_access_token"),instanceUrl:localStorage.getItem(this._prefix+"_instance_url"),userInfo:r}}}return null},p.prototype._storeTokens=function(t){localStorage.setItem(this._prefix+"_access_token",t.access_token),localStorage.setItem(this._prefix+"_instance_url",t.instance_url),localStorage.setItem(this._prefix+"_issued_at",t.issued_at),localStorage.setItem(this._prefix+"_id",t.id),document.cookie=this._prefix+"_loggedin=true;"},p.prototype._removeTokens=function(){localStorage.removeItem(this._prefix+"_access_token"),localStorage.removeItem(this._prefix+"_instance_url"),localStorage.removeItem(this._prefix+"_issued_at"),localStorage.removeItem(this._prefix+"_id"),document.cookie=this._prefix+"_loggedin="},p.prototype._getError=function(){try{var t=JSON.parse(localStorage.getItem(this._prefix+"_error"));return localStorage.removeItem(this._prefix+"_error"),t}catch(e){}},p.prototype._storeError=function(t){localStorage.setItem(this._prefix+"_error",JSON.stringify(t))},e.exports=new p,e.exports.Client=p},{"../connection":9,"../oauth2":15,events:37,inherits:39,"lodash/core":43,querystring:51}],6:[function(t,e,r){"use strict";var n=0;e.exports={supported:"undefined"!=typeof window&&"undefined"!=typeof document,createRequest:function(t,e){return t=t||"callback",e=e||1e4,function(r,i){if("GET"!==r.method.toUpperCase())return i(new Error("JSONP only supports GET request."));var o="_jsforce_jsonpCallback_"+ ++n,s=window,a=r.url;a+=a.indexOf("?")>0?"&":"?",a+=t+"="+o;var u=document.createElement("script");u.type="text/javascript",u.src=a,document.documentElement.appendChild(u);var c=setTimeout(function(){l(),i(new Error("JSONP call time out."))},e);s[o]=function(t){l(),i(null,{statusCode:200,headers:{"content-type":"application/json"},body:JSON.stringify(t)})};var l=function(){clearTimeout(c),document.documentElement.removeChild(u),delete s[o]}}}}},{}],7:[function(t,e,r){"use strict";function n(t){var e=(t.getAllResponseHeaders()||"").split(/[\r\n]+/);return o.map(e,function(t){return t.split(/\s*:/)[0].toLowerCase()})}var i=t("readable-stream").Duplex,o=t("lodash/core");e.exports=function(t,e){var r=new XMLHttpRequest;if(r.open(t.method,t.url),t.headers)for(var s in t.headers)r.setRequestHeader(s,t.headers[s]);r.setRequestHeader("Accept","*/*");var a,u=new i;u._read=function(t){a&&u.push(a.body)};var c=[],l=!1;return u._write=function(t,e,r){c.push(t.toString("buffer"===e?"binary":e)),r()},u.on("finish",function(){l||(r.send(c.join("")),l=!0)}),!t.body&&""!==t.body&&/^(put|post|patch)$/i.test(t.method)||(r.send(t.body),l=!0),r.onreadystatechange=function(){if(4===r.readyState){var t=n(r),i={};o.forEach(t,function(t){t&&(i[t]=r.getResponseHeader(t))}),a={statusCode:r.status,headers:i,body:r.response},a.statusCode||(a.statusCode=400,a.body="Access Declined"),e&&e(null,a,a.body),u.end()}},u}},{"lodash/core":43,"readable-stream":62}],8:[function(t,e,r){"use strict";function n(t,e){return e=Array.prototype.slice.apply(e),t+"("+s.map(e,function(t){return JSON.stringify(t)}).join(",")+")"}var i=t("events"),o=t("inherits"),s=t("lodash/core"),a=function(){this.fetching=!1};o(a,i.EventEmitter),a.prototype.get=function(t){return t?(this.once("value",t),void(s.isUndefined(this._value)||this.emit("value",this._value))):this._value},a.prototype.set=function(t){this._value=t,this.emit("value",this._value)},a.prototype.clear=function(){this.fetching=!1,delete this._value};var u=function(){this._entries={}};u.prototype.get=function(t){if(t&&this._entries[t])return this._entries[t];var e=new a;return this._entries[t]=e,e},u.prototype.clear=function(t){for(var e in this._entries)t&&0!==e.indexOf(t)||this._entries[e].clear()},u.prototype.makeResponseCacheable=function(t,e,r){var i=this;return r=r||{},function(){var o=Array.prototype.slice.apply(arguments),a=o.pop();s.isFunction(a)||(o.push(a),a=null);var u=s.isString(r.key)?r.key:s.isFunction(r.key)?r.key.apply(e,o):n(r.namespace,o),c=i.get(u);c.fetching=!0,a&&o.push(function(t,e){c.set({error:t,result:e}),a(t,e)});var l,f;try{l=t.apply(e||this,o)}catch(h){f=h}if(l&&s.isFunction(l.then))return a?l:l.then(function(t){return c.set({error:void 0,result:t}),t},function(t){throw c.set({error:t,result:void 0}),t});if(c.set({error:f,result:l}),f)throw f;return l}},u.prototype.makeCacheable=function(t,e,r){var i=this;r=r||{};var o=function(){var o=Array.prototype.slice.apply(arguments),a=o.pop();s.isFunction(a)||o.push(a);var u=s.isString(r.key)?r.key:s.isFunction(r.key)?r.key.apply(e,o):n(r.namespace,o),c=i.get(u);if(!s.isFunction(a)){var l=c.get();if(!l)throw new Error("Function call result is not cached yet.");if(l.error)throw l.error;return l.result}c.get(function(t){a(t.error,t.result)}),c.fetching||(c.fetching=!0,o.push(function(t,e){c.set({error:t,result:e})}),t.apply(e||this,o))};return o.clear=function(){var t=s.isString(r.key)?r.key:s.isFunction(r.key)?r.key.apply(e,arguments):n(r.namespace,arguments);i.clear(t)},o},e.exports=u},{events:37,inherits:39,"lodash/core":43}],9:[function(t,e,r){(function(r){"use strict";function n(t,e){t.oauth2.refreshToken(t.refreshToken,function(r,n){if(r)return e(r);var i=s(n.id);t.initialize({instanceUrl:n.instance_url,accessToken:n.access_token,userInfo:i}),e(null,n.access_token,n)})}function i(t){if(f.isString(t)){if("{"===t[0])return JSON.parse(t);var e=t.split(".").pop(),n=r.from(e,"base64").toString("utf-8");return JSON.parse(n)}return t}function o(t){function e(t){return t<10?"0"+t:t}return t.getUTCFullYear()+"-"+e(t.getUTCMonth()+1)+"-"+e(t.getUTCDate())+"T"+e(t.getUTCHours())+":"+e(t.getUTCMinutes())+":"+e(t.getUTCSeconds())+"+00:00"}function s(t){var e=t.split("/"),r=e.pop(),n=e.pop();return{id:r,organizationId:n,url:t}}function a(t,e){return function(r,n){r.login(t,e,function(t){return t?n(t):void n(null,r.accessToken)})}}function u(t){return t&&String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}var c=t("events"),l=t("inherits"),f=t("lodash/core"),h=t("./promise"),p=t("./logger"),d=t("./oauth2"),y=t("./query"),m=t("./sobject"),g=t("./quick-action"),v=t("./http-api"),_=t("./transport"),b=t("./process"),w=t("./cache"),E={loginUrl:"https://login.salesforce.com",instanceUrl:"",version:"42.0"},T=200,S=e.exports=function(e){e=e||{},this._logger=new p(e.logLevel);var r=e.oauth2||{loginUrl:e.loginUrl,clientId:e.clientId,clientSecret:e.clientSecret,redirectUri:e.redirectUri,proxyUrl:e.proxyUrl,httpProxy:e.httpProxy};this.oauth2=r=r instanceof d?r:new d(r),this.loginUrl=e.loginUrl||r.loginUrl||E.loginUrl,this.version=e.version||E.version,this.maxRequest=e.maxRequest||this.maxRequest||10,e.proxyUrl?this._transport=new _.ProxyTransport(e.proxyUrl):e.httpProxy?this._transport=new _.HttpProxyTransport(e.httpProxy):this._transport=new _,this.callOptions=e.callOptions;var i=t("./core");i.emit("connection:new",this),this.process=new b(this),this.cache=new w;var o=e.refreshFn;!o&&this.oauth2.clientId&&(o=n),o&&(this._refreshDelegate=new v.SessionRefreshDelegate(this,o));var s={key:function(t){return t?"describe."+t:"describe"}};this.describe$=this.cache.makeCacheable(this.describe,this,s),this.describe=this.cache.makeResponseCacheable(this.describe,this,s),this.describeSObject$=this.describe$,this.describeSObject=this.describe,s={key:"describeGlobal"},this.describeGlobal$=this.cache.makeCacheable(this.describeGlobal,this,s),this.describeGlobal=this.cache.makeResponseCacheable(this.describeGlobal,this,s),this.initialize(e)};l(S,c.EventEmitter),S.prototype.initialize=function(t){if(!t.instanceUrl&&t.serverUrl&&(t.instanceUrl=t.serverUrl.split("/").slice(0,3).join("/")),this.instanceUrl=t.instanceUrl||t.serverUrl||this.instanceUrl||E.instanceUrl,this.accessToken=t.sessionId||t.accessToken||this.accessToken,this.refreshToken=t.refreshToken||this.refreshToken,this.refreshToken&&!this._refreshDelegate)throw new Error("Refresh token is specified without oauth2 client information or refresh function");this.signedRequest=t.signedRequest&&i(t.signedRequest),this.signedRequest&&(this.accessToken=this.signedRequest.client.oauthToken,_.CanvasTransport.supported&&(this._transport=new _.CanvasTransport(this.signedRequest))),t.userInfo&&(this.userInfo=t.userInfo),this.limitInfo={},this.sobjects={},this.cache.clear(),this.cache.get("describeGlobal").removeAllListeners("value"),this.cache.get("describeGlobal").on("value",f.bind(function(t){if(t.result){var e=f.map(t.result.sobjects,function(t){return t.name});e.forEach(this.sobject,this)}},this)),this.tooling&&this.tooling.initialize(),this._sessionType=t.sessionId?"soap":"oauth2"},S.prototype._baseUrl=function(){return[this.instanceUrl,"services/data","v"+this.version].join("/")},S.prototype._normalizeUrl=function(t){return"/"===t[0]?0===t.indexOf("/services/")?this.instanceUrl+t:this._baseUrl()+t:t},S.prototype.request=function(t,e,r){"function"==typeof e&&(r=e,e=null),e=e||{};var n=this;f.isString(t)&&(t={method:"GET",url:t}),t.url=this._normalizeUrl(t.url);var i=new v(this,e);return i.on("response",function(t){if(t.headers&&t.headers["sforce-limit-info"]){var e=t.headers["sforce-limit-info"].match(/api\-usage=(\d+)\/(\d+)/);e&&(n.limitInfo={apiUsage:{used:parseInt(e[1],10),limit:parseInt(e[2],10)}})}}),i.request(t).thenCall(r)},S.prototype.requestGet=function(t,e,r){var n={method:"GET",url:t};return this.request(n,e,r)},S.prototype.requestPost=function(t,e,r,n){var i={method:"POST",url:t,body:JSON.stringify(e),headers:{"content-type":"application/json"}};return this.request(i,r,n)},S.prototype.requestPut=function(t,e,r,n){var i={method:"PUT",url:t,body:JSON.stringify(e),headers:{"content-type":"application/json"}};return this.request(i,r,n)},S.prototype.requestPatch=function(t,e,r,n){var i={method:"PATCH",url:t,body:JSON.stringify(e),headers:{"content-type":"application/json"}};return this.request(i,r,n)},S.prototype.requestDelete=function(t,e,r){var n={method:"DELETE",url:t};return this.request(n,e,r)},S.prototype.query=function(t,e,r){"function"==typeof e&&(r=e,e=void 0);var n=new y(this,t,e);return r&&n.run(r),n},S.prototype.queryAll=function(t,e,r){"function"==typeof e&&(r=e,e=void 0);var n=new y(this,t,e);return n.scanAll(!0),r&&n.run(r),n},S.prototype.queryMore=function(t,e,r){"function"==typeof e&&(r=e,e=void 0);var n=new y(this,{locator:t},e);return r&&n.run(r),n},S.prototype._ensureVersion=function(t){var e=this.version.split(".");return parseInt(e[0],10)>=t},S.prototype._supports=function(t){switch(t){case"sobject-collection":return this._ensureVersion(42);default:return!1}},S.prototype.retrieve=function(t,e,r,n){return"function"==typeof r&&(n=r,r={}),r=r||{},(f.isArray(e)?this._supports("sobject-collection")?this._retrieveMany(t,e,r):this._retrieveParallel(t,e,r):this._retrieveSingle(t,e,r)).thenCall(n)},S.prototype._retrieveSingle=function(t,e,r){if(!e)return h.reject(new Error("Invalid record ID. Specify valid record ID value"));var n=[this._baseUrl(),"sobjects",t,e].join("/");return r.fields&&(n+="?fields="+r.fields.join(",")),this.request({method:"GET",url:n,headers:r.headers})},S.prototype._retrieveParallel=function(t,e,r){if(e.length>this.maxRequest)return h.reject(new Error("Exceeded max limit of concurrent call"));var n=this;return h.all(e.map(function(e){return n._retrieveSingle(t,e,r)["catch"](function(t){if(r.allOrNone||"NOT_FOUND"!==t.errorCode)throw t;return null})}))},S.prototype._retrieveMany=function(t,e,r){if(0===e.length)return h.resolve([]);var n=[this._baseUrl(),"composite","sobjects",t].join("/"),i=this;return(r.fields?h.resolve(r.fields):new h(function(e,r){i.describe$(t,function(t,n){if(t)r(t);else{var i=n.fields.map(function(t){return t.name});e(i)}})})).then(function(t){return i.request({method:"POST",url:n,body:JSON.stringify({ids:e,fields:t}),headers:f.defaults(r.headers||{},{"Content-Type":"application/json"})})})},S.prototype._toRecordResult=function(t,e){var r={statusCode:e.errorCode,message:e.message};e.content&&(r.content=e.content),e.fields&&(r.fields=e.fields);var n={success:!1,errors:[r]};return t&&(n.id=t),n},S.prototype.insert=S.prototype.create=function(t,e,r,n){return f.isString(t)||(n=r,r=e,e=t,t=null),"function"==typeof r&&(n=r,r={}),r=r||{},(f.isArray(e)?this._supports("sobject-collection")?this._createMany(t,e,r):this._createParallel(t,e,r):this._createSingle(t,e,r)).thenCall(n)},S.prototype._createSingle=function(t,e,r){var n=t||e.attributes&&e.attributes.type||e.type;if(!n)return h.reject(new Error("No SObject Type defined in record"));e=f.clone(e),delete e.Id,delete e.type,delete e.attributes;var i=[this._baseUrl(),"sobjects",n].join("/");return this.request({method:"POST",url:i,body:JSON.stringify(e),headers:f.defaults(r.headers||{},{"Content-Type":"application/json"})})},S.prototype._createParallel=function(t,e,r){if(e.length>this.maxRequest)return h.reject(new Error("Exceeded max limit of concurrent call"));var n=this;return h.all(e.map(function(e){return n._createSingle(t,e,r)["catch"](function(t){if(r.allOrNone||!t.errorCode)throw t;return this._toRecordResult(null,t)})}))},S.prototype._createMany=function(t,e,r){if(0===e.length)return h.resolve([]);if(e.length>T&&r.allowRecursive){var n=this;return n._createMany(t,e.slice(0,T),r).then(function(i){return n._createMany(t,e.slice(T),r).then(function(t){return i.concat(t)})})}e=f.map(e,function(e){var r=t||e.attributes&&e.attributes.type||e.type;return r?(e=f.clone(e),delete e.Id,delete e.type,e.attributes={type:r},e):h.reject(new Error("No SObject Type defined in record"))});var i=[this._baseUrl(),"composite","sobjects"].join("/");return this.request({method:"POST",url:i,body:JSON.stringify({allOrNone:r.allOrNone||!1,records:e}),headers:f.defaults(r.headers||{},{"Content-Type":"application/json"})})},S.prototype.update=function(t,e,r,n){return f.isString(t)||(n=r,r=e,e=t,t=null),"function"==typeof r&&(n=r,r={}),r=r||{},(f.isArray(e)?this._supports("sobject-collection")?this._updateMany(t,e,r):this._updateParallel(t,e,r):this._updateSingle(t,e,r)).thenCall(n)},S.prototype._updateSingle=function(t,e,r){var n=e.Id;if(!n)return h.reject(new Error("Record id is not found in record."));var i=t||e.attributes&&e.attributes.type||e.type;if(!i)return h.reject(new Error("No SObject Type defined in record"));e=f.clone(e),delete e.Id,delete e.type,delete e.attributes;var o=[this._baseUrl(),"sobjects",i,n].join("/");return this.request({method:"PATCH",url:o,body:JSON.stringify(e),headers:f.defaults(r.headers||{},{"Content-Type":"application/json"})},{noContentResponse:{id:n,success:!0,errors:[]}})},S.prototype._updateParallel=function(t,e,r){if(e.length>this.maxRequest)return h.reject(new Error("Exceeded max limit of concurrent call"));var n=this;return h.all(e.map(function(e){return n._updateSingle(t,e,r)["catch"](function(t){if(r.allOrNone||!t.errorCode)throw t;return this._toRecordResult(e.Id,t)})}))},S.prototype._updateMany=function(t,e,r){if(0===e.length)return h.resolve([]);if(e.length>T&&r.allowRecursive){var n=this;return n._updateMany(t,e.slice(0,T),r).then(function(i){return n._updateMany(t,e.slice(T),r).then(function(t){return i.concat(t)})})}e=f.map(e,function(e){var r=e.Id;if(!r)throw new Error("Record id is not found in record.");var n=t||e.attributes&&e.attributes.type||e.type;if(!n)throw new Error("No SObject Type defined in record");return e=f.clone(e),delete e.Id,e.id=r,delete e.type,e.attributes={type:n},e});var i=[this._baseUrl(),"composite","sobjects"].join("/");return this.request({method:"PATCH",url:i,body:JSON.stringify({allOrNone:r.allOrNone||!1,records:e}),headers:f.defaults(r.headers||{},{"Content-Type":"application/json"})})},S.prototype.upsert=function(t,e,r,n,i){f.isString(t)||(i=n,n=r,r=e,e=t,t=null),"function"==typeof n&&(i=n,n={}),n=n||{};var o=this,s=f.isArray(e);return e=s?e:[e],e.length>this.maxRequest?h.reject(new Error("Exceeded max limit of concurrent call")).thenCall(i):h.all(f.map(e,function(e){var i=t||e.attributes&&e.attributes.type||e.type,a=e[r];e=f.clone(e),delete e[r],delete e.type,delete e.attributes;var u=[o._baseUrl(),"sobjects",i,r,a].join("/");return o.request({method:"PATCH",url:u,body:JSON.stringify(e),headers:f.defaults(n.headers||{},{"Content-Type":"application/json"})},{noContentResponse:{success:!0,errors:[]}})["catch"](function(t){if(!s||n.allOrNone||!t.errorCode)throw t;return o._toRecordResult(null,t)})})).then(function(t){return!s&&f.isArray(t)?t[0]:t}).thenCall(i)},S.prototype["delete"]=S.prototype.del=S.prototype.destroy=function(t,e,r,n){return"function"==typeof r&&(n=r,r={}),r=r||{},(f.isArray(e)?this._supports("sobject-collection")?this._destroyMany(t,e,r):this._destroyParallel(t,e,r):this._destroySingle(t,e,r)).thenCall(n)},S.prototype._destroySingle=function(t,e,r){var n=[this._baseUrl(),"sobjects",t,e].join("/");return this.request({method:"DELETE",url:n,headers:r.headers||null},{noContentResponse:{id:e,success:!0,errors:[]}})},S.prototype._destroyParallel=function(t,e,r){if(e.length>this.maxRequest)return h.reject(new Error("Exceeded max limit of concurrent call"));var n=this;return h.all(e.map(function(e){return n._destroySingle(t,e,r)["catch"](function(t){if(r.allOrNone||!t.errorCode)throw t;return this._toRecordResult(e,t)})}))},S.prototype._destroyMany=function(t,e,r){if(0===e.length)return h.resolve([]);if(e.length>T&&r.allowRecursive){var n=this;return n._destroyMany(t,e.slice(0,T),r).then(function(i){return n._destroyMany(t,e.slice(T),r).then(function(t){return i.concat(t)})})}var i=[this._baseUrl(),"composite","sobjects?ids="].join("/")+e.join(",");return r.allOrNone&&(i+="&allOrNone=true"),this.request({method:"DELETE",url:i,headers:r.headers||null})},S.prototype.search=function(t,e){var r=this._baseUrl()+"/search?q="+encodeURIComponent(t);return this.request(r).thenCall(e)},S.prototype.describe=S.prototype.describeSObject=function(t,e){var r=[this._baseUrl(),"sobjects",t,"describe"].join("/");return this.request(r).thenCall(e)},S.prototype.describeGlobal=function(t){var e=this._baseUrl()+"/sobjects";return this.request(e).thenCall(t)},S.prototype.sobject=function(t){this.sobjects=this.sobjects||{};var e=this.sobjects[t]=this.sobjects[t]||new m(this,t);return e},S.prototype.identity=function(t,e){"function"==typeof t&&(e=t,t={}),t=t||{};var r=this,n=this.userInfo&&this.userInfo.url;return h.resolve(n?{identity:n}:this.request({method:"GET",url:this._baseUrl(),headers:t.headers})).then(function(t){var e=t.identity;return r.request({method:"GET",url:e})}).then(function(t){return r.userInfo={id:t.user_id,organizationId:t.organization_id,url:t.id},t}).thenCall(e)},S.prototype.authorize=function(t,e,r){"function"==typeof e&&(r=e,e={});var n=this,i=this._logger;return this.oauth2.requestToken(t,e).then(function(t){var e=s(t.id);return n.initialize({instanceUrl:t.instance_url,accessToken:t.access_token,refreshToken:t.refresh_token,userInfo:e}),i.debug("<login> completed. user id = "+e.id+", org id = "+e.organizationId),e}).thenCall(r)},S.prototype.login=function(t,e,r){return this._refreshDelegate=new v.SessionRefreshDelegate(this,a(t,e)),this.oauth2&&this.oauth2.clientId&&this.oauth2.clientSecret?this.loginByOAuth2(t,e,r):this.loginBySoap(t,e,r)},S.prototype.loginByOAuth2=function(t,e,r){var n=this,i=this._logger;return this.oauth2.authenticate(t,e).then(function(t){var e=s(t.id);return n.initialize({instanceUrl:t.instance_url,accessToken:t.access_token,userInfo:e}),i.debug("<login> completed. user id = "+e.id+", org id = "+e.organizationId),e}).thenCall(r)},S.prototype.loginBySoap=function(t,e,r){var n=this,i=this._logger,o=['<se:Envelope xmlns:se="http://schemas.xmlsoap.org/soap/envelope/">',"<se:Header/>","<se:Body>",'<login xmlns="urn:partner.soap.sforce.com">',"<username>"+u(t)+"</username>","<password>"+u(e)+"</password>","</login>","</se:Body>","</se:Envelope>"].join(""),s=[this.loginUrl,"services/Soap/u",this.version].join("/");return this._transport.httpRequest({method:"POST",url:s,body:o,headers:{"Content-Type":"text/xml",SOAPAction:'""'}}).then(function(t){var e;if(t.statusCode>=400){e=t.body.match(/<faultstring>([^<]+)<\/faultstring>/);var r=e&&e[1];throw new Error(r||t.body)}i.debug("SOAP response = "+t.body),e=t.body.match(/<serverUrl>([^<]+)<\/serverUrl>/);var o=e&&e[1];e=t.body.match(/<sessionId>([^<]+)<\/sessionId>/);var a=e&&e[1];e=t.body.match(/<userId>([^<]+)<\/userId>/);var u=e&&e[1];e=t.body.match(/<organizationId>([^<]+)<\/organizationId>/);var c=e&&e[1],l=s.split("/").slice(0,3).join("/");l+="/id/"+c+"/"+u;var f={id:u,organizationId:c,url:l};return n.initialize({serverUrl:o.split("/").slice(0,3).join("/"),sessionId:a,userInfo:f}),i.debug("<login> completed. user id = "+u+", org id = "+c),f}).thenCall(r)},S.prototype.logout=function(t,e){return"function"==typeof t&&(e=t,t=!1),"oauth2"===this._sessionType?this.logoutByOAuth2(t,e):this.logoutBySoap(t,e)},S.prototype.logoutByOAuth2=function(t,e){"function"==typeof t&&(e=t,t=!1);var r=this;this._logger;return this.oauth2.revokeToken(t?this.refreshToken:this.accessToken).then(function(){r.accessToken=null,r.userInfo=null,r.refreshToken=null,r.instanceUrl=null,r.cache.clear()}).thenCall(e)},S.prototype.logoutBySoap=function(t,e){"function"==typeof t&&(e=t,t=!1);var r=this,n=this._logger,i=['<se:Envelope xmlns:se="http://schemas.xmlsoap.org/soap/envelope/">',"<se:Header>",'<SessionHeader xmlns="urn:partner.soap.sforce.com">',"<sessionId>"+u(t?this.refreshToken:this.accessToken)+"</sessionId>","</SessionHeader>","</se:Header>","<se:Body>",'<logout xmlns="urn:partner.soap.sforce.com"/>',"</se:Body>","</se:Envelope>"].join("");return this._transport.httpRequest({method:"POST",url:[this.instanceUrl,"services/Soap/u",this.version].join("/"),body:i,headers:{"Content-Type":"text/xml",SOAPAction:'""'}}).then(function(t){if(n.debug("SOAP statusCode = "+t.statusCode+", response = "+t.body),t.statusCode>=400){var e=t.body.match(/<faultstring>([^<]+)<\/faultstring>/),i=e&&e[1];throw new Error(i||t.body)}r.accessToken=null,r.userInfo=null,r.refreshToken=null,r.instanceUrl=null,r.cache.clear()}).thenCall(e)},S.prototype.recent=function(t,e,r){f.isString(t)||(r=e,e=t,t=void 0),f.isNumber(e)||(r=e,e=void 0);var n;return t?(n=[this._baseUrl(),"sobjects",t].join("/"),this.request(n).then(function(t){return e?t.recentItems.slice(0,e):t.recentItems}).thenCall(r)):(n=this._baseUrl()+"/recent",e&&(n+="?limit="+e),this.request(n).thenCall(r))},S.prototype.updated=function(t,e,r,n){var i=[this._baseUrl(),"sobjects",t,"updated"].join("/");return"string"==typeof e&&(e=new Date(e)),e instanceof Date&&(e=o(e)),e&&(i+="?start="+encodeURIComponent(e)),"string"==typeof r&&(r=new Date(r)),r instanceof Date&&(r=o(r)),r&&(i+="&end="+encodeURIComponent(r)),this.request(i).thenCall(n)},S.prototype.deleted=function(t,e,r,n){var i=[this._baseUrl(),"sobjects",t,"deleted"].join("/");return"string"==typeof e&&(e=new Date(e)),e instanceof Date&&(e=o(e)),e&&(i+="?start="+encodeURIComponent(e)),"string"==typeof r&&(r=new Date(r)),r instanceof Date&&(r=o(r)),r&&(i+="&end="+encodeURIComponent(r)),this.request(i).thenCall(n)},S.prototype.tabs=function(t){var e=[this._baseUrl(),"tabs"].join("/");return this.request(e).thenCall(t)},S.prototype.limits=function(t){var e=[this._baseUrl(),"limits"].join("/");return this.request(e).thenCall(t)},S.prototype.theme=function(t){var e=[this._baseUrl(),"theme"].join("/");return this.request(e).thenCall(t)},S.prototype.quickActions=function(t){return this.request("/quickActions").thenCall(t)},S.prototype.quickAction=function(t){return new g(this,"/quickActions/"+t)}}).call(this,t("buffer").Buffer)},{"./cache":8,"./core":10,"./http-api":13,"./logger":14,"./oauth2":15,"./process":16,"./promise":17,"./query":18,"./quick-action":19,"./sobject":24,"./transport":26,buffer:30,events:37,inherits:39,"lodash/core":43}],10:[function(t,e,r){"use strict";var n=t("events").EventEmitter,i=e.exports=new n;i.VERSION=t("./VERSION"),i.Connection=t("./connection"),i.OAuth2=t("./oauth2"),i.Date=i.SfDate=t("./date"),i.RecordStream=t("./record-stream"),i.Promise=t("./promise"),i.require=t("./require")},{"./VERSION":2,"./connection":9,"./date":12,"./oauth2":15,"./promise":17,"./record-stream":20,"./require":22,events:37}],11:[function(t,e,r){"use strict";function n(t,e){return e=a.extend({},e,{columns:!0}),c(t,e)}function i(t,e){return e=a.extend({},e,{header:!0}),f(t,e)}function o(t){return t=a.extend({},t,{columns:!0}),u(t)}function s(t){return t=a.extend({},t,{header:!0}),l(t)}var a=t("lodash/core"),u=t("csv-parse/lib/es5"),c=t("csv-parse/lib/es5/sync"),l=t("csv-stringify"),f=t("csv-stringify/lib/sync");e.exports={parseCSV:n,toCSV:i,parseCSVStream:o,serializeCSVStream:s}},{"csv-parse/lib/es5":33,"csv-parse/lib/es5/sync":34,"csv-stringify":35,"csv-stringify/lib/sync":36,"lodash/core":43}],12:[function(t,e,r){"use strict";function n(t){return(t<10?"0":"")+t}function i(t){return function(e){return new s(t+":"+e)}}var o=t("lodash/core"),s=e.exports=function(t){this._literal=t};s.prototype.toString=s.prototype.toJSON=function(){return this._literal},s.toDateLiteral=function(t){o.isNumber(t)?t=new Date(t):o.isString(t)&&(t=s.parseDate(t));var e=t.getFullYear(),r=t.getMonth()+1,i=t.getDate(),a=[e,n(r),n(i)].join("-");return new s(a)},s.toDateTimeLiteral=function(t){o.isNumber(t)?t=new Date(t):o.isString(t)&&(t=s.parseDate(t));var e=t.getUTCFullYear(),r=t.getUTCMonth()+1,i=t.getUTCDate(),a=t.getUTCHours(),u=t.getUTCMinutes(),c=t.getUTCSeconds(),l=[e,n(r),n(i)].join("-")+"T"+[n(a),n(u),n(c)].join(":")+"Z";return new s(l)},s.parseDate=function(t){var e=new Date,r=/^([\d]{4})-?([\d]{2})-?([\d]{2})(T([\d]{2}):?([\d]{2}):?([\d]{2})(.([\d]{3}))?(Z|([\+\-])([\d]{2}):?([\d]{2})))?$/,n=t.match(r);if(n){if(e=new Date(0),n[4]){if(e.setUTCFullYear(parseInt(n[1],10)),e.setUTCDate(parseInt(n[3],10)),e.setUTCMonth(parseInt(n[2],10)-1),e.setUTCHours(parseInt(n[5],10)),e.setUTCMinutes(parseInt(n[6],10)),e.setUTCSeconds(parseInt(n[7],10)),e.setUTCMilliseconds(parseInt(n[9]||"0",10)),n[10]&&"Z"!==n[10]){var i=60*parseInt(n[12],10)+parseInt(n[13],10);e.setTime(("+"===n[11]?-1:1)*i*60*1e3+e.getTime())}}else e.setFullYear(parseInt(n[1],10)),e.setDate(parseInt(n[3],10)),e.setMonth(parseInt(n[2],10)-1),e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0);return e}throw new Error("Invalid date format is specified : "+t)};var a={YESTERDAY:1,
TODAY:1,TOMORROW:1,LAST_WEEK:1,THIS_WEEK:1,NEXT_WEEK:1,LAST_MONTH:1,THIS_MONTH:1,NEXT_MONTH:1,LAST_90_DAYS:1,NEXT_90_DAYS:1,LAST_N_DAYS:2,NEXT_N_DAYS:2,NEXT_N_WEEKS:2,LAST_N_WEEKS:2,NEXT_N_MONTHS:2,LAST_N_MONTHS:2,THIS_QUARTER:1,LAST_QUARTER:1,NEXT_QUARTER:1,NEXT_N_QUARTERS:2,LAST_N_QUARTERS:2,THIS_YEAR:1,LAST_YEAR:1,NEXT_YEAR:1,NEXT_N_YEARS:2,LAST_N_YEARS:2,THIS_FISCAL_QUARTER:1,LAST_FISCAL_QUARTER:1,NEXT_FISCAL_QUARTER:1,NEXT_N_FISCAL_QUARTERS:2,LAST_N_FISCAL_QUARTERS:2,THIS_FISCAL_YEAR:1,LAST_FISCAL_YEAR:1,NEXT_FISCAL_YEAR:1,NEXT_N_FISCAL_YEARS:2,LAST_N_FISCAL_YEARS:2};for(var u in a){var c=a[u];s[u]=1===c?new s(u):i(u)}},{"lodash/core":43}],13:[function(t,e,r){"use strict";function n(t){return JSON.parse(t)}function i(e){var r={};if(t("xml2js").parseString(e,{explicitArray:!1},function(t,e){r={error:t,result:e}}),r.error)throw r.error;return r.result}function o(e){return t("./csv").parseCSV(e)}function s(t){return t}var a=t("inherits"),u=t("events"),c=t("lodash/core"),l=t("./promise"),f=function(t,e){e=e||{},this._conn=t,this.on("resume",function(e){t.emit("resume",e)}),this._responseType=e.responseType,this._transport=e.transport||t._transport,this._noContentResponse=e.noContentResponse};a(f,u.EventEmitter),f.prototype.request=function(t,e){var r=this,n=this._conn,i=n._logger,o=this.getRefreshDelegate(),s=n.instanceUrl,a=l.defer(),u=function(e){return e?void a.reject(e):(s!==n.instanceUrl&&(t.url=t.url.replace(s,n.instanceUrl)),void r.request(t).then(function(t){a.resolve(t)},function(t){a.reject(t)}))};if(o&&o._refreshing)return o.once("resume",u),a.promise.thenCall(e);r.beforeSend(t),r.emit("request",t),i.debug("<request> method="+t.method+", url="+t.url);var c=Date.now();return this._transport.httpRequest(t).then(function(e){var n=Date.now();if(i.debug("elappsed time : "+(n-c)+"msec"),i.debug("<response> status="+e.statusCode+", url="+t.url),r.emit("response",e),r.isSessionExpired(e)&&o)return o.refresh(c,u),a.promise;if(r.isErrorResponse(e)){var s=r.getError(e);throw s}return r.getResponseBody(e)},function(t){var e=Date.now();throw i.debug("elappsed time : "+(e-c)+"msec"),i.error(t),t}).thenCall(e)},f.prototype.getRefreshDelegate=function(){return this._conn._refreshDelegate},f.prototype.beforeSend=function(t){if(t.headers=t.headers||{},this._conn.accessToken&&(t.headers.Authorization="Bearer "+this._conn.accessToken),this._conn.callOptions){var e=[];for(var r in this._conn.callOptions)e.push(r+"="+this._conn.callOptions[r]);t.headers["Sforce-Call-Options"]=e.join(", ")}},f.prototype.getResponseContentType=function(t){return this._responseType||t.headers&&t.headers["content-type"]},f.prototype.parseResponseBody=function(t){var e=this.getResponseContentType(t),r=/^(text|application)\/xml(;|$)/.test(e)?i:/^application\/json(;|$)/.test(e)?n:/^text\/csv(;|$)/.test(e)?o:s;try{return r(t.body)}catch(a){return t.body}},f.prototype.getResponseBody=function(t){if(204===t.statusCode)return this._noContentResponse;var e,r=this.parseResponseBody(t);if(this.hasErrorInResponseBody(r))throw e=this.getError(t,r);if(300===t.statusCode)throw e=new Error("Multiple records found"),e.name="MULTIPLE_CHOICES",e.content=r,e;return r},f.prototype.isSessionExpired=function(t){return 401===t.statusCode},f.prototype.isErrorResponse=function(t){return t.statusCode>=400},f.prototype.hasErrorInResponseBody=function(t){return!1},f.prototype.parseError=function(t){var e=t;return c.isArray(e)?e[0]:e},f.prototype.getError=function(t,e){var r;try{r=this.parseError(e||this.parseResponseBody(t))}catch(n){}r=c.isObject(r)&&c.isString(r.message)?r:{errorCode:"ERROR_HTTP_"+t.statusCode,message:t.body};var i=new Error(r.message);i.name=r.errorCode;for(var o in r)i[o]=r[o];return i};var h=function(t,e){this._conn=t,this._refreshFn=e,this._refreshing=!1};a(h,u.EventEmitter),h.prototype.refresh=function(t,e){if(this._lastRefreshedAt>t)return e();var r=this,n=this._conn,i=n._logger;return r.once("resume",e),r._refreshing?void 0:(i.debug("<refresh token>"),r._refreshing=!0,r._refreshFn(n,function(t,e,o){t||(i.debug("Connection refresh completed."),n.accessToken=e,n.emit("refresh",e,o)),r._lastRefreshedAt=Date.now(),r._refreshing=!1,r.emit("resume",t)}))},f.SessionRefreshDelegate=h,e.exports=f},{"./csv":11,"./promise":17,events:37,inherits:39,"lodash/core":43,xml2js:78}],14:[function(t,e,r){"use strict";function n(t){return function(e){this.log(t,e)}}var i=e.exports=function(t){"string"==typeof t&&(t=o[t]),t||(t=o.INFO),this._logLevel=t},o=i.LogLevels={DEBUG:1,INFO:2,WARN:3,ERROR:4,FATAL:5};i.prototype.log=function(t,e){this._logLevel<=t&&(t<o.ERROR?console.log(e):console.error(e))};for(var s in o)i.prototype[s.toLowerCase()]=n(o[s])},{}],15:[function(t,e,r){"use strict";var n=t("querystring"),i=t("lodash/core"),o=t("./transport"),s={loginUrl:"https://login.salesforce.com"},a=e.exports=function(t){t.authzServiceUrl&&t.tokenServiceUrl?(this.loginUrl=t.authzServiceUrl.split("/").slice(0,3).join("/"),this.authzServiceUrl=t.authzServiceUrl,this.tokenServiceUrl=t.tokenServiceUrl,this.revokeServiceUrl=t.revokeServiceUrl):(this.loginUrl=t.loginUrl||s.loginUrl,this.authzServiceUrl=this.loginUrl+"/services/oauth2/authorize",this.tokenServiceUrl=this.loginUrl+"/services/oauth2/token",this.revokeServiceUrl=this.loginUrl+"/services/oauth2/revoke"),this.clientId=t.clientId,this.clientSecret=t.clientSecret,this.redirectUri=t.redirectUri,t.proxyUrl?this._transport=new o.ProxyTransport(t.proxyUrl):t.httpProxy?this._transport=new o.HttpProxyTransport(t.httpProxy):this._transport=new o};i.extend(a.prototype,{getAuthorizationUrl:function(t){return t=i.extend({response_type:"code",client_id:this.clientId,redirect_uri:this.redirectUri},t||{}),this.authzServiceUrl+(this.authzServiceUrl.indexOf("?")>=0?"&":"?")+n.stringify(t)},refreshToken:function(t,e){var r={grant_type:"refresh_token",refresh_token:t,client_id:this.clientId};return this.clientSecret&&(r.client_secret=this.clientSecret),this._postParams(r,e)},requestToken:function(t,e,r){return"function"==typeof e&&(r=e,e={}),e=i.extend({grant_type:"authorization_code",code:t,client_id:this.clientId,redirect_uri:this.redirectUri},e||{}),this.clientSecret&&(e.client_secret=this.clientSecret),this._postParams(e,r)},authenticate:function(t,e,r){return this._postParams({grant_type:"password",username:t,password:e,client_id:this.clientId,client_secret:this.clientSecret,redirect_uri:this.redirectUri},r)},revokeToken:function(t,e){return this._transport.httpRequest({method:"POST",url:this.revokeServiceUrl,body:n.stringify({token:t}),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(t){if(t.statusCode>=400){var e=n.parse(t.body);e&&e.error||(e={error:"ERROR_HTTP_"+t.statusCode,error_description:t.body});var r=new Error(e.error_description);throw r.name=e.error,r}}).thenCall(e)},_postParams:function(t,e){return this._transport.httpRequest({method:"POST",url:this.tokenServiceUrl,body:n.stringify(t),headers:{"content-type":"application/x-www-form-urlencoded"}}).then(function(t){var e;try{e=JSON.parse(t.body)}catch(r){}if(t.statusCode>=400){e=e||{error:"ERROR_HTTP_"+t.statusCode,error_description:t.body};var n=new Error(e.error_description);throw n.name=e.error,n}return e}).thenCall(e)}})},{"./transport":26,"lodash/core":43,querystring:51}],16:[function(t,e,r){"use strict";var n=t("lodash/core"),i=(t("./promise"),t("./connection"),e.exports=function(t){this.rule=new i(t),this.approval=new o(t)},function(t){this._conn=t});i.prototype.list=function(t){return this._conn.request("/process/rules").then(function(t){return t.rules}).thenCall(t)},i.prototype.trigger=function(t,e){return t=n.isArray(t)?t:[t],this._conn.request({method:"POST",url:"/process/rules/",body:JSON.stringify({contextIds:t}),headers:{"content-type":"application/json"}}).thenCall(e)};var o=function(t){this._conn=t};o.prototype.list=function(t){return this._conn.request("/process/approvals").then(function(t){return t.approvals}).thenCall(t)},o.prototype.request=function(t,e){return t=t.map(function(t){return t._request?t._request:t}),this._conn.request({method:"POST",url:"/process/approvals",headers:{"content-type":"application/json"},body:JSON.stringify({requests:t})}).thenCall(e)},o.prototype._createRequest=function(t,e,r,i,o){"function"==typeof r&&(o=r,i=null,r=null),"function"==typeof i&&(o=i,i=null),i=i||{};var a={actionType:t,contextId:e,comments:r};return n.extend(a,i),new s(this,a).thenCall(o)},o.prototype.submit=function(t,e,r,n){return this._createRequest("Submit",t,e,r,n)},o.prototype.approve=function(t,e,r,n){return this._createRequest("Approve",t,e,r,n)},o.prototype.reject=function(t,e,r,n){return this._createRequest("Reject",t,e,r,n)};var s=function(t,e){this._process=t,this._request=e};s.prototype.then=function(t,e){this._promise||(this._promise=this._process.request([this]).then(function(t){return t[0]})),this._promise.then(t,e)},s.prototype.thenCall=function(t){return t?this.then(function(e){t(null,e)},function(e){t(e)}):this}},{"./connection":9,"./promise":17,"lodash/core":43}],17:[function(t,e,r){(function(r){"use strict";var n=t("lodash/core"),i=t("promise/lib/es6-extensions");i.prototype.thenCall=function(t){return n.isFunction(t)&&this.then(function(e){r.nextTick(function(){t(null,e)})},function(e){r.nextTick(function(){t(e)})}),this},i.prototype.fail=i.prototype["catch"],i.defer=function(){return new o};var o=function(){var t=this;this.promise=new i(function(e,r){t.resolve=e,t.reject=r})};e.exports=i}).call(this,t("_process"))},{_process:46,"lodash/core":43,"promise/lib/es6-extensions":48}],18:[function(t,e,r){(function(r){"use strict";var n=t("inherits"),i=(t("events"),t("readable-stream")),o=t("lodash/core"),s=t("./promise"),a=(t("./date"),t("./soql-builder")),u=t("./record-stream"),c=e.exports=function(t,e,r){c.super_.call(this,{objectMode:!0}),this._conn=t,o.isString(e)?this._soql=e:e.locator&&e.locator.indexOf("/")>=0?this._locator=e.locator.split("/").pop():(this._config=e,this.select(e.fields),e.includes&&this.include(e.includes),e.sort&&this.sort(e.sort)),this._options=o.defaults(r||{},{maxFetch:1e4,autoFetch:!1,scanAll:!1,responseTarget:l.QueryResult}),this._executed=!1,this._finished=!1,this._chaining=!1,this._deferred=s.defer()};n(c,i.Readable),c.prototype.select=function(t){if(this._soql)throw Error("Cannot set select fields for the query which has already built SOQL.");if(t=t||"*",o.isString(t))t=t.split(/\s*,\s*/);else if(o.isObject(t)&&!o.isArray(t)){var e=[];for(var r in t)t[r]&&e.push(r);t=e}return this._config.fields=t,this},c.prototype.where=function(t){if(this._soql)throw Error("Cannot set where conditions for the query which has already built SOQL.");return this._config.conditions=t,this},c.prototype.limit=function(t){if(this._soql)throw Error("Cannot set limit for the query which has already built SOQL.");return this._config.limit=t,this},c.prototype.skip=c.prototype.offset=function(t){if(this._soql)throw Error("Cannot set skip/offset for the query which has already built SOQL.");return this._config.offset=t,this},c.prototype.sort=c.prototype.orderby=function(t,e){if(this._soql)throw Error("Cannot set sort for the query which has already built SOQL.");return o.isString(t)&&o.isString(e)&&(t=[[t,e]]),this._config.sort=t,this},c.prototype.include=function(t,e,r,n){if(this._soql)throw Error("Cannot include child relationship into the query which has already built SOQL.");{if(!o.isObject(t)){var i={table:t,conditions:e,fields:r,limit:n&&n.limit,offset:n&&(n.offset||n.skip),sort:n&&n.sort};o.isArray(this._config.includes)||(this._config.includes=[]),this._config.includes.push(i);var s=new h(this._conn,this,i);return this._children=this._children||[],this._children.push(s),s}var a=t;for(var u in a){var c=a[u];this.include(u,c.conditions,c.fields,c)}}},c.prototype.maxFetch=function(t){return this._options.maxFetch=t,this},c.prototype.autoFetch=function(t){return this._options.autoFetch=t,this},c.prototype.scanAll=function(t){return this._options.scanAll=t,this};var l=c.ResponseTargets={};["QueryResult","Records","SingleRecord","Count"].forEach(function(t){l[t]=t}),c.prototype.setResponseTarget=function(t){return t in l&&(this._options.responseTarget=t),this},c.prototype.run=c.prototype.exec=c.prototype.execute=function(t,e){var r=this,n=this._conn._logger,i=this._deferred;if(this._executed)return i.reject(new Error("re-executing already executed query")),this;if(this._finished)return i.reject(new Error("executing already closed query")),this;"function"==typeof t&&(e=t,t={}),t=t||{},t={headers:t.headers||r._options.headers,responseTarget:t.responseTarget||r._options.responseTarget,autoFetch:t.autoFetch||r._options.autoFetch,maxFetch:t.maxFetch||r._options.maxFetch,scanAll:t.scanAll||r._options.scanAll};var s=function(t,r){if(o.isFunction(e))try{r=e(t,r),t=null}catch(n){t=n}t?i.reject(t):i.resolve(r)};return this.once("response",function(t){s(null,t)}),this.once("error",function(t){s(t)}),this.once("fetch",function(){if(t.responseTarget===l.Records&&(r._chaining||e)){n.debug("--- collecting all fetched records ---");var i=[],o=function(t){i.push(t)};r.on("record",o),r.once("end",function(){r.removeListener("record",o),r.emit("response",i,r)})}}),this._executed=!0,n.debug(">>> Query start >>>"),this._execute(t).then(function(){n.debug("*** Query finished ***")}).fail(function(t){n.debug("--- Query error ---"),r.emit("error",t)}),this},c.prototype._execute=function(t){var e=this,r=this._conn._logger,n=t.responseTarget,i=t.autoFetch,o=t.maxFetch,a=t.scanAll;return s.resolve(e._locator?e._conn._baseUrl()+"/query/"+e._locator:e.toSOQL().then(function(t){return e.totalFetched=0,r.debug("SOQL = "+t),e._conn._baseUrl()+"/"+(a?"queryAll":"query")+"?q="+encodeURIComponent(t)})).then(function(r){return e._conn.request({method:"GET",url:r,headers:t.headers})}).then(function(r){e.emit("fetch"),e.totalSize=r.totalSize;var s;switch(n){case l.SingleRecord:s=r.records&&r.records.length>0?r.records[0]:null;break;case l.Records:s=r.records;break;case l.Count:s=r.totalSize;break;default:s=r}n!==l.Records&&e.emit("response",s,e);for(var a=r.records&&r.records.length||0,u=0;u<a;u++){if(e.totalFetched>=o){e._finished=!0;break}var c=r.records[u];e.push(c),e.emit("record",c,e.totalFetched++,e)}return r.nextRecordsUrl&&(e._locator=r.nextRecordsUrl.split("/").pop()),e._finished=e._finished||r.done||!i,e._finished?e.push(null):e._execute(t),s})},c.prototype._read=function(t){this._finished||this._executed||this.execute({autoFetch:!0})},c.prototype.on=function(t,e){if("record"===t){var r=this;this.on("readable",function(){for(;null!==r.read(););})}return c.super_.prototype.on.call(this,t,e)},c.prototype.addListener=c.prototype.on,c.prototype._expandFields=function(){function t(t){var r=n._parent._config.table;return i.debug('finding table for relation "'+t+'" in "'+r+'"...'),e(r).then(function(e){var r=t.toUpperCase(),n=o.find(e.childRelationships,function(t){return(t.relationshipName||"").toUpperCase()===r});return n?n.childSObject:s.reject(new Error("No child relationship found: "+t))})}function e(t){i.debug("describe cache: "+t);var e=s.defer();return a.describe$(t,function(t,r){i.debug("... done."),t?e.reject(t):e.resolve(r)}),e.promise}function r(t,n){i.debug('expanding field "'+n+'" in "'+t+'"...');var a=n.split(".");return"*"===a[a.length-1]?e(t).then(function(e){if(i.debug("table "+t+"has been described"),a.length>1){var n=a.shift(),s=o.find(e.fields,function(t){return t.relationshipName&&t.relationshipName.toUpperCase()===n.toUpperCase()});if(s){var u=1===s.referenceTo.length?s.referenceTo[0]:"Name";return r(u,a.join(".")).then(function(t){return o.map(t,function(t){return n+"."+t})})}return[]}return o.map(e.fields,function(t){return t.name})}):s.resolve([n])}if(this._soql)return s.reject(new Error("Cannot expand fields for the query which has already built SOQL."));var n=this,i=n._conn._logger,a=this._conn,u=this._config.table,c=this._config.fields||[];return i.debug("_expandFields: table = "+u+", fields = "+c.join(", ")),s.all([s.resolve(n._parent?t(u):u).then(function(t){return s.all(o.map(c,function(e){return r(t,e)})).then(function(t){n._config.fields=o.flatten(t)})}),s.all(o.map(n._children||[],function(t){return t._expandFields()}))])},c.prototype.explain=function(t){var e=this,r=this._conn._logger;return e.toSOQL().then(function(t){r.debug("SOQL = "+t);var n="/query/?explain="+encodeURIComponent(t);return e._conn.request(n)}).thenCall(t)},c.prototype.toSOQL=function(t){var e=this;return s.resolve(e._soql||e._expandFields().then(function(){return a.createSOQL(e._config)})).thenCall(t)},c.prototype.stream=u.Serializable.prototype.stream,c.prototype.map=u.prototype.map,c.prototype.filter=u.prototype.map;var f=200;c.prototype["delete"]=c.prototype.del=c.prototype.destroy=function(t,e,r){if("function"==typeof t?(r=t,e={},t=null):"object"==typeof t&&null!==t&&(r=e,e=t,t=null),e=e||{},t=t||this._config&&this._config.table,!t)throw new Error("SOQL based query needs SObject type information to bulk delete.");var n=e.allowBulk===!1?-1:"number"==typeof e.bulkThreshold?e.bulkThreshold:this._conn._ensureVersion(42)?f:this._conn.maxRequest/2,i=this;return new s(function(e,r){var o=[],s=null,a=function(a){if(!a.Id)return void i.emit("error",new Error("Queried record does not include Salesforce record ID."));var u={Id:a.Id};s?s.write(u):(o.push(u),(n<0||o.length>n)&&(s=i._conn.sobject(t).deleteBulk().on("response",e).on("error",r),o.forEach(function(t){s.write(t)}),o=[]))},u=function(){if(s)s.end();else{var n=o.map(function(t){return t.Id});i._conn.sobject(t).destroy(n,{allowRecursive:!0}).then(e,r)}};i.on("data",a).on("end",u).on("error",r)}).thenCall(r)},c.prototype.update=function(t,e,r,n){if("function"==typeof e?(n=e,r={},e=null):"object"==typeof e&&null!==e&&(n=r,r=e,e=null),r=r||{},e=e||this._config&&this._config.table,!e)throw new Error("SOQL based query needs SObject type information to bulk update.");var i=o.isFunction(t)?u.map(t):u.recordMapStream(t),a=r.allowBulk===!1?-1:"number"==typeof r.bulkThreshold?r.bulkThreshold:this._conn._ensureVersion(42)?f:this._conn.maxRequest/2,c=this;return new s(function(t,r){var n=[],o=null,s=function(i){o?o.write(i):(n.push(i),(a<0||n.length>a)&&(o=c._conn.sobject(e).updateBulk().on("response",t).on("error",r),n.forEach(function(t){o.write(t)}),n=[]))},u=function(){o?o.end():c._conn.sobject(e).update(n,{allowRecursive:!0}).then(t,r)};c.on("error",r).pipe(i).on("data",s).on("end",u).on("error",r)}).thenCall(n)},c.prototype.then=function(t,e){return this._chaining=!0,this._finished||this._executed||this.execute(),this._deferred.promise.then.apply(this._deferred.promise,arguments)},c.prototype.thenCall=function(t){return o.isFunction(t)&&this.then(function(e){r.nextTick(function(){t(null,e)})},function(e){r.nextTick(function(){t(e)})}),this};var h=function(t,e,r){h.super_.call(this,t,r),this._parent=e};n(h,c),h.prototype.include=function(){throw new Error("Not allowed to include another subquery in subquery.")},h.prototype.end=function(){return this._parent},h.prototype.run=h.prototype.exec=h.prototype.execute=function(){return this._parent.execute.apply(this._parent,arguments)}}).call(this,t("_process"))},{"./date":12,"./promise":17,"./record-stream":20,"./soql-builder":25,_process:46,events:37,inherits:39,"lodash/core":43,"readable-stream":62}],19:[function(t,e,r){"use strict";var n=e.exports=function(t,e){this._conn=t,this._path=e};n.prototype.describe=function(t){var e=this._path+"/describe";return this._conn.request(e).thenCall(t)},n.prototype.defaultValues=function(t,e){"function"==typeof t&&(e=t,t=null);var r=this._path+"/defaultValues";return t&&(r+="/"+t),this._conn.request(r).thenCall(e)},n.prototype.execute=function(t,e,r){var n={contextId:t,record:e};return this._conn.requestPost(this._path,n).thenCall(r)}},{}],20:[function(t,e,r){"use strict";function n(t,e){return Object.keys(t).reduce(function(t,r){var i=t[r],o={};if("attributes"===r)t=c.extend({},t),delete t[r];else if(e.nullValue&&null===i)o[r]=e.nullValue,t=c.extend({},t,o);else if(null!==i&&"object"==typeof i){var s=n(i,e);t=Object.keys(s).reduce(function(t,e){return t[r+"."+e]=s[e],t},c.extend({},t))}return t},t)}function i(t,e){var r=new a;return r.on("pipe",function(n){n.unpipe(r),n.pipe(t).pipe(e)}),r.pipe=function(t,r){return e.pipe(t,r)},r}var o=(t("events"),t("readable-stream")),s=(o.Duplex,o.Transform),a=o.PassThrough,u=t("inherits"),c=t("lodash/core"),l=t("./csv"),f=e.exports=function(){f.super_.call(this,{objectMode:!0})};u(f,s),f.prototype._transform=function(t,e,r){this.emit("record",t),this.push(t),r()},f.prototype.map=function(t){return this.pipe(f.map(t))},f.prototype.filter=function(t){return this.pipe(f.filter(t))};var h=f.Serializable=function(){h.super_.call(this),this._dataStream=null};u(h,f),h.prototype.stream=function(t,e){t=t||"csv";var r=y[t];if(!r)throw new Error("Converting ["+t+"] data stream is not supported.");return this._dataStream||(this._dataStream=new a,this.pipe(r.serialize(e)).pipe(this._dataStream)),this._dataStream};var p=f.Parsable=function(){p.super_.call(this),this._dataStream=null};u(p,f),p.prototype.stream=function(t,e){t=t||"csv";var r=y[t],n=this;if(!r)throw new Error("Converting ["+t+"] data stream is not supported.");return this._dataStream||(this._dataStream=new a,this._parserStream=r.parse(e).on("error",function(t){n.emit("error",t)}),this._parserStream.pipe(this).pipe(new a({objectMode:!0,highWaterMark:5e5}))),this._dataStream},p.prototype.on=function(t,e){return"readable"!==t&&"record"!==t||this._dataStream.pipe(this._parserStream),p.super_.prototype.on.call(this,t,e)},p.prototype.addListener=p.prototype.on,f.map=function(t){var e=new f.Serializable;return e._transform=function(e,r,n){var i=t(e)||e;this.push(i),n()},e},f.recordMapStream=function(t,e){function r(t,e){if(c.isString(t)){var r=/^\$\{(\w+)\}$/.exec(t);return r?e[r[1]]:t.replace(/\$\{(\w+)\}/g,function(t,r){var n=e[r];return c.isNull(n)||c.isUndefined(n)?"":String(n)})}return t}return f.map(function(n){var i={Id:n.Id};for(var o in t)i[o]=e?t[o]:r(t[o],n);return i})},f.filter=function(t){var e=new f.Serializable;return e._transform=function(e,r,n){t(e)&&this.push(e),n()},e};var d={serialize:function(t){return t=t||{},i(f.map(function(e){return n(e,t)}),l.serializeCSVStream(t))},parse:function(t){return l.parseCSVStream(t)}},y=f.DataStreamConverters={csv:d}},{"./csv":11,events:37,inherits:39,"lodash/core":43,"readable-stream":62}],21:[function(t,e,r){"use strict";var n=t("lodash/core"),i=e.exports=function(t,e,r){this._conn=t,this.type=e,this.id=r};i.prototype.retrieve=function(t,e){return"function"==typeof t&&(e=t,t={}),this._conn.retrieve(this.type,this.id,t,e)},i.prototype.update=function(t,e,r){return"function"==typeof e&&(r=e,e={}),t=n.clone(t),t.Id=this.id,this._conn.update(this.type,t,e,r)},i.prototype["delete"]=i.prototype.del=i.prototype.destroy=function(t,e){return"function"==typeof t&&(e=t,t={}),this._conn.destroy(this.type,this.id,t,e)},i.prototype.blob=function(t){var e=[this._conn._baseUrl(),"sobjects",this.type,this.id,t].join("/");return this._conn.request(e).stream()}},{"lodash/core":43}],22:[function(t,e,r){"use strict";var n=t("./_required");e.exports=function(t){"./jsforce"!==t&&"jsforce"!==t||(t="./core");var e=n[t];if("undefined"==typeof e)throw new Error("Cannot find module '"+t+"'");return e}},{"./_required":3}],23:[function(t,e,r){"use strict";function n(t,e){if(a.isArray(t))return t.map(function(t){return n(t,e&&e[0])});if(a.isObject(t)){if(t.$&&"true"===t.$["xsi:nil"])return null;if(a.isArray(e))return[n(t,e[0])];var r={};for(var i in t)r[i]=n(t[i],e&&e[i]);return r}if(a.isArray(e))return[n(t,e[0])];if(a.isObject(e))return{};switch(e){case"string":return String(t);case"number":return Number(t);case"boolean":return"true"===t;default:return t}}function i(t,e){var r=e.shift();if(r){for(var n in t)if(r.test(n))return i(t[n],e);return null}return t}function o(t,e){if(a.isObject(t)&&(e=t,t=null),a.isArray(e))return a.map(e,function(e){return o(t,e)}).join("");var r=[],n=[];if(a.isObject(e)){for(var i in e){var s=e[i];"@"===i[0]?(i=i.substring(1),r.push(i+'="'+s+'"')):n.push(o(i,s))}e=n.join("")}else e=String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;");var u=t?"<"+t+(r.length>0?" "+r.join(" "):"")+">":"",c=t?"</"+t+">":"";return u+e+c}var s=t("inherits"),a=t("lodash/core"),u=(t("xml2js"),t("./http-api")),c=e.exports=function(t,e){c.super_.apply(this,arguments),this._endpointUrl=e.endpointUrl,this._xmlns=e.xmlns||"urn:partner.soap.sforce.com"};s(c,u),c.prototype.invoke=function(t,e,r,i){"function"==typeof r&&(i=r,r=null);var o={};return o[t]=e,this.request({method:"POST",url:this._endpointUrl,headers:{"Content-Type":"text/xml",SOAPAction:'""'},message:o}).then(function(t){return r?n(t,r):t}).thenCall(i)},c.prototype.beforeSend=function(t){t.body=this._createEnvelope(t.message)},c.prototype.isSessionExpired=function(t){return 500===t.statusCode&&/<faultcode>[a-zA-Z]+:INVALID_SESSION_ID<\/faultcode>/.test(t.body)},c.prototype.parseError=function(t){var e=i(t,[/:Envelope$/,/:Body$/,/:Fault$/]);return{errorCode:e.faultcode,message:e.faultstring}},c.prototype.getResponseBody=function(t){var e=c.super_.prototype.getResponseBody.call(this,t);return i(e,[/:Envelope$/,/:Body$/,/.+/])},c.prototype._createEnvelope=function(t){var e={},r=this._conn;return r.accessToken&&(e.SessionHeader={sessionId:this._conn.accessToken}),r.callOptions&&(e.CallOptions=r.callOptions),['<?xml version="1.0" encoding="UTF-8"?>','<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"',' xmlns:xsd="http://www.w3.org/2001/XMLSchema"',' xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">','<soapenv:Header xmlns="'+this._xmlns+'">',o(e),"</soapenv:Header>",'<soapenv:Body xmlns="'+this._xmlns+'">',o(t),"</soapenv:Body>","</soapenv:Envelope>"].join("")}},{"./http-api":13,inherits:39,"lodash/core":43,xml2js:78}],24:[function(t,e,r){"use strict";var n=t("lodash/core"),i=t("./record"),o=t("./query"),s=(t("./cache"),t("./quick-action")),a=e.exports=function(t,e){this._conn=t,this.type=e;var r={key:"describe."+this.type};this.describe$=t.cache.makeCacheable(this.describe,this,r),this.describe=t.cache.makeResponseCacheable(this.describe,this,r),r={key:"layouts."+this.type},this.layouts$=t.cache.makeCacheable(this.layouts,this,r),this.layouts=t.cache.makeResponseCacheable(this.layouts,this,r),r={key:"compactLayouts."+this.type},this.compactLayouts$=t.cache.makeCacheable(this.compactLayouts,this,r),this.compactLayouts=t.cache.makeResponseCacheable(this.compactLayouts,this,r),r={key:"approvalLayouts."+this.type},this.approvalLayouts$=t.cache.makeCacheable(this.approvalLayouts,this,r),this.approvalLayouts=t.cache.makeResponseCacheable(this.approvalLayouts,this,r)};a.prototype.insert=a.prototype.create=function(t,e,r){return"function"==typeof e&&(r=e,e={}),this._conn.create(this.type,t,e,r)},a.prototype.retrieve=function(t,e,r){return"function"==typeof e&&(r=e,e={}),this._conn.retrieve(this.type,t,e,r)},a.prototype.update=function(t,e,r){return"function"==typeof e&&(r=e,e={}),this._conn.update(this.type,t,e,r)},a.prototype.upsert=function(t,e,r,n){return"function"==typeof r&&(n=r,r={}),this._conn.upsert(this.type,t,e,r,n)},a.prototype["delete"]=a.prototype.del=a.prototype.destroy=function(t,e,r){return"function"==typeof e&&(r=e,e={}),this._conn.destroy(this.type,t,e,r)},a.prototype.describe=function(t){return this._conn.describe(this.type,t)},a.prototype.record=function(t){return new i(this._conn,this.type,t)},a.prototype.find=function(t,e,r,n){"function"==typeof t?(n=t,t={},e=null,r=null):"function"==typeof e?(n=e,e=null,r=null):"function"==typeof r&&(n=r,r=null),r=r||{};var i={fields:e,includes:r.includes,table:this.type,conditions:t,limit:r.limit,sort:r.sort,offset:r.offset||r.skip},s=new o(this._conn,i,r);return s.setResponseTarget(o.ResponseTargets.Records),n&&s.run(n),s},a.prototype.findOne=function(t,e,r,i){"function"==typeof t?(i=t,t={},e=null,r=null):"function"==typeof e?(i=e,e=null,r=null):"function"==typeof r&&(i=r,r=null),r=n.extend(r||{},{limit:1});var s=this.find(t,e,r);return s.setResponseTarget(o.ResponseTargets.SingleRecord),i&&s.run(i),s},a.prototype.select=function(t,e){return this.find(null,t,null,e)},a.prototype.count=function(t,e){"function"==typeof t&&(e=t,t={});var r=this.find(t,{"count()":!0});return r.setResponseTarget("Count"),e&&r.run(e),r},a.prototype.bulkload=function(t,e,r,n){return this._conn.bulk.load(this.type,t,e,r,n)},a.prototype.insertBulk=a.prototype.createBulk=function(t,e){return this.bulkload("insert",t,e)},a.prototype.updateBulk=function(t,e){return this.bulkload("update",t,e)},a.prototype.upsertBulk=function(t,e,r){return this.bulkload("upsert",{extIdField:e},t,r)},a.prototype.deleteBulk=a.prototype.destroyBulk=function(t,e){return this.bulkload("delete",t,e)},a.prototype.deleteHardBulk=a.prototype.destroyHardBulk=function(t,e){return this.bulkload("hardDelete",t,e)},a.prototype.recent=function(t){return this._conn.recent(this.type,t)},a.prototype.updated=function(t,e,r){return this._conn.updated(this.type,t,e,r)},a.prototype.deleted=function(t,e,r){return this._conn.deleted(this.type,t,e,r)},a.prototype.layouts=function(t,e){"function"==typeof t&&(e=t,t=null);var r="/sobjects/"+this.type+"/describe/"+(t?"namedLayouts/"+t:"layouts");return this._conn.request(r,e)},a.prototype.compactLayouts=function(t){var e="/sobjects/"+this.type+"/describe/compactLayouts";return this._conn.request(e,t)},a.prototype.approvalLayouts=function(t){var e="/sobjects/"+this.type+"/describe/approvalLayouts";return this._conn.request(e,t)},a.prototype.listviews=function(t){var e=this._conn._baseUrl()+"/sobjects/"+this.type+"/listviews";return this._conn.request(e,t)},a.prototype.listview=function(t){return new u(this._conn,this.type,t)},a.prototype.quickActions=function(t){return this._conn.request("/sobjects/"+this.type+"/quickActions").thenCall(t)},a.prototype.quickAction=function(t){return new s(this._conn,"/sobjects/"+this.type+"/quickActions/"+t)};var u=function(t,e,r){this._conn=t,this.type=e,this.id=r};u.prototype.results=function(t){var e=this._conn._baseUrl()+"/sobjects/"+this.type+"/listviews/"+this.id+"/results";return this._conn.request(e,t)},u.prototype.describe=function(t,e){"function"==typeof t&&(e=t,t={}),t=t||{};var r=this._conn._baseUrl()+"/sobjects/"+this.type+"/listviews/"+this.id+"/describe";return this._conn.request({method:"GET",url:r,headers:t.headers},e)},u.prototype.explain=function(t){var e="/query/?explain="+this.id;return this._conn.request(e,t)}},{"./cache":8,"./query":18,"./quick-action":19,"./record":21,"lodash/core":43}],25:[function(t,e,r){"use strict";function n(t){var e=["SELECT ",i(t.fields,t.includes)," FROM ",t.table].join(""),r=o(t.conditions);r&&(e+=" WHERE "+r);var n=l(t.sort);return n&&(e+=" ORDER BY "+n),t.limit&&(e+=" LIMIT "+t.limit),t.offset&&(e+=" OFFSET "+t.offset),e}function i(t,e){return e=f.map(f.values(e||{}),function(t){return"("+n(t)+")"}),(t||["Id"]).concat(e).join(", ")}function o(t,e,r){if(f.isString(t))return t;t=t||[],e=e||"AND",r=r||0,t=c(t)?t.map(function(t){var e=[];for(var r in t)e.push({key:r,value:t[r]});return e.length>1?e:e[0]}):f.keys(t).map(function(e){return{key:e,value:t[e]}}),t=t.map(function(n){var i,a=r+1;switch(n.key){case"$or":case"$and":case"$not":return"NOT"!==e&&1===t.length&&(a=r),i="$or"===n.key?"OR":"$and"===n.key?"AND":"NOT",o(n.value,i,a);default:return s(n.key,n.value)}}).filter(function(t){return t});var n;return"NOT"===e?(n=r>0,(n?"(":"")+"NOT "+t[0]+(n?")":"")):(n=r>0&&t.length>1,(n?"(":"")+t.join(" "+e+" ")+(n?")":""))}function s(t,e){var r="$eq";if(f.isArray(e))r="$in";else if(f.isObject(e)){for(var n in e)if("$"===n[0]){r=n,e=e[n];break}}var i=p[r];if(!i||f.isUndefined(e))return null;var o=a(e);if(f.isUndefined(o))return null;switch(i){case"NOT LIKE":return"("+["NOT",t,"LIKE",o].join(" ")+")";case"EXISTS":return[t,e?"!=":"=","null"].join(" ");
default:return[t,i,o].join(" ")}}function a(t){return c(t)?t.length>0?"("+t.map(a).join(", ")+")":void 0:t instanceof h?t.toString():f.isString(t)?"'"+u(t)+"'":f.isNumber(t)?t.toString():f.isNull(t)?"null":t}function u(t){return String(t||"").replace(/'/g,"\\'")}function c(t){return f.isObject(t)&&f.isFunction(t.pop)}function l(t){if(t=t||[],f.isString(t)){if(/,|\s+(asc|desc)\s*$/.test(t))return t;t=t.split(/\s+/).map(function(t){var e="ASC",r=t[0];return"-"===r?(e="DESC",t=t.substring(1)):"+"===r&&(t=t.substring(1)),[t,e]})}else c(t)||(t=f.keys(t).map(function(e){var r=t[e];return[e,r]}));return t.map(function(t){var e=t[0],r=t[1];switch(String(r)){case"DESC":case"desc":case"descending":case"-":case"-1":r="DESC";break;default:r="ASC"}return e+" "+r}).join(", ")}var f=t("lodash/core"),h=t("./date"),p={"=":"=",$eq:"=","!=":"!=",$ne:"!=",">":">",$gt:">","<":"<",$lt:"<",">=":">=",$gte:">=","<=":"<=",$lte:"<=",$like:"LIKE",$nlike:"NOT LIKE",$in:"IN",$nin:"NOT IN",$includes:"INCLUDES",$excludes:"EXCLUDES",$exists:"EXISTS"};r.createSOQL=n},{"./date":12,"lodash/core":43}],26:[function(t,e,r){(function(r){"use strict";function n(t,e){var r=t.then;return t.then=function(){e();var i=r.apply(t,arguments);return n(i,e)},t.stream=e,t}function i(t){var e=/(\w+)\.(visual\.force|salesforce)\.com$/.exec(t);return e&&(t=e[1]+".salesforce.com"),t}var o=t("inherits"),s=t("./promise"),a=t("request"),u=t("./browser/canvas"),c=t("./browser/jsonp");if(a.defaults){var l={followAllRedirects:!0};r.env.HTTP_PROXY&&(l.proxy=r.env.HTTP_PROXY),parseInt(r.env.HTTP_TIMEOUT)&&(l.timeout=parseInt(r.env.HTTP_TIMEOUT)),a=a.defaults(l)}var f;if("undefined"==typeof window)f=r.env.LOCATION_BASE_URL||"";else{var h=i(window.location.host);f=h?"https://"+h:""}var p=e.exports=function(){};p.prototype.httpRequest=function(t,e){var r,i=s.defer(),o=this._getHttpRequestModule(),a=function(){return r||(r=o(t,function(t,e){t?i.reject(t):i.resolve(e)})),r};return n(i.promise,a).thenCall(e)},p.prototype._getHttpRequestModule=function(){return a};var d=p.JsonpTransport=function(t){this._jsonpParam=t};o(d,p),d.prototype._getHttpRequestModule=function(){return c.createRequest(this._jsonpParam)},d.supported=c.supported;var y=p.CanvasTransport=function(t){this._signedRequest=t};o(y,p),y.prototype._getHttpRequestModule=function(){return u.createRequest(this._signedRequest)},y.supported=u.supported;var m=p.ProxyTransport=function(t){this._proxyUrl=t};o(m,p),m.prototype.httpRequest=function(t,e){var r=t.url;0===r.indexOf("/")&&(r=f+r);var n={method:t.method,url:this._proxyUrl+"?"+Date.now()+"."+(""+Math.random()).substring(2),headers:{"salesforceproxy-endpoint":r}};if((t.body||""===t.body)&&(n.body=t.body),t.headers)for(var i in t.headers)n.headers[i]=t.headers[i];return m.super_.prototype.httpRequest.call(this,n,e)};var g=p.HttpProxyTransport=function(t){this._httpProxy=t};o(g,p),g.prototype.httpRequest=function(t,e){var r=t.url;0===r.indexOf("/")&&(r=f+r);var n={method:t.method,url:t.url,proxy:this._httpProxy,headers:{}};if((t.body||""===t.body)&&(n.body=t.body),t.headers)for(var i in t.headers)n.headers[i]=t.headers[i];return g.super_.prototype.httpRequest.call(this,n,e)}}).call(this,t("_process"))},{"./browser/canvas":4,"./browser/jsonp":6,"./promise":17,_process:46,inherits:39,request:7}],27:[function(t,e,r){(function(t){"use strict";function r(t){a.length||(s(),u=!0),a[a.length]=t}function n(){for(;c<a.length;){var t=c;if(c+=1,a[t].call(),c>l){for(var e=0,r=a.length-c;e<r;e++)a[e]=a[e+c];a.length-=c,c=0}}a.length=0,c=0,u=!1}function i(t){var e=1,r=new h(t),n=document.createTextNode("");return r.observe(n,{characterData:!0}),function(){e=-e,n.data=e}}function o(t){return function(){function e(){clearTimeout(r),clearInterval(n),t()}var r=setTimeout(e,0),n=setInterval(e,50)}}e.exports=r;var s,a=[],u=!1,c=0,l=1024,f="undefined"!=typeof t?t:self,h=f.MutationObserver||f.WebKitMutationObserver;s="function"==typeof h?i(n):o(n),r.requestFlush=s,r.makeRequestCallFromTimer=o}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],28:[function(t,e,r){"use strict";function n(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function i(t){var e=n(t),r=e[0],i=e[1];return 3*(r+i)/4-i}function o(t,e,r){return 3*(e+r)/4-r}function s(t){for(var e,r=n(t),i=r[0],s=r[1],a=new h(o(t,i,s)),u=0,c=s>0?i-4:i,l=0;l<c;l+=4)e=f[t.charCodeAt(l)]<<18|f[t.charCodeAt(l+1)]<<12|f[t.charCodeAt(l+2)]<<6|f[t.charCodeAt(l+3)],a[u++]=e>>16&255,a[u++]=e>>8&255,a[u++]=255&e;return 2===s&&(e=f[t.charCodeAt(l)]<<2|f[t.charCodeAt(l+1)]>>4,a[u++]=255&e),1===s&&(e=f[t.charCodeAt(l)]<<10|f[t.charCodeAt(l+1)]<<4|f[t.charCodeAt(l+2)]>>2,a[u++]=e>>8&255,a[u++]=255&e),a}function a(t){return l[t>>18&63]+l[t>>12&63]+l[t>>6&63]+l[63&t]}function u(t,e,r){for(var n,i=[],o=e;o<r;o+=3)n=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(255&t[o+2]),i.push(a(n));return i.join("")}function c(t){for(var e,r=t.length,n=r%3,i=[],o=16383,s=0,a=r-n;s<a;s+=o)i.push(u(t,s,s+o>a?a:s+o));return 1===n?(e=t[r-1],i.push(l[e>>2]+l[e<<4&63]+"==")):2===n&&(e=(t[r-2]<<8)+t[r-1],i.push(l[e>>10]+l[e>>4&63]+l[e<<2&63]+"=")),i.join("")}r.byteLength=i,r.toByteArray=s,r.fromByteArray=c;for(var l=[],f=[],h="undefined"!=typeof Uint8Array?Uint8Array:Array,p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d=0,y=p.length;d<y;++d)l[d]=p[d],f[p.charCodeAt(d)]=d;f["-".charCodeAt(0)]=62,f["_".charCodeAt(0)]=63},{}],29:[function(t,e,r){},{}],30:[function(t,e,r){"use strict";function n(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()}catch(e){return!1}}function i(t){if(t>$)throw new RangeError("Invalid typed array length");var e=new Uint8Array(t);return e.__proto__=o.prototype,e}function o(t,e,r){if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return c(t)}return s(t,e,r)}function s(t,e,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return W(t)||t&&W(t.buffer)?h(t,e,r):"string"==typeof t?l(t,e):p(t)}function a(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('"size" argument must not be negative')}function u(t,e,r){return a(t),t<=0?i(t):void 0!==e?"string"==typeof r?i(t).fill(e,r):i(t).fill(e):i(t)}function c(t){return a(t),i(t<0?0:0|d(t))}function l(t,e){if("string"==typeof e&&""!==e||(e="utf8"),!o.isEncoding(e))throw new TypeError("Unknown encoding: "+e);var r=0|m(t,e),n=i(r),s=n.write(t,e);return s!==r&&(n=n.slice(0,s)),n}function f(t){for(var e=t.length<0?0:0|d(t.length),r=i(e),n=0;n<e;n+=1)r[n]=255&t[n];return r}function h(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');var n;return n=void 0===e&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,e):new Uint8Array(t,e,r),n.__proto__=o.prototype,n}function p(t){if(o.isBuffer(t)){var e=0|d(t.length),r=i(e);return 0===r.length?r:(t.copy(r,0,0,e),r)}if(t){if(ArrayBuffer.isView(t)||"length"in t)return"number"!=typeof t.length||G(t.length)?i(0):f(t);if("Buffer"===t.type&&Array.isArray(t.data))return f(t.data)}throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object.")}function d(t){if(t>=$)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+$.toString(16)+" bytes");return 0|t}function y(t){return+t!=t&&(t=0),o.alloc(+t)}function m(t,e){if(o.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||W(t))return t.byteLength;"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return F(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return V(t).length;default:if(n)return F(t).length;e=(""+e).toLowerCase(),n=!0}}function g(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if(r>>>=0,e>>>=0,r<=e)return"";for(t||(t="utf8");;)switch(t){case"hex":return L(this,e,r);case"utf8":case"utf-8":return D(this,e,r);case"ascii":return C(this,e,r);case"latin1":case"binary":return N(this,e,r);case"base64":return I(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function v(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function _(t,e,r,n,i){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,G(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof e&&(e=o.from(e,n)),o.isBuffer(e))return 0===e.length?-1:b(t,e,r,n,i);if("number"==typeof e)return e=255&e,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):b(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function b(t,e,r,n,i){function o(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}var s=1,a=t.length,u=e.length;if(void 0!==n&&(n=String(n).toLowerCase(),"ucs2"===n||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;s=2,a/=2,u/=2,r/=2}var c;if(i){var l=-1;for(c=r;c<a;c++)if(o(t,c)===o(e,l===-1?0:c-l)){if(l===-1&&(l=c),c-l+1===u)return l*s}else l!==-1&&(c-=c-l),l=-1}else for(r+u>a&&(r=a-u),c=r;c>=0;c--){for(var f=!0,h=0;h<u;h++)if(o(t,c+h)!==o(e,h)){f=!1;break}if(f)return c}return-1}function w(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;var o=e.length;n>o/2&&(n=o/2);for(var s=0;s<n;++s){var a=parseInt(e.substr(2*s,2),16);if(G(a))return s;t[r+s]=a}return s}function E(t,e,r,n){return H(F(e,t.length-r),t,r,n)}function T(t,e,r,n){return H(X(e),t,r,n)}function S(t,e,r,n){return T(t,e,r,n)}function x(t,e,r,n){return H(V(e),t,r,n)}function O(t,e,r,n){return H(z(e,t.length-r),t,r,n)}function I(t,e,r){return 0===e&&r===t.length?Y.fromByteArray(t):Y.fromByteArray(t.slice(e,r))}function D(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var o=t[i],s=null,a=o>239?4:o>223?3:o>191?2:1;if(i+a<=r){var u,c,l,f;switch(a){case 1:o<128&&(s=o);break;case 2:u=t[i+1],128===(192&u)&&(f=(31&o)<<6|63&u,f>127&&(s=f));break;case 3:u=t[i+1],c=t[i+2],128===(192&u)&&128===(192&c)&&(f=(15&o)<<12|(63&u)<<6|63&c,f>2047&&(f<55296||f>57343)&&(s=f));break;case 4:u=t[i+1],c=t[i+2],l=t[i+3],128===(192&u)&&128===(192&c)&&128===(192&l)&&(f=(15&o)<<18|(63&u)<<12|(63&c)<<6|63&l,f>65535&&f<1114112&&(s=f))}}null===s?(s=65533,a=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|1023&s),n.push(s),i+=a}return A(n)}function A(t){var e=t.length;if(e<=J)return String.fromCharCode.apply(String,t);for(var r="",n=0;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=J));return r}function C(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function N(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function L(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=e;o<r;++o)i+=B(t[o]);return i}function j(t,e,r){for(var n=t.slice(e,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function k(t,e,r){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function R(t,e,r,n,i,s){if(!o.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<s)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function M(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function U(t,e,r,n,i){return e=+e,r>>>=0,i||M(t,e,r,4,3.4028234663852886e38,-3.4028234663852886e38),Q.write(t,e,r,n,23,4),r+4}function P(t,e,r,n,i){return e=+e,r>>>=0,i||M(t,e,r,8,1.7976931348623157e308,-1.7976931348623157e308),Q.write(t,e,r,n,52,8),r+8}function q(t){if(t=t.split("=")[0],t=t.trim().replace(K,""),t.length<2)return"";for(;t.length%4!==0;)t+="=";return t}function B(t){return t<16?"0"+t.toString(16):t.toString(16)}function F(t,e){e=e||1/0;for(var r,n=t.length,i=null,o=[],s=0;s<n;++s){if(r=t.charCodeAt(s),r>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function X(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}function z(t,e){for(var r,n,i,o=[],s=0;s<t.length&&!((e-=2)<0);++s)r=t.charCodeAt(s),n=r>>8,i=r%256,o.push(i),o.push(n);return o}function V(t){return Y.toByteArray(q(t))}function H(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function W(t){return t instanceof ArrayBuffer||null!=t&&null!=t.constructor&&"ArrayBuffer"===t.constructor.name&&"number"==typeof t.byteLength}function G(t){return t!==t}var Y=t("base64-js"),Q=t("ieee754");r.Buffer=o,r.SlowBuffer=y,r.INSPECT_MAX_BYTES=50;var $=2147483647;r.kMaxLength=$,o.TYPED_ARRAY_SUPPORT=n(),o.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(o.prototype,"parent",{get:function(){if(this instanceof o)return this.buffer}}),Object.defineProperty(o.prototype,"offset",{get:function(){if(this instanceof o)return this.byteOffset}}),"undefined"!=typeof Symbol&&Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),o.poolSize=8192,o.from=function(t,e,r){return s(t,e,r)},o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,o.alloc=function(t,e,r){return u(t,e,r)},o.allocUnsafe=function(t){return c(t)},o.allocUnsafeSlow=function(t){return c(t)},o.isBuffer=function(t){return null!=t&&t._isBuffer===!0},o.compare=function(t,e){if(!o.isBuffer(t)||!o.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,i=0,s=Math.min(r,n);i<s;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},o.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return o.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=o.allocUnsafe(e),i=0;for(r=0;r<t.length;++r){var s=t[r];if(ArrayBuffer.isView(s)&&(s=o.from(s)),!o.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(n,i),i+=s.length}return n},o.byteLength=m,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)v(this,e,e+1);return this},o.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)v(this,e,e+3),v(this,e+1,e+2);return this},o.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)v(this,e,e+7),v(this,e+1,e+6),v(this,e+2,e+5),v(this,e+3,e+4);return this},o.prototype.toString=function(){var t=this.length;return 0===t?"":0===arguments.length?D(this,0,t):g.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(t){if(!o.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===o.compare(this,t)},o.prototype.inspect=function(){var t="",e=r.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},o.prototype.compare=function(t,e,r,n,i){if(!o.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(e>>>=0,r>>>=0,n>>>=0,i>>>=0,this===t)return 0;for(var s=i-n,a=r-e,u=Math.min(s,a),c=this.slice(n,i),l=t.slice(e,r),f=0;f<u;++f)if(c[f]!==l[f]){s=c[f],a=l[f];break}return s<a?-1:a<s?1:0},o.prototype.includes=function(t,e,r){return this.indexOf(t,e,r)!==-1},o.prototype.indexOf=function(t,e,r){return _(this,t,e,r,!0)},o.prototype.lastIndexOf=function(t,e,r){return _(this,t,e,r,!1)},o.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return w(this,t,e,r);case"utf8":case"utf-8":return E(this,t,e,r);case"ascii":return T(this,t,e,r);case"latin1":case"binary":return S(this,t,e,r);case"base64":return x(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var J=4096;o.prototype.slice=function(t,e){var r=this.length;t=~~t,e=void 0===e?r:~~e,t<0?(t+=r,t<0&&(t=0)):t>r&&(t=r),e<0?(e+=r,e<0&&(e=0)):e>r&&(e=r),e<t&&(e=t);var n=this.subarray(t,e);return n.__proto__=o.prototype,n},o.prototype.readUIntLE=function(t,e,r){t>>>=0,e>>>=0,r||k(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n},o.prototype.readUIntBE=function(t,e,r){t>>>=0,e>>>=0,r||k(t,e,this.length);for(var n=this[t+--e],i=1;e>0&&(i*=256);)n+=this[t+--e]*i;return n},o.prototype.readUInt8=function(t,e){return t>>>=0,e||k(t,1,this.length),this[t]},o.prototype.readUInt16LE=function(t,e){return t>>>=0,e||k(t,2,this.length),this[t]|this[t+1]<<8},o.prototype.readUInt16BE=function(t,e){return t>>>=0,e||k(t,2,this.length),this[t]<<8|this[t+1]},o.prototype.readUInt32LE=function(t,e){return t>>>=0,e||k(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},o.prototype.readUInt32BE=function(t,e){return t>>>=0,e||k(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},o.prototype.readIntLE=function(t,e,r){t>>>=0,e>>>=0,r||k(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*e)),n},o.prototype.readIntBE=function(t,e,r){t>>>=0,e>>>=0,r||k(t,e,this.length);for(var n=e,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*e)),o},o.prototype.readInt8=function(t,e){return t>>>=0,e||k(t,1,this.length),128&this[t]?(255-this[t]+1)*-1:this[t]},o.prototype.readInt16LE=function(t,e){t>>>=0,e||k(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt16BE=function(t,e){t>>>=0,e||k(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt32LE=function(t,e){return t>>>=0,e||k(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},o.prototype.readInt32BE=function(t,e){return t>>>=0,e||k(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},o.prototype.readFloatLE=function(t,e){return t>>>=0,e||k(t,4,this.length),Q.read(this,t,!0,23,4)},o.prototype.readFloatBE=function(t,e){return t>>>=0,e||k(t,4,this.length),Q.read(this,t,!1,23,4)},o.prototype.readDoubleLE=function(t,e){return t>>>=0,e||k(t,8,this.length),Q.read(this,t,!0,52,8)},o.prototype.readDoubleBE=function(t,e){return t>>>=0,e||k(t,8,this.length),Q.read(this,t,!1,52,8)},o.prototype.writeUIntLE=function(t,e,r,n){if(t=+t,e>>>=0,r>>>=0,!n){var i=Math.pow(2,8*r)-1;R(this,t,e,r,i,0)}var o=1,s=0;for(this[e]=255&t;++s<r&&(o*=256);)this[e+s]=t/o&255;return e+r},o.prototype.writeUIntBE=function(t,e,r,n){if(t=+t,e>>>=0,r>>>=0,!n){var i=Math.pow(2,8*r)-1;R(this,t,e,r,i,0)}var o=r-1,s=1;for(this[e+o]=255&t;--o>=0&&(s*=256);)this[e+o]=t/s&255;return e+r},o.prototype.writeUInt8=function(t,e,r){return t=+t,e>>>=0,r||R(this,t,e,1,255,0),this[e]=255&t,e+1},o.prototype.writeUInt16LE=function(t,e,r){return t=+t,e>>>=0,r||R(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},o.prototype.writeUInt16BE=function(t,e,r){return t=+t,e>>>=0,r||R(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},o.prototype.writeUInt32LE=function(t,e,r){return t=+t,e>>>=0,r||R(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},o.prototype.writeUInt32BE=function(t,e,r){return t=+t,e>>>=0,r||R(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},o.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e>>>=0,!n){var i=Math.pow(2,8*r-1);R(this,t,e,r,i-1,-i)}var o=0,s=1,a=0;for(this[e]=255&t;++o<r&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+r},o.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e>>>=0,!n){var i=Math.pow(2,8*r-1);R(this,t,e,r,i-1,-i)}var o=r-1,s=1,a=0;for(this[e+o]=255&t;--o>=0&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+r},o.prototype.writeInt8=function(t,e,r){return t=+t,e>>>=0,r||R(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},o.prototype.writeInt16LE=function(t,e,r){return t=+t,e>>>=0,r||R(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},o.prototype.writeInt16BE=function(t,e,r){return t=+t,e>>>=0,r||R(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},o.prototype.writeInt32LE=function(t,e,r){return t=+t,e>>>=0,r||R(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},o.prototype.writeInt32BE=function(t,e,r){return t=+t,e>>>=0,r||R(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},o.prototype.writeFloatLE=function(t,e,r){return U(this,t,e,!0,r)},o.prototype.writeFloatBE=function(t,e,r){return U(this,t,e,!1,r)},o.prototype.writeDoubleLE=function(t,e,r){return P(this,t,e,!0,r)},o.prototype.writeDoubleBE=function(t,e,r){return P(this,t,e,!1,r)},o.prototype.copy=function(t,e,r,n){if(!o.isBuffer(t))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var i=n-r;if(this===t&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(e,r,n);else if(this===t&&r<e&&e<n)for(var s=i-1;s>=0;--s)t[s+e]=this[s+r];else Uint8Array.prototype.set.call(t,this.subarray(r,n),e);return i},o.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!o.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===t.length){var i=t.charCodeAt(0);("utf8"===n&&i<128||"latin1"===n)&&(t=i)}}else"number"==typeof t&&(t=255&t);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0);var s;if("number"==typeof t)for(s=e;s<r;++s)this[s]=t;else{var a=o.isBuffer(t)?t:new o(t,n),u=a.length;if(0===u)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(s=0;s<r-e;++s)this[s+e]=a[s%u]}return this};var K=/[^+\/0-9A-Za-z-_]/g},{"base64-js":28,ieee754:38}],31:[function(t,e,r){(function(t){function e(t){return Array.isArray?Array.isArray(t):"[object Array]"===m(t)}function n(t){return"boolean"==typeof t}function i(t){return null===t}function o(t){return null==t}function s(t){return"number"==typeof t}function a(t){return"string"==typeof t}function u(t){return"symbol"==typeof t}function c(t){return void 0===t}function l(t){return"[object RegExp]"===m(t)}function f(t){return"object"==typeof t&&null!==t}function h(t){return"[object Date]"===m(t)}function p(t){return"[object Error]"===m(t)||t instanceof Error}function d(t){return"function"==typeof t}function y(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function m(t){return Object.prototype.toString.call(t)}r.isArray=e,r.isBoolean=n,r.isNull=i,r.isNullOrUndefined=o,r.isNumber=s,r.isString=a,r.isSymbol=u,r.isUndefined=c,r.isRegExp=l,r.isObject=f,r.isDate=h,r.isError=p,r.isFunction=d,r.isPrimitive=y,r.isBuffer=t.isBuffer}).call(this,{isBuffer:t("../../is-buffer/index.js")})},{"../../is-buffer/index.js":40}],32:[function(t,e,r){(function(t){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}var o=function(){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;r(this,e),this.size=n,this.length=0,this.buf=t.alloc(n)}return i(e,[{key:"prepend",value:function(t){var e=this.length++;e===this.size&&this.resize();var r=this.clone();this.buf[0]=t,r.copy(this.buf,1,0,e)}},{key:"append",value:function(t){var e=this.length++;e===this.size&&this.resize(),this.buf[e]=t}},{key:"clone",value:function(){return t.from(this.buf.slice(0,this.length))}},{key:"resize",value:function(){var e=this.length;this.size=2*this.size;var r=t.alloc(this.size);this.buf.copy(r,0,0,e),this.buf=r}},{key:"toString",value:function(){return this.buf.slice(0,this.length).toString()}},{key:"toJSON",value:function(){return this.toString()}},{key:"reset",value:function(){this.length=0}}]),e}();e.exports=o}).call(this,t("buffer").Buffer)},{buffer:30}],33:[function(t,e,r){(function(r){"use strict";function n(t){var e="function"==typeof Map?new Map:void 0;return(n=function(t){function r(){return o(t,arguments,S(this).constructor)}if(null===t||!s(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if("undefined"!=typeof e){if(e.has(t))return e.get(t);e.set(t,r)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),O(r,t)})(t)}function i(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function o(t,e,r){return o=i()?Reflect.construct:function(t,e,r){var n=[null];n.push.apply(n,e);var i=Function.bind.apply(t,n),o=new i;return r&&O(o,r.prototype),o},o.apply(null,arguments)}function s(t){return Function.toString.call(t).indexOf("[native code]")!==-1}function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){return f(t)||l(t,e)||c()}function c(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function l(t,e){var r=[],n=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!e||r.length!==e);n=!0);}catch(u){i=!0,o=u}finally{try{n||null==a["return"]||a["return"]()}finally{if(i)throw o}}return r}function f(t){if(Array.isArray(t))return t}function h(t){return y(t)||d(t)||p()}function p(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function d(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function y(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}function m(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function g(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?m(r,!0).forEach(function(e){v(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):m(r).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function v(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function b(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function w(t,e,r){return e&&b(t.prototype,e),r&&b(t,r),t}function E(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?T(t):e}function T(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function S(t){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function x(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&O(t,e)}function O(t,e){return(O=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var I=t("stream"),D=I.Transform,A=t("./ResizeableBuffer"),C=13,N=10,L=32,j=9,k=r.from([239,187,191]),R=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_(this,e),t=E(this,S(e).call(this,g({},{readableObjectMode:!0},{},n)));var i={};for(var o in n)i[P(o)]=n[o];if(void 0===i.bom||null===i.bom||i.bom===!1)i.bom=!1;else if(i.bom!==!0)throw new Error("Invalid Option: bom must be true, got ".concat(JSON.stringify(i.bom)));var s=null;if(void 0===i.cast||null===i.cast||i.cast===!1||""===i.cast)i.cast=void 0;else if("function"==typeof i.cast)s=i.cast,i.cast=!0;else if(i.cast!==!0)throw new Error("Invalid Option: cast must be true or a function");if(void 0===i.cast_date||null===i.cast_date||i.cast_date===!1||""===i.cast_date)i.cast_date=!1;else if(i.cast_date===!0)i.cast_date=function(t){var e=Date.parse(t);return isNaN(e)?t:new Date(e)};else if("function"!=typeof i.cast_date)throw new Error("Invalid Option: cast_date must be true or a function");var a=null;if(i.columns===!0)a=void 0;else if("function"==typeof i.columns)a=i.columns,
i.columns=!0;else if(Array.isArray(i.columns))i.columns=B(i.columns);else{if(void 0!==i.columns&&null!==i.columns&&i.columns!==!1)throw new Error("Invalid Option columns: expect an object or true, got ".concat(JSON.stringify(i.columns)));i.columns=!1}if(void 0===i.comment||null===i.comment||i.comment===!1||""===i.comment)i.comment=null;else if("string"==typeof i.comment&&(i.comment=r.from(i.comment)),!r.isBuffer(i.comment))throw new Error("Invalid Option: comment must be a buffer or a string, got ".concat(JSON.stringify(i.comment)));if(void 0===i.delimiter||null===i.delimiter||i.delimiter===!1)i.delimiter=r.from(",");else if(r.isBuffer(i.delimiter)){if(0===i.delimiter.length)throw new Error("Invalid Option: delimiter must be a non empty buffer")}else{if("string"!=typeof i.delimiter)throw new Error("Invalid Option: delimiter must be a string or a buffer, got ".concat(i.delimiter));if(0===i.delimiter.length)throw new Error("Invalid Option: delimiter must be a non empty string");i.delimiter=r.from(i.delimiter)}if(void 0===i.escape||null===i.escape?i.escape=r.from('"'):"string"==typeof i.escape&&(i.escape=r.from(i.escape)),!r.isBuffer(i.escape))throw new Error("Invalid Option: escape must be a buffer or a string, got ".concat(JSON.stringify(i.escape)));if(1!==i.escape.length)throw new Error("Invalid Option Length: escape must be one character, got ".concat(i.escape.length));if(i.escape=i.escape[0],void 0===i.from||null===i.from)i.from=1;else{if("string"==typeof i.from&&/\d+/.test(i.from)&&(i.from=parseInt(i.from)),!Number.isInteger(i.from))throw new Error("Invalid Option: from must be an integer, got ".concat(JSON.stringify(i.from)));if(i.from<0)throw new Error("Invalid Option: from must be a positive integer, got ".concat(JSON.stringify(n.from)))}if(void 0===i.from_line||null===i.from_line)i.from_line=1;else{if("string"==typeof i.from_line&&/\d+/.test(i.from_line)&&(i.from_line=parseInt(i.from_line)),!Number.isInteger(i.from_line))throw new Error("Invalid Option: from_line must be an integer, got ".concat(JSON.stringify(n.from_line)));if(i.from_line<=0)throw new Error("Invalid Option: from_line must be a positive integer greater than 0, got ".concat(JSON.stringify(n.from_line)))}if(void 0===i.info||null===i.info||i.info===!1)i.info=!1;else if(i.info!==!0)throw new Error("Invalid Option: info must be true, got ".concat(JSON.stringify(i.info)));if(void 0===i.max_record_size||null===i.max_record_size||i.max_record_size===!1)i.max_record_size=0;else if(Number.isInteger(i.max_record_size)&&i.max_record_size>=0);else{if("string"!=typeof i.max_record_size||!/\d+/.test(i.max_record_size))throw new Error("Invalid Option: max_record_size must be a positive integer, got ".concat(JSON.stringify(i.max_record_size)));i.max_record_size=parseInt(i.max_record_size)}if(void 0===i.objname||null===i.objname||i.objname===!1)i.objname=void 0;else if(r.isBuffer(i.objname)){if(0===i.objname.length)throw new Error("Invalid Option: objname must be a non empty buffer");i.objname=i.objname.toString()}else{if("string"!=typeof i.objname)throw new Error("Invalid Option: objname must be a string or a buffer, got ".concat(i.objname));if(0===i.objname.length)throw new Error("Invalid Option: objname must be a non empty string")}if(null===i.quote||i.quote===!1||""===i.quote)i.quote=null;else{if(void 0===i.quote||i.quote===!0?i.quote=r.from('"'):"string"==typeof i.quote&&(i.quote=r.from(i.quote)),!r.isBuffer(i.quote))throw new Error("Invalid Option: quote must be a buffer or a string, got ".concat(JSON.stringify(i.quote)));if(1!==i.quote.length)throw new Error("Invalid Option Length: quote must be one character, got ".concat(i.quote.length));i.quote=i.quote[0]}if(void 0===i.raw||null===i.raw||i.raw===!1)i.raw=!1;else if(i.raw!==!0)throw new Error("Invalid Option: raw must be true, got ".concat(JSON.stringify(i.raw)));if(i.record_delimiter?Array.isArray(i.record_delimiter)||(i.record_delimiter=[i.record_delimiter]):i.record_delimiter=[],i.record_delimiter=i.record_delimiter.map(function(t){return"string"==typeof t&&(t=r.from(t)),t}),"boolean"==typeof i.relax);else{if(void 0!==i.relax&&null!==i.relax)throw new Error("Invalid Option: relax must be a boolean, got ".concat(JSON.stringify(i.relax)));i.relax=!1}if("boolean"==typeof i.relax_column_count);else{if(void 0!==i.relax_column_count&&null!==i.relax_column_count)throw new Error("Invalid Option: relax_column_count must be a boolean, got ".concat(JSON.stringify(i.relax_column_count)));i.relax_column_count=!1}if("boolean"==typeof i.skip_empty_lines);else{if(void 0!==i.skip_empty_lines&&null!==i.skip_empty_lines)throw new Error("Invalid Option: skip_empty_lines must be a boolean, got ".concat(JSON.stringify(i.skip_empty_lines)));i.skip_empty_lines=!1}if("boolean"==typeof i.skip_lines_with_empty_values);else{if(void 0!==i.skip_lines_with_empty_values&&null!==i.skip_lines_with_empty_values)throw new Error("Invalid Option: skip_lines_with_empty_values must be a boolean, got ".concat(JSON.stringify(i.skip_lines_with_empty_values)));i.skip_lines_with_empty_values=!1}if("boolean"==typeof i.skip_lines_with_error);else{if(void 0!==i.skip_lines_with_error&&null!==i.skip_lines_with_error)throw new Error("Invalid Option: skip_lines_with_error must be a boolean, got ".concat(JSON.stringify(i.skip_lines_with_error)));i.skip_lines_with_error=!1}if(void 0===i.rtrim||null===i.rtrim||i.rtrim===!1)i.rtrim=!1;else if(i.rtrim!==!0)throw new Error("Invalid Option: rtrim must be a boolean, got ".concat(JSON.stringify(i.rtrim)));if(void 0===i.ltrim||null===i.ltrim||i.ltrim===!1)i.ltrim=!1;else if(i.ltrim!==!0)throw new Error("Invalid Option: ltrim must be a boolean, got ".concat(JSON.stringify(i.ltrim)));if(void 0===i.trim||null===i.trim||i.trim===!1)i.trim=!1;else if(i.trim!==!0)throw new Error("Invalid Option: trim must be a boolean, got ".concat(JSON.stringify(i.trim)));if(i.trim===!0&&n.ltrim!==!1?i.ltrim=!0:i.ltrim!==!0&&(i.ltrim=!1),i.trim===!0&&n.rtrim!==!1?i.rtrim=!0:i.rtrim!==!0&&(i.rtrim=!1),void 0===i.to||null===i.to)i.to=-1;else{if("string"==typeof i.to&&/\d+/.test(i.to)&&(i.to=parseInt(i.to)),!Number.isInteger(i.to))throw new Error("Invalid Option: to must be an integer, got ".concat(JSON.stringify(n.to)));if(i.to<=0)throw new Error("Invalid Option: to must be a positive integer greater than 0, got ".concat(JSON.stringify(n.to)))}if(void 0===i.to_line||null===i.to_line)i.to_line=-1;else{if("string"==typeof i.to_line&&/\d+/.test(i.to_line)&&(i.to_line=parseInt(i.to_line)),!Number.isInteger(i.to_line))throw new Error("Invalid Option: to_line must be an integer, got ".concat(JSON.stringify(n.to_line)));if(i.to_line<=0)throw new Error("Invalid Option: to_line must be a positive integer greater than 0, got ".concat(JSON.stringify(n.to_line)))}return t.info={comment_lines:0,empty_lines:0,invalid_field_length:0,lines:1,records:0},t.options=i,t.state={bomSkipped:!1,castField:s,commenting:!1,enabled:1===i.from_line,escaping:!1,escapeIsQuote:i.escape===i.quote,expectedRecordLength:null===i.columns?0:i.columns.length,field:new A(20),firstLineToHeaders:a,info:Object.assign({},t.info),previousBuf:void 0,quoting:!1,stop:!1,rawBuffer:new A(100),record:[],recordHasError:!1,record_length:0,recordDelimiterMaxLength:0===i.record_delimiter.length?2:Math.max.apply(Math,h(i.record_delimiter.map(function(t){return t.length}))),trimChars:[r.from(" ")[0],r.from("\t")[0]],wasQuoting:!1,wasRowDelimiter:!1},t}return x(e,t),w(e,[{key:"_transform",value:function(t,e,r){if(this.state.stop!==!0){var n=this.__parse(t,!1);void 0!==n&&(this.state.stop=!0),r(n)}}},{key:"_flush",value:function(t){if(this.state.stop!==!0){var e=this.__parse(void 0,!0);t(e)}}},{key:"__parse",value:function(t,e){var n,i=this.options,o=i.bom,s=i.comment,a=i.escape,u=i.from_line,c=i.info,l=i.ltrim,f=i.max_record_size,h=i.quote,p=i.raw,d=i.relax,y=i.rtrim,m=i.skip_empty_lines,g=i.to,v=i.to_line,_=this.options.record_delimiter,b=this.state,w=b.bomSkipped,E=b.previousBuf,T=b.rawBuffer,S=b.escapeIsQuote;if(void 0===E){if(void 0===t)return void this.push(null);n=t}else n=void 0!==E&&void 0===t?E:r.concat([E,t]);if(w===!1)if(o===!1)this.state.bomSkipped=!0;else if(n.length<3){if(e===!1)return void(this.state.previousBuf=n)}else 0===k.compare(n,0,3)&&(n=n.slice(3)),this.state.bomSkipped=!0;var x,O=n.length;for(x=0;x<O&&!this.__needMoreData(x,O,e);x++){if(this.state.wasRowDelimiter===!0&&(this.info.lines++,c===!0&&0===this.state.record.length&&0===this.state.field.length&&this.state.wasQuoting===!1&&(this.state.info=Object.assign({},this.info)),this.state.wasRowDelimiter=!1),v!==-1&&this.info.lines>v)return this.state.stop=!0,void this.push(null);if(this.state.quoting===!1&&0===_.length){var I=this.__autoDiscoverRowDelimiter(n,x);I&&(_=this.options.record_delimiter)}var D=n[x];if(p===!0&&T.append(D),D!==C&&D!==N||this.state.wasRowDelimiter!==!1||(this.state.wasRowDelimiter=!0),this.state.escaping===!0)this.state.escaping=!1;else{if(this.state.quoting===!0&&D===a&&x+1<O){if(!S){this.state.escaping=!0;continue}if(n[x+1]===h){this.state.escaping=!0;continue}}if(this.state.commenting===!1&&D===h)if(this.state.quoting===!0){var A=n[x+1],L=y&&this.__isCharTrimable(A),j=null!==s&&this.__compareBytes(s,n,x+1,A),R=this.__isDelimiter(A,n,x+1),M=0===_.length?this.__autoDiscoverRowDelimiter(n,x+1):this.__isRecordDelimiter(A,n,x+1);if(D===a&&A===h)x++;else{if(!A||R||M||j||L){this.state.quoting=!1,this.state.wasQuoting=!0;continue}if(d===!1){var P=this.__error(new U("CSV_INVALID_CLOSING_QUOTE",["Invalid Closing Quote:",'got "'.concat(String.fromCharCode(A),'"'),"at line ".concat(this.info.lines),"instead of delimiter, row delimiter, trimable character","(if activated) or comment"],this.__context()));if(void 0!==P)return P}else this.state.quoting=!1,this.state.wasQuoting=!0,this.state.field.prepend(h)}}else{if(0===this.state.field.length){this.state.quoting=!0;continue}if(d===!1){var q=this.__error(new U("INVALID_OPENING_QUOTE",["Invalid Opening Quote:","a quote is found inside a field at line ".concat(this.info.lines)],this.__context(),{field:this.state.field}));if(void 0!==q)return q}}if(this.state.quoting===!1){var B=this.__isRecordDelimiter(D,n,x);if(0!==B){var F=this.state.commenting&&this.state.wasQuoting===!1&&0===this.state.record.length&&0===this.state.field.length;if(F)this.info.comment_lines++;else{if(m===!0&&this.state.wasQuoting===!1&&0===this.state.record.length&&0===this.state.field.length){this.info.empty_lines++,x+=B-1;continue}if(this.state.enabled===!1&&this.info.lines+(this.state.wasRowDelimiter===!0?1:0)>=u){this.state.enabled=!0,this.__resetField(),this.__resetRow(),x+=B-1;continue}var X=this.__onField();if(void 0!==X)return X;var z=this.__onRow();if(void 0!==z)return z;if(g!==-1&&this.info.records>=g)return this.state.stop=!0,void this.push(null)}this.state.commenting=!1,x+=B-1;continue}if(this.state.commenting)continue;var V=null===s?0:this.__compareBytes(s,n,x,D);if(0!==V){this.state.commenting=!0;continue}var H=this.__isDelimiter(D,n,x);if(0!==H){var W=this.__onField();if(void 0!==W)return W;x+=H-1;continue}}}if(this.state.commenting===!1&&0!==f&&this.state.record_length+this.state.field.length>f){var G=this.__error("Max Record Size: record exceed the maximum number of tolerated bytes of ".concat(f," on line ").concat(this.info.lines));if(void 0!==G)return G}var Y=l===!1||this.state.quoting===!0||0!==this.state.field.length||!this.__isCharTrimable(D),Q=y===!1||this.state.wasQuoting===!1;if(Y===!0&&Q===!0)this.state.field.append(D);else if(y===!0&&!this.__isCharTrimable(D)){var $=this.__error("Invalid Closing Quote: found non trimable byte after quote at line ".concat(this.info.lines));if(void 0!==$)return $}}if(e===!0)if(this.state.quoting===!0){var J=this.__error(new U("CSV_QUOTE_NOT_CLOSED",["Quote Not Closed:","the parsing is finished with an opening quote at line ".concat(this.info.lines)],this.__context()));if(void 0!==J)return J}else if(this.state.wasQuoting===!0||0!==this.state.record.length||0!==this.state.field.length){var K=this.__onField();if(void 0!==K)return K;var Z=this.__onRow();if(void 0!==Z)return Z}else this.state.wasRowDelimiter===!0?this.info.empty_lines++:this.state.commenting===!0&&this.info.comment_lines++;else this.state.previousBuf=n.slice(x);this.state.wasRowDelimiter===!0&&(this.info.lines++,this.state.wasRowDelimiter=!1)}},{key:"__isCharTrimable",value:function(t){return t===L||t===j||t===C||t===N}},{key:"__onRow",value:function(){var t=this.options,e=t.columns,r=t.info,n=t.from,i=t.relax_column_count,o=t.raw,s=t.skip_lines_with_empty_values,a=this.state,u=a.enabled,c=a.record;if(e===!0)return this.__firstLineToColumns(c);var l=c.length;if(e===!1&&0===this.info.records)this.state.expectedRecordLength=l;else if(u===!0&&l!==this.state.expectedRecordLength)if(i===!0)this.info.invalid_field_length++;else if(e===!1){var f=this.__error(new U("CSV_INVALID_RECORD_LENGTH_DONT_PREVIOUS_RECORDS",["Invalid Record Length:","expect ".concat(this.state.expectedRecordLength,","),"got ".concat(l," on line ").concat(this.info.lines)],this.__context(),{record:c}));if(void 0!==f)return f}else{var h=this.__error(new U("CSV_INVALID_RECORD_LENGTH_DONT_MATCH_COLUMNS",["Invalid Record Length:","header length is ".concat(e.length,","),"got ".concat(l," on line ").concat(this.info.lines)],this.__context(),{record:c}));if(void 0!==h)return h}if(u===!1)return this.__resetRow();if(s===!0&&c.every(function(t){return null==t||t.toString&&""===t.toString().trim()}))return void this.__resetRow();if(this.state.recordHasError===!0)return this.__resetRow(),void(this.state.recordHasError=!1);if(this.info.records++,1===n||this.info.records>=n)if(e!==!1){var p={};for(var d in c)void 0===e[d]||e[d].disabled||(p[e[d].name]=c[d]);var y=this.options.objname;void 0===y?o===!0||r===!0?this.push(Object.assign({record:p},o===!0?{raw:this.state.rawBuffer.toString()}:{},r===!0?{info:this.state.info}:{})):this.push(p):o===!0||r===!0?this.push(Object.assign({record:[p[y],p]},o===!0?{raw:this.state.rawBuffer.toString()}:{},r===!0?{info:this.state.info}:{})):this.push([p[y],p])}else o===!0||r===!0?this.push(Object.assign({record:c},o===!0?{raw:this.state.rawBuffer.toString()}:{},r===!0?{info:this.state.info}:{})):this.push(c);this.__resetRow()}},{key:"__firstLineToColumns",value:function(t){var e=this.state.firstLineToHeaders;try{var r=void 0===e?t:e.call(null,t);if(!Array.isArray(r))return this.__error(new U("CSV_INVALID_COLUMN_MAPPING",["Invalid Column Mapping:","expect an array from column function,","got ".concat(JSON.stringify(r))],this.__context(),{headers:r}));var n=B(r);return this.state.expectedRecordLength=n.length,this.options.columns=n,void this.__resetRow()}catch(i){return i}}},{key:"__resetRow",value:function(){this.options.raw===!0&&this.state.rawBuffer.reset(),this.state.record=[],this.state.record_length=0}},{key:"__onField",value:function(){var t=this.options,e=t.cast,r=t.rtrim,n=t.max_record_size,i=this.state,o=i.enabled,s=i.wasQuoting;if(this.options.columns!==!0&&o===!1)return this.__resetField();var a=this.state.field.toString();if(r===!0&&s===!1&&(a=a.trimRight()),e===!0){var c=this.__cast(a),l=u(c,2),f=l[0],h=l[1];if(void 0!==f)return f;a=h}this.state.record.push(a),0!==n&&"string"==typeof a&&(this.state.record_length+=a.length),this.__resetField()}},{key:"__resetField",value:function(){this.state.field.reset(),this.state.wasQuoting=!1}},{key:"__cast",value:function(t){var e=this.options,r=e.columns,n=e.relax_column_count,i=Array.isArray(r);if(i===!0&&n&&this.options.columns.length<=this.state.record.length)return[void 0,void 0];var o=this.__context();if(null!==this.state.castField)try{return[void 0,this.state.castField.call(null,t,o)]}catch(s){return[s]}return this.__isFloat(t)?[void 0,parseFloat(t)]:this.options.cast_date!==!1?[void 0,this.options.cast_date.call(null,t,o)]:[void 0,t]}},{key:"__isFloat",value:function(t){return t-parseFloat(t)+1>=0}},{key:"__compareBytes",value:function(t,e,r,n){if(t[0]!==n)return 0;for(var i=t.length,o=1;o<i;o++)if(t[o]!==e[r+o])return 0;return i}},{key:"__needMoreData",value:function(t,e,r){if(r)return!1;var n=this.options,i=n.comment,o=n.delimiter,s=this.state,a=s.quoting,u=s.recordDelimiterMaxLength,c=e-t-1,l=Math.max(i?i.length:0,u,a?1+u:0,o.length,1);return c<l}},{key:"__isDelimiter",value:function(t,e,r){var n=this.options.delimiter,i=n.length;if(n[0]!==t)return 0;for(var o=1;o<i;o++)if(n[o]!==e[r+o])return 0;return n.length}},{key:"__isRecordDelimiter",value:function(t,e,r){var n=this.options.record_delimiter,i=n.length;t:for(var o=0;o<i;o++){var s=n[o],a=s.length;if(s[0]===t){for(var u=1;u<a;u++)if(s[u]!==e[r+u])continue t;return s.length}}return 0}},{key:"__autoDiscoverRowDelimiter",value:function(t,e){var n=t[e];return n===C?t[e+1]===N?(this.options.record_delimiter.push(r.from("\r\n")),this.state.recordDelimiterMaxLength=2,2):(this.options.record_delimiter.push(r.from("\r")),this.state.recordDelimiterMaxLength=1,1):n===N?(this.options.record_delimiter.push(r.from("\n")),this.state.recordDelimiterMaxLength=1,1):0}},{key:"__error",value:function(t){var e=this.options.skip_lines_with_error,r="string"==typeof t?new Error(t):t;return e?(this.state.recordHasError=!0,void this.emit("skip",r)):r}},{key:"__context",value:function(){var t=this.options.columns,e=Array.isArray(t);return{column:e===!0?t.length>=this.state.record.length?t[this.state.record.length].name:null:this.state.record.length,empty_lines:this.info.empty_lines,header:t===!0,index:this.state.record.length,invalid_field_length:this.info.invalid_field_length,quoting:this.state.wasQuoting,lines:this.info.lines,records:this.info.records}}}]),e}(D),M=function(){var t,e,n;for(var i in arguments){var o=arguments[i],s=a(o);if(void 0!==t||"string"!=typeof o&&!r.isBuffer(o))if(void 0===e&&q(o))e=o;else{if(void 0!==n||"function"!==s)throw new Error("Invalid argument: got ".concat(JSON.stringify(o)," at index ").concat(i));n=o}else t=o}var u=new R(e);if(n){var c=void 0===e||void 0===e.objname?[]:{};u.on("readable",function(){for(var t;null!==(t=this.read());)void 0===e||void 0===e.objname?c.push(t):c[t[0]]=t[1]}),u.on("error",function(t){n(t,void 0,u.info)}),u.on("end",function(){n(void 0,c,u.info)})}return void 0!==t&&(u.write(t),u.end()),u},U=function(t){function e(t,n){var i;_(this,e),Array.isArray(n)&&(n=n.join(" ")),i=E(this,S(e).call(this,[n])),Error.captureStackTrace(T(i),e),i.code=t;for(var o=arguments.length,s=new Array(o>2?o-2:0),a=2;a<o;a++)s[a-2]=arguments[a];for(var u=0,c=s;u<c.length;u++){var l=c[u];for(var f in l){var h=r.isBuffer(l[f])?l[f].toString():l[f];i[f]=JSON.parse(JSON.stringify(h))}}return i}return x(e,t),e}(n(Error));M.Parser=R,M.CsvError=U,e.exports=M;var P=function(t){return t.replace(/([A-Z])/g,function(t,e){return"_"+e.toLowerCase()})},q=function(t){return"object"===a(t)&&null!==t&&!Array.isArray(t)},B=function(t){for(var e=[],r=0;r<t.length;r++){var n=t[r];if(void 0===n||null===n||n===!1)e[r]={disabled:!0};else if("string"==typeof n)e[r]={name:n};else{if(!q(n))throw new Error("Invalid Option columns: expect a string or an object, got ".concat(JSON.stringify(n)," at position ").concat(r));if("string"!=typeof n.name)throw new Error('Invalid Option columns: property "name" is required at position '.concat(r," when column is an object literal"));e[r]=n}}return e}}).call(this,t("buffer").Buffer)},{"./ResizeableBuffer":32,buffer:30,stream:67}],34:[function(t,e,r){(function(r){"use strict";var n=t(".");e.exports=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"string"==typeof t&&(t=r.from(t));var i=e&&e.objname?{}:[],o=new n.Parser(e);o.push=function(t){void 0===e.objname?i.push(t):i[t[0]]=t[1]};var s=o.__parse(t,!1);if(void 0!==s)throw s;var a=o.__parse(void 0,!0);if(void 0!==a)throw a;return i}}).call(this,t("buffer").Buffer)},{".":33,buffer:30}],35:[function(t,e,r){(function(r){var n,i,o,s;o=t("stream"),s=t("util"),i=t("lodash.get"),e.exports=function(){var t,e,i,o,s;return 3===arguments.length?(i=arguments[0],o=arguments[1],t=arguments[2]):2===arguments.length?(Array.isArray(arguments[0])?i=arguments[0]:o=arguments[0],"function"==typeof arguments[1]?t=arguments[1]:o=arguments[1]):1===arguments.length&&("function"==typeof arguments[0]?t=arguments[0]:Array.isArray(arguments[0])?i=arguments[0]:o=arguments[0]),null==o&&(o={}),s=new n(o),i&&r.nextTick(function(){var t,e,r;for(e=0,r=i.length;e<r;e++)t=i[e],s.write(t);return s.end()}),t&&(e=[],s.on("readable",function(){var t,r;for(r=[];t=s.read();)r.push(e.push(t));return r}),s.on("error",function(e){return t(e)}),s.on("end",function(){return t(null,e.join(""))})),s},n=function(t){var e,r,n,i,s,a,u,c,l,f,h,p,d,y,m,g,v;null==t&&(t={}),g={};for(m in t)v=t[m],g[m]=v;switch(o.Transform.call(this,g),this.options=g,null==(e=this.options).delimiter&&(e.delimiter=","),null==(r=this.options).quote&&(r.quote='"'),null==(u=this.options).quoted&&(u.quoted=!1),null==(c=this.options).quotedEmpty&&(c.quotedEmpty=void 0),null==(l=this.options).quotedString&&(l.quotedString=!1),null==(f=this.options).eof&&(f.eof=!0),null==(h=this.options).escape&&(h.escape='"'),null==(p=this.options).columns&&(p.columns=null),null==(d=this.options).header&&(d.header=!1),null==(y=this.options).formatters&&(y.formatters={}),null==(n=this.options.formatters).date&&(n.date=function(t){return""+t.getTime()}),null==(i=this.options.formatters).bool&&(i.bool=function(t){return t?"1":""}),null==(s=this.options.formatters).object&&(s.object=function(t){return JSON.stringify(t)}),null==(a=this.options).rowDelimiter&&(a.rowDelimiter="\n"),null==this.countWriten&&(this.countWriten=0),this.options.rowDelimiter){case"auto":this.options.rowDelimiter=null;break;case"unix":this.options.rowDelimiter="\n";break;case"mac":this.options.rowDelimiter="\r";break;case"windows":this.options.rowDelimiter="\r\n";break;case"unicode":this.options.rowDelimiter="\u2028"}return this},s.inherits(n,o.Transform),e.exports.Stringifier=n,n.prototype.headers=function(){var t,e,r;if(this.options.header&&this.options.columns)return r=this.options.columns,"object"==typeof r&&(r=function(){var n;n=[];for(t in r)e=r[t],n.push(e);return n}()),r=this.options.eof?this.stringify(r)+this.options.rowDelimiter:this.stringify(r),o.Transform.prototype.write.call(this,r)},n.prototype.end=function(t,e,r){return 0===this.countWriten&&this.headers(),o.Transform.prototype.end.apply(this,arguments)},n.prototype.write=function(t,e,r){var n,i,s;if(null!=t){if(s="object"!=typeof t,!s){0!==this.countWriten||Array.isArray(t)||null==(n=this.options).columns&&(n.columns=Object.keys(t));try{this.emit("record",t,this.countWriten)}catch(a){return i=a,this.emit("error",i)}this.options.eof?t=this.stringify(t)+this.options.rowDelimiter:(t=this.stringify(t),(this.options.header||this.countWriten)&&(t=this.options.rowDelimiter+t))}return"number"==typeof t&&(t=""+t),0===this.countWriten&&this.headers(),s||this.countWriten++,o.Transform.prototype.write.call(this,t,e,r)}},n.prototype._transform=function(t,e,r){return this.push(t),r()},n.prototype.stringify=function(t){var e,r,n,o,s,a,u,c,l,f,h,p,d,y,m,g,v,_,b,w;if("object"!=typeof t)return t;if(n=this.options.columns,"object"!=typeof n||null===n||Array.isArray(n)||(n=Object.keys(n)),c=this.options.delimiter,m=this.options.quote,l=this.options.escape,Array.isArray(t))n&&t.splice(n.length);else{if(e=[],n)for(h=p=0,g=n.length;0<=g?p<g:p>g;h=0<=g?++p:--p)r=n[h],w=i(t,r),e[h]="undefined"==typeof w||null===w?"":w;else for(r in t)e.push(t[r]);t=e,e=null}if(Array.isArray(t)){for(y="",h=d=0,v=t.length;0<=v?d<v:d>v;h=0<=v?++d:--d)f=t[h],"string"==typeof f||("number"==typeof f?f=""+f:"boolean"==typeof f?f=this.options.formatters.bool(f):f instanceof Date?f=this.options.formatters.date(f):"object"==typeof f&&null!==f&&(f=this.options.formatters.object(f))),f?(u=f.indexOf(c)>=0,a=f.indexOf(m)>=0,o=f.indexOf(l)>=0&&l!==m,s=f.indexOf("\r")>=0||f.indexOf("\n")>=0,b=a||u||s||this.options.quoted||this.options.quotedString&&"string"==typeof t[h],b&&o&&(_="\\"===l?new RegExp(l+l,"g"):new RegExp(l,"g"),f=f.replace(_,l+l)),a&&(_=new RegExp(m,"g"),f=f.replace(_,l+m)),b&&(f=m+f+m),y+=f):(this.options.quotedEmpty||null==this.options.quotedEmpty&&""===t[h]&&this.options.quotedString)&&(y+=m+m),h!==t.length-1&&(y+=c);t=y}return t}}).call(this,t("_process"))},{_process:46,"lodash.get":42,stream:67,util:72}],36:[function(t,e,r){(function(r){var n,i;n=t("string_decoder").StringDecoder,i=t("./index"),e.exports=function(t,e){var o,s,a,u,c,l;for(null==e&&(e={}),o=[],t instanceof r&&(s=new n,t=s.write(t)),l=new i.Stringifier(e),l.push=function(t){if(t)return o.push(t.toString())},a=0,u=t.length;a<u;a++)c=t[a],l.write(c);return l.end(),o.join("")}}).call(this,t("buffer").Buffer)},{"./index":35,buffer:30,string_decoder:68}],37:[function(t,e,r){function n(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=w(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}function i(t){return void 0===t._maxListeners?n.defaultMaxListeners:t._maxListeners}function o(t,e,r){if(e)t.call(r);else for(var n=t.length,i=m(t,n),o=0;o<n;++o)i[o].call(r)}function s(t,e,r,n){if(e)t.call(r,n);else for(var i=t.length,o=m(t,i),s=0;s<i;++s)o[s].call(r,n)}function a(t,e,r,n,i){if(e)t.call(r,n,i);else for(var o=t.length,s=m(t,o),a=0;a<o;++a)s[a].call(r,n,i)}function u(t,e,r,n,i,o){if(e)t.call(r,n,i,o);else for(var s=t.length,a=m(t,s),u=0;u<s;++u)a[u].call(r,n,i,o)}function c(t,e,r,n){if(e)t.apply(r,n);else for(var i=t.length,o=m(t,i),s=0;s<i;++s)o[s].apply(r,n)}function l(t,e,r,n){var o,s,a;if("function"!=typeof r)throw new TypeError('"listener" argument must be a function');if(s=t._events,s?(s.newListener&&(t.emit("newListener",e,r.listener?r.listener:r),s=t._events),a=s[e]):(s=t._events=w(null),t._eventsCount=0),a){if("function"==typeof a?a=s[e]=n?[r,a]:[a,r]:n?a.unshift(r):a.push(r),!a.warned&&(o=i(t),o&&o>0&&a.length>o)){a.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+a.length+' "'+String(e)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');u.name="MaxListenersExceededWarning",u.emitter=t,u.type=e,u.count=a.length,"object"==typeof console&&console.warn&&console.warn("%s: %s",u.name,u.message)}}else a=s[e]=r,++t._eventsCount;return t}function f(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var t=new Array(arguments.length),e=0;e<t.length;++e)t[e]=arguments[e];this.listener.apply(this.target,t)}}function h(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=T.call(f,n);return i.listener=r,n.wrapFn=i,i}function p(t,e,r){var n=t._events;if(!n)return[];var i=n[e];return i?"function"==typeof i?r?[i.listener||i]:[i]:r?g(i):m(i,i.length):[]}function d(t){var e=this._events;if(e){var r=e[t];if("function"==typeof r)return 1;if(r)return r.length}return 0}function y(t,e){for(var r=e,n=r+1,i=t.length;n<i;r+=1,n+=1)t[r]=t[n];t.pop()}function m(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function g(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function v(t){var e=function(){};return e.prototype=t,new e}function _(t){var e=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.push(r);return r}function b(t){var e=this;return function(){return e.apply(t,arguments)}}var w=Object.create||v,E=Object.keys||_,T=Function.prototype.bind||b;e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0;var S,x=10;try{var O={};Object.defineProperty&&Object.defineProperty(O,"x",{value:0}),S=0===O.x}catch(I){S=!1}S?Object.defineProperty(n,"defaultMaxListeners",{enumerable:!0,get:function(){return x},set:function(t){if("number"!=typeof t||t<0||t!==t)throw new TypeError('"defaultMaxListeners" must be a positive number');x=t}}):n.defaultMaxListeners=x,n.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=t,this},n.prototype.getMaxListeners=function(){return i(this)},n.prototype.emit=function(t){var e,r,n,i,l,f,h="error"===t;if(f=this._events)h=h&&null==f.error;else if(!h)return!1;if(h){if(arguments.length>1&&(e=arguments[1]),e instanceof Error)throw e;var p=new Error('Unhandled "error" event. ('+e+")");throw p.context=e,p}if(r=f[t],!r)return!1;var d="function"==typeof r;switch(n=arguments.length){case 1:o(r,d,this);break;case 2:s(r,d,this,arguments[1]);break;case 3:a(r,d,this,arguments[1],arguments[2]);break;case 4:u(r,d,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(n-1),l=1;l<n;l++)i[l-1]=arguments[l];c(r,d,this,i)}return!0},n.prototype.addListener=function(t,e){return l(this,t,e,!1)},n.prototype.on=n.prototype.addListener,n.prototype.prependListener=function(t,e){return l(this,t,e,!0)},n.prototype.once=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.on(t,h(this,t,e)),this},n.prototype.prependOnceListener=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.prependListener(t,h(this,t,e)),this},n.prototype.removeListener=function(t,e){var r,n,i,o,s;if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');if(n=this._events,!n)return this;if(r=n[t],!r)return this;if(r===e||r.listener===e)0===--this._eventsCount?this._events=w(null):(delete n[t],n.removeListener&&this.emit("removeListener",t,r.listener||e));else if("function"!=typeof r){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===e||r[o].listener===e){s=r[o].listener,i=o;break}if(i<0)return this;0===i?r.shift():y(r,i),1===r.length&&(n[t]=r[0]),n.removeListener&&this.emit("removeListener",t,s||e)}return this},n.prototype.removeAllListeners=function(t){var e,r,n;if(r=this._events,!r)return this;if(!r.removeListener)return 0===arguments.length?(this._events=w(null),this._eventsCount=0):r[t]&&(0===--this._eventsCount?this._events=w(null):delete r[t]),this;if(0===arguments.length){var i,o=E(r);for(n=0;n<o.length;++n)i=o[n],"removeListener"!==i&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=w(null),this._eventsCount=0,this}if(e=r[t],"function"==typeof e)this.removeListener(t,e);else if(e)for(n=e.length-1;n>=0;n--)this.removeListener(t,e[n]);return this},n.prototype.listeners=function(t){return p(this,t,!0)},n.prototype.rawListeners=function(t){return p(this,t,!1)},n.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):d.call(t,e)},n.prototype.listenerCount=d,n.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]}},{}],38:[function(t,e,r){r.read=function(t,e,r,n,i){var o,s,a=8*i-n-1,u=(1<<a)-1,c=u>>1,l=-7,f=r?i-1:0,h=r?-1:1,p=t[e+f];for(f+=h,o=p&(1<<-l)-1,p>>=-l,l+=a;l>0;o=256*o+t[e+f],f+=h,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=n;l>0;s=256*s+t[e+f],f+=h,l-=8);if(0===o)o=1-c;else{if(o===u)return s?NaN:(p?-1:1)*(1/0);s+=Math.pow(2,n),o-=c}return(p?-1:1)*s*Math.pow(2,o-n)},r.write=function(t,e,r,n,i,o){var s,a,u,c=8*o-i-1,l=(1<<c)-1,f=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,d=n?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=l):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),e+=s+f>=1?h/u:h*Math.pow(2,1-f),e*u>=2&&(s++,u/=2),s+f>=l?(a=0,s=l):s+f>=1?(a=(e*u-1)*Math.pow(2,i),s+=f):(a=e*Math.pow(2,f-1)*Math.pow(2,i),s=0));i>=8;t[r+p]=255&a,p+=d,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;t[r+p]=255&s,p+=d,s/=256,c-=8);t[r+p-d]|=128*y}},{}],39:[function(t,e,r){"function"==typeof Object.create?e.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,
enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}},{}],40:[function(t,e,r){function n(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}function i(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&n(t.slice(0,0))}e.exports=function(t){return null!=t&&(n(t)||i(t)||!!t._isBuffer)}},{}],41:[function(t,e,r){var n={}.toString;e.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},{}],42:[function(t,e,r){(function(t){function r(t,e){return null==t?void 0:t[e]}function n(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(r){}return e}function i(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function o(){this.__data__=mt?mt(null):{}}function s(t){return this.has(t)&&delete this.__data__[t]}function a(t){var e=this.__data__;if(mt){var r=e[t];return r===z?void 0:r}return lt.call(e,t)?e[t]:void 0}function u(t){var e=this.__data__;return mt?void 0!==e[t]:lt.call(e,t)}function c(t,e){var r=this.__data__;return r[t]=mt&&void 0===e?z:e,this}function l(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function f(){this.__data__=[]}function h(t){var e=this.__data__,r=E(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():dt.call(e,r,1),!0}function p(t){var e=this.__data__,r=E(e,t);return r<0?void 0:e[r][1]}function d(t){return E(this.__data__,t)>-1}function y(t,e){var r=this.__data__,n=E(r,t);return n<0?r.push([t,e]):r[n][1]=e,this}function m(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function g(){this.__data__={hash:new i,map:new(yt||l),string:new i}}function v(t){return I(this,t)["delete"](t)}function _(t){return I(this,t).get(t)}function b(t){return I(this,t).has(t)}function w(t,e){return I(this,t).set(t,e),this}function E(t,e){for(var r=t.length;r--;)if(R(t[r][0],e))return r;return-1}function T(t,e){e=A(e,t)?[e]:O(e);for(var r=0,n=e.length;null!=t&&r<n;)t=t[L(e[r++])];return r&&r==n?t:void 0}function S(t){if(!U(t)||N(t))return!1;var e=M(t)||n(t)?ht:tt;return e.test(j(t))}function x(t){if("string"==typeof t)return t;if(q(t))return vt?vt.call(t):"";var e=t+"";return"0"==e&&1/t==-V?"-0":e}function O(t){return bt(t)?t:_t(t)}function I(t,e){var r=t.__data__;return C(e)?r["string"==typeof e?"string":"hash"]:r.map}function D(t,e){var n=r(t,e);return S(n)?n:void 0}function A(t,e){if(bt(t))return!1;var r=typeof t;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!q(t))||(Q.test(t)||!Y.test(t)||null!=e&&t in Object(e))}function C(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function N(t){return!!ut&&ut in t}function L(t){if("string"==typeof t||q(t))return t;var e=t+"";return"0"==e&&1/t==-V?"-0":e}function j(t){if(null!=t){try{return ct.call(t)}catch(e){}try{return t+""}catch(e){}}return""}function k(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new TypeError(X);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var s=t.apply(this,n);return r.cache=o.set(i,s),s};return r.cache=new(k.Cache||m),r}function R(t,e){return t===e||t!==t&&e!==e}function M(t){var e=U(t)?ft.call(t):"";return e==H||e==W}function U(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function P(t){return!!t&&"object"==typeof t}function q(t){return"symbol"==typeof t||P(t)&&ft.call(t)==G}function B(t){return null==t?"":x(t)}function F(t,e,r){var n=null==t?void 0:T(t,e);return void 0===n?r:n}var X="Expected a function",z="__lodash_hash_undefined__",V=1/0,H="[object Function]",W="[object GeneratorFunction]",G="[object Symbol]",Y=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Q=/^\w*$/,$=/^\./,J=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,K=/[\\^$.*+?()[\]{}|]/g,Z=/\\(\\)?/g,tt=/^\[object .+?Constructor\]$/,et="object"==typeof t&&t&&t.Object===Object&&t,rt="object"==typeof self&&self&&self.Object===Object&&self,nt=et||rt||Function("return this")(),it=Array.prototype,ot=Function.prototype,st=Object.prototype,at=nt["__core-js_shared__"],ut=function(){var t=/[^.]+$/.exec(at&&at.keys&&at.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),ct=ot.toString,lt=st.hasOwnProperty,ft=st.toString,ht=RegExp("^"+ct.call(lt).replace(K,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),pt=nt.Symbol,dt=it.splice,yt=D(nt,"Map"),mt=D(Object,"create"),gt=pt?pt.prototype:void 0,vt=gt?gt.toString:void 0;i.prototype.clear=o,i.prototype["delete"]=s,i.prototype.get=a,i.prototype.has=u,i.prototype.set=c,l.prototype.clear=f,l.prototype["delete"]=h,l.prototype.get=p,l.prototype.has=d,l.prototype.set=y,m.prototype.clear=g,m.prototype["delete"]=v,m.prototype.get=_,m.prototype.has=b,m.prototype.set=w;var _t=k(function(t){t=B(t);var e=[];return $.test(t)&&e.push(""),t.replace(J,function(t,r,n,i){e.push(n?i.replace(Z,"$1"):r||t)}),e});k.Cache=m;var bt=Array.isArray;e.exports=F}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],43:[function(e,r,n){(function(e){(function(){function i(t,e){return t.push.apply(t,e),t}function o(t,e,r,n){for(var i=t.length,o=r+(n?1:-1);n?o--:++o<i;)if(e(t[o],o,t))return o;return-1}function s(t){return function(e){return null==e?ne:e[t]}}function a(t){return function(e){return null==t?ne:t[e]}}function u(t,e,r,n,i){return i(t,function(t,i,o){r=n?(n=!1,t):e(r,t,i,o)}),r}function c(t,e){return C(e,function(e){return t[e]})}function l(t,e){return function(r){return t(e(r))}}function f(t){return t instanceof h?t:new h(t)}function h(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e}function p(t,e,r){var n=t[e];Ue.call(t,e)&&It(n,r)&&(r!==ne||e in t)||d(t,e,r)}function d(t,e,r){t[e]=r}function y(t,e,r){if("function"!=typeof t)throw new TypeError(oe);return setTimeout(function(){t.apply(ne,r)},e)}function m(t,e){var r=!0;return Ge(t,function(t,n,i){return r=!!e(t,n,i)}),r}function g(t,e,r){for(var n=-1,i=t.length;++n<i;){var o=t[n],s=e(o);if(null!=s&&(a===ne?s===s&&!0:r(s,a)))var a=s,u=o}return u}function v(t,e){var r=[];return Ge(t,function(t,n,i){e(t,n,i)&&r.push(t)}),r}function _(t,e,r,n,o){var s=-1,a=t.length;for(r||(r=$),o||(o=[]);++s<a;){var u=t[s];e>0&&r(u)?e>1?_(u,e-1,r,n,o):i(o,u):n||(o[o.length]=u)}return o}function b(t,e){return t&&Ye(t,e,lr)}function w(t,e){return v(e,function(e){return jt(t[e])})}function E(t){return tt(t)}function T(t,e){return t>e}function S(t){return Mt(t)&&E(t)==me}function x(t,e,r,n,i){return t===e||(null==t||null==e||!Mt(t)&&!Mt(e)?t!==t&&e!==e:O(t,e,r,n,x,i))}function O(t,e,r,n,i,o){var s=rr(t),a=rr(e),u=s?pe:E(t),c=a?pe:E(e);u=u==he?we:u,c=c==he?we:c;var l=u==we,f=c==we,h=u==c;o||(o=[]);var p=Je(o,function(e){return e[0]==t}),d=Je(o,function(t){return t[0]==e});if(p&&d)return p[1]==e;if(o.push([t,e]),o.push([e,t]),h&&!l){var y=s?W(t,e,r,n,i,o):G(t,e,u,r,n,i,o);return o.pop(),y}if(!(r&se)){var m=l&&Ue.call(t,"__wrapped__"),g=f&&Ue.call(e,"__wrapped__");if(m||g){var v=m?t.value():t,_=g?e.value():e,y=i(v,_,r,n,o);return o.pop(),y}}if(!h)return!1;var y=Y(t,e,r,n,i,o);return o.pop(),y}function I(t){return Mt(t)&&E(t)==Te}function D(t){return"function"==typeof t?t:null==t?Qt:("object"==typeof t?N:s)(t)}function A(t,e){return t<e}function C(t,e){var r=-1,n=Dt(t)?Array(t.length):[];return Ge(t,function(t,i,o){n[++r]=e(t,i,o)}),n}function N(t){var e=Ve(t);return function(r){var n=e.length;if(null==r)return!n;for(r=Object(r);n--;){var i=e[n];if(!(i in r&&x(t[i],r[i],se|ae)))return!1}return!0}}function L(t,e){return t=Object(t),_t(e,function(e,r){return r in t&&(e[r]=t[r]),e},{})}function j(t,e){return $e(et(t,e,Qt),t+"")}function k(t,e,r){var n=-1,i=t.length;e<0&&(e=-e>i?0:i+e),r=r>i?i:r,r<0&&(r+=i),i=e>r?0:r-e>>>0,e>>>=0;for(var o=Array(i);++n<i;)o[n]=t[n+e];return o}function R(t){return k(t,0,t.length)}function M(t,e){var r;return Ge(t,function(t,n,i){return r=e(t,n,i),!r}),!!r}function U(t,e){var r=t;return _t(e,function(t,e){return e.func.apply(e.thisArg,i([t],e.args))},r)}function P(t,e){if(t!==e){var r=t!==ne,n=null===t,i=t===t,o=!1,s=e!==ne,a=null===e,u=e===e,c=!1;if(!a&&!c&&!o&&t>e||o&&s&&u&&!a&&!c||n&&s&&u||!r&&u||!i)return 1;if(!n&&!o&&!c&&t<e||c&&r&&i&&!n&&!o||a&&r&&i||!s&&i||!u)return-1}return 0}function q(t,e,r,n){var i=!r;r||(r={});for(var o=-1,s=e.length;++o<s;){var a=e[o],u=n?n(r[a],t[a],a,r,t):ne;u===ne&&(u=t[a]),i?d(r,a,u):p(r,a,u)}return r}function B(t){return j(function(e,r){var n=-1,i=r.length,o=i>1?r[i-1]:ne;for(o=t.length>3&&"function"==typeof o?(i--,o):ne,e=Object(e);++n<i;){var s=r[n];s&&t(e,s,n,o)}return e})}function F(t,e){return function(r,n){if(null==r)return r;if(!Dt(r))return t(r,n);for(var i=r.length,o=e?i:-1,s=Object(r);(e?o--:++o<i)&&n(s[o],o,s)!==!1;);return r}}function X(t){return function(e,r,n){for(var i=-1,o=Object(e),s=n(e),a=s.length;a--;){var u=s[t?a:++i];if(r(o[u],u,o)===!1)break}return e}}function z(t){return function(){var e=arguments,r=We(t.prototype),n=t.apply(r,e);return Rt(n)?n:r}}function V(t){return function(e,r,n){var i=Object(e);if(!Dt(e)){var o=D(r,3);e=lr(e),r=function(t){return o(i[t],t,i)}}var s=t(e,r,n);return s>-1?i[o?e[s]:s]:ne}}function H(t,e,r,n){function i(){for(var e=-1,a=arguments.length,u=-1,c=n.length,l=Array(c+a),f=this&&this!==Ne&&this instanceof i?s:t;++u<c;)l[u]=n[u];for(;a--;)l[u++]=arguments[++e];return f.apply(o?r:this,l)}if("function"!=typeof t)throw new TypeError(oe);var o=e&ue,s=z(t);return i}function W(t,e,r,n,i,o){var s=r&se,a=t.length,u=e.length;if(a!=u&&!(s&&u>a))return!1;for(var c=-1,l=!0,f=r&ae?[]:ne;++c<a;){var h,p=t[c],d=e[c];if(h!==ne){if(h)continue;l=!1;break}if(f){if(!M(e,function(t,e){if(!ut(f,e)&&(p===t||i(p,t,r,n,o)))return f.push(e)})){l=!1;break}}else if(p!==d&&!i(p,d,r,n,o)){l=!1;break}}return l}function G(t,e,r,n,i,o,s){switch(r){case ye:case me:case be:return It(+t,+e);case ge:return t.name==e.name&&t.message==e.message;case Te:case Se:return t==e+""}return!1}function Y(t,e,r,n,i,o){var s=r&se,a=lr(t),u=a.length,c=lr(e),l=c.length;if(u!=l&&!s)return!1;for(var f=u;f--;){var h=a[f];if(!(s?h in e:Ue.call(e,h)))return!1}for(var p=!0,d=s;++f<u;){h=a[f];var y,m=t[h],g=e[h];if(!(y===ne?m===g||i(m,g,r,n,o):y)){p=!1;break}d||(d="constructor"==h)}if(p&&!d){var v=t.constructor,_=e.constructor;v!=_&&"constructor"in t&&"constructor"in e&&!("function"==typeof v&&v instanceof v&&"function"==typeof _&&_ instanceof _)&&(p=!1)}return p}function Q(t){return $e(et(t,ne,ot),t+"")}function $(t){return rr(t)||er(t)}function J(t,e){var r=typeof t;return e=null==e?fe:e,!!e&&("number"==r||"symbol"!=r&&Ie.test(t))&&t>-1&&t%1==0&&t<e}function K(t,e,r){if(!Rt(r))return!1;var n=typeof e;return!!("number"==n?Dt(r)&&J(e,r.length):"string"==n&&e in r)&&It(r[e],t)}function Z(t){var e=[];if(null!=t)for(var r in Object(t))e.push(r);return e}function tt(t){return qe.call(t)}function et(t,e,r){return e=He(e===ne?t.length-1:e,0),function(){for(var n=arguments,i=-1,o=He(n.length-e,0),s=Array(o);++i<o;)s[i]=n[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=n[i];return a[e]=r(s),t.apply(this,a)}}function rt(t){return v(t,Boolean)}function nt(){var t=arguments.length;if(!t)return[];for(var e=Array(t-1),r=arguments[0],n=t;n--;)e[n-1]=arguments[n];return i(rr(r)?R(r):[r],_(e,1))}function it(t,e,r){var n=null==t?0:t.length;if(!n)return-1;var i=null==r?0:or(r);return i<0&&(i=He(n+i,0)),o(t,D(e,3),i)}function ot(t){var e=null==t?0:t.length;return e?_(t,1):[]}function st(t){var e=null==t?0:t.length;return e?_(t,le):[]}function at(t){return t&&t.length?t[0]:ne}function ut(t,e,r){var n=null==t?0:t.length;r="number"==typeof r?r<0?He(n+r,0):r:0;for(var i=(r||0)-1,o=e===e;++i<n;){var s=t[i];if(o?s===e:s!==s)return i}return-1}function ct(t){var e=null==t?0:t.length;return e?t[e-1]:ne}function lt(t,e,r){var n=null==t?0:t.length;return e=null==e?0:+e,r=r===ne?n:+r,n?k(t,e,r):[]}function ft(t){var e=f(t);return e.__chain__=!0,e}function ht(t,e){return e(t),t}function pt(t,e){return e(t)}function dt(){return U(this.__wrapped__,this.__actions__)}function yt(t,e,r){return e=r?ne:e,m(t,D(e))}function mt(t,e){return v(t,D(e))}function gt(t,e){return Ge(t,D(e))}function vt(t,e){return C(t,D(e))}function _t(t,e,r){return u(t,D(e),r,arguments.length<3,Ge)}function bt(t){return null==t?0:(t=Dt(t)?t:Ve(t),t.length)}function wt(t,e,r){return e=r?ne:e,M(t,D(e))}function Et(t,e){var r=0;return e=D(e),C(C(t,function(t,n,i){return{value:t,index:r++,criteria:e(t,n,i)}}).sort(function(t,e){return P(t.criteria,e.criteria)||t.index-e.index}),s("value"))}function Tt(t,e){var r;if("function"!=typeof e)throw new TypeError(oe);return t=or(t),function(){return--t>0&&(r=e.apply(this,arguments)),t<=1&&(e=ne),r}}function St(t){if("function"!=typeof t)throw new TypeError(oe);return function(){var e=arguments;return!t.apply(this,e)}}function xt(t){return Tt(2,t)}function Ot(t){return Rt(t)?rr(t)?R(t):q(t,Ve(t)):t}function It(t,e){return t===e||t!==t&&e!==e}function Dt(t){return null!=t&&kt(t.length)&&!jt(t)}function At(t){return t===!0||t===!1||Mt(t)&&E(t)==ye}function Ct(t){return Dt(t)&&(rr(t)||Bt(t)||jt(t.splice)||er(t))?!t.length:!Ve(t).length}function Nt(t,e){return x(t,e)}function Lt(t){return"number"==typeof t&&ze(t)}function jt(t){if(!Rt(t))return!1;var e=E(t);return e==ve||e==_e||e==de||e==Ee}function kt(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=fe}function Rt(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Mt(t){return null!=t&&"object"==typeof t}function Ut(t){return qt(t)&&t!=+t}function Pt(t){return null===t}function qt(t){return"number"==typeof t||Mt(t)&&E(t)==be}function Bt(t){return"string"==typeof t||!rr(t)&&Mt(t)&&E(t)==Se}function Ft(t){return t===ne}function Xt(t){return Dt(t)?t.length?R(t):[]:Gt(t)}function zt(t){return"string"==typeof t?t:null==t?"":t+""}function Vt(t,e){var r=We(t);return null==e?r:ar(r,e)}function Ht(t,e){return null!=t&&Ue.call(t,e)}function Wt(t,e,r){var n=null==t?ne:t[e];return n===ne&&(n=r),jt(n)?n.call(t):n}function Gt(t){return null==t?[]:c(t,lr(t))}function Yt(t){return t=zt(t),t&&Oe.test(t)?t.replace(xe,ke):t}function Qt(t){return t}function $t(t){return N(ar({},t))}function Jt(t,e,r){var n=lr(e),o=w(e,n);null!=r||Rt(e)&&(o.length||!n.length)||(r=e,e=t,t=this,o=w(e,lr(e)));var s=!(Rt(r)&&"chain"in r&&!r.chain),a=jt(t);return Ge(o,function(r){var n=e[r];t[r]=n,a&&(t.prototype[r]=function(){var e=this.__chain__;if(s||e){var r=t(this.__wrapped__),o=r.__actions__=R(this.__actions__);return o.push({func:n,args:arguments,thisArg:t}),r.__chain__=e,r}return n.apply(t,i([this.value()],arguments))})}),t}function Kt(){return Ne._===this&&(Ne._=Be),this}function Zt(){}function te(t){var e=++Pe;return zt(t)+e}function ee(t){return t&&t.length?g(t,Qt,T):ne}function re(t){return t&&t.length?g(t,Qt,A):ne}var ne,ie="4.17.14",oe="Expected a function",se=1,ae=2,ue=1,ce=32,le=1/0,fe=9007199254740991,he="[object Arguments]",pe="[object Array]",de="[object AsyncFunction]",ye="[object Boolean]",me="[object Date]",ge="[object Error]",ve="[object Function]",_e="[object GeneratorFunction]",be="[object Number]",we="[object Object]",Ee="[object Proxy]",Te="[object RegExp]",Se="[object String]",xe=/[&<>"']/g,Oe=RegExp(xe.source),Ie=/^(?:0|[1-9]\d*)$/,De={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Ae="object"==typeof e&&e&&e.Object===Object&&e,Ce="object"==typeof self&&self&&self.Object===Object&&self,Ne=Ae||Ce||Function("return this")(),Le="object"==typeof n&&n&&!n.nodeType&&n,je=Le&&"object"==typeof r&&r&&!r.nodeType&&r,ke=a(De),Re=Array.prototype,Me=Object.prototype,Ue=Me.hasOwnProperty,Pe=0,qe=Me.toString,Be=Ne._,Fe=Object.create,Xe=Me.propertyIsEnumerable,ze=Ne.isFinite,Ve=l(Object.keys,Object),He=Math.max,We=function(){function t(){}return function(e){if(!Rt(e))return{};if(Fe)return Fe(e);t.prototype=e;var r=new t;return t.prototype=ne,r}}();h.prototype=We(f.prototype),h.prototype.constructor=h;var Ge=F(b),Ye=X(),Qe=Zt,$e=Qt,Je=V(it),Ke=j(function(t,e,r){return H(t,ue|ce,e,r)}),Ze=j(function(t,e){return y(t,1,e)}),tr=j(function(t,e,r){return y(t,sr(e)||0,r)}),er=Qe(function(){return arguments}())?Qe:function(t){return Mt(t)&&Ue.call(t,"callee")&&!Xe.call(t,"callee")},rr=Array.isArray,nr=S,ir=I,or=Number,sr=Number,ar=B(function(t,e){q(e,Ve(e),t)}),ur=B(function(t,e){q(e,Z(e),t)}),cr=j(function(t,e){t=Object(t);var r=-1,n=e.length,i=n>2?e[2]:ne;for(i&&K(e[0],e[1],i)&&(n=1);++r<n;)for(var o=e[r],s=fr(o),a=-1,u=s.length;++a<u;){var c=s[a],l=t[c];(l===ne||It(l,Me[c])&&!Ue.call(t,c))&&(t[c]=o[c])}return t}),lr=Ve,fr=Z,hr=Q(function(t,e){return null==t?{}:L(t,e)}),pr=D;f.assignIn=ur,f.before=Tt,f.bind=Ke,f.chain=ft,f.compact=rt,f.concat=nt,f.create=Vt,f.defaults=cr,f.defer=Ze,f.delay=tr,f.filter=mt,f.flatten=ot,f.flattenDeep=st,f.iteratee=pr,f.keys=lr,f.map=vt,f.matches=$t,f.mixin=Jt,f.negate=St,f.once=xt,f.pick=hr,f.slice=lt,f.sortBy=Et,f.tap=ht,f.thru=pt,f.toArray=Xt,f.values=Gt,f.extend=ur,Jt(f,f),f.clone=Ot,f.escape=Yt,f.every=yt,f.find=Je,f.forEach=gt,f.has=Ht,f.head=at,f.identity=Qt,f.indexOf=ut,f.isArguments=er,f.isArray=rr,f.isBoolean=At,f.isDate=nr,f.isEmpty=Ct,f.isEqual=Nt,f.isFinite=Lt,f.isFunction=jt,f.isNaN=Ut,f.isNull=Pt,f.isNumber=qt,f.isObject=Rt,f.isRegExp=ir,f.isString=Bt,f.isUndefined=Ft,f.last=ct,f.max=ee,f.min=re,f.noConflict=Kt,f.noop=Zt,f.reduce=_t,f.result=Wt,f.size=bt,f.some=wt,f.uniqueId=te,f.each=gt,f.first=at,Jt(f,function(){var t={};return b(f,function(e,r){Ue.call(f.prototype,r)||(t[r]=e)}),t}(),{chain:!1}),f.VERSION=ie,Ge(["pop","join","replace","reverse","split","push","shift","sort","splice","unshift"],function(t){var e=(/^(?:replace|split)$/.test(t)?String.prototype:Re)[t],r=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",n=/^(?:pop|join|replace|shift)$/.test(t);f.prototype[t]=function(){var t=arguments;if(n&&!this.__chain__){var i=this.value();return e.apply(rr(i)?i:[],t)}return this[r](function(r){return e.apply(rr(r)?r:[],t)})}}),f.prototype.toJSON=f.prototype.valueOf=f.prototype.value=dt,"function"==typeof t&&"object"==typeof t.amd&&t.amd?(Ne._=f,t(function(){return f})):je?((je.exports=f)._=f,Le._=f):Ne._=f}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],44:[function(t,e,r){function n(t,e){var r=this;return r instanceof n?(u.Readable.call(r,e),r.destroyed=!1,r._drained=!1,r._forwarding=!1,r._current=null,r._toStreams2=e&&e.objectMode?i:o,"function"==typeof t?r._queue=t:(r._queue=t.map(r._toStreams2),r._queue.forEach(function(t){"function"!=typeof t&&r._attachErrorListener(t)})),void r._next()):new n(t,e)}function i(t){return s(t,{objectMode:!0,highWaterMark:16})}function o(t){return s(t)}function s(t,e){if(!t||"function"==typeof t||t._readableState)return t;var r=new u.Readable(e).wrap(t);return t.destroy&&(r.destroy=t.destroy.bind(t)),r}e.exports=n;var a=t("inherits"),u=t("readable-stream");a(n,u.Readable),n.obj=function(t){return new n(t,{objectMode:!0,highWaterMark:16})},n.prototype._read=function(){this._drained=!0,this._forward()},n.prototype._forward=function(){if(!this._forwarding&&this._drained&&this._current){this._forwarding=!0;for(var t;null!==(t=this._current.read());)this._drained=this.push(t);this._forwarding=!1}},n.prototype.destroy=function(t){this.destroyed||(this.destroyed=!0,this._current&&this._current.destroy&&this._current.destroy(),"function"!=typeof this._queue&&this._queue.forEach(function(t){t.destroy&&t.destroy()}),t&&this.emit("error",t),this.emit("close"))},n.prototype._next=function(){var t=this;if(t._current=null,"function"==typeof t._queue)t._queue(function(e,r){return e?t.destroy(e):(r=t._toStreams2(r),t._attachErrorListener(r),void t._gotNextStream(r))});else{var e=t._queue.shift();"function"==typeof e&&(e=t._toStreams2(e()),t._attachErrorListener(e)),t._gotNextStream(e)}},n.prototype._gotNextStream=function(t){function e(){i._forward()}function r(){t._readableState.ended||i.destroy()}function n(){i._current=null,t.removeListener("readable",e),t.removeListener("end",n),t.removeListener("close",r),i._next()}var i=this;return t?(i._current=t,i._forward(),t.on("readable",e),t.once("end",n),void t.once("close",r)):(i.push(null),void i.destroy())},n.prototype._attachErrorListener=function(t){function e(n){t.removeListener("error",e),r.destroy(n)}var r=this;t&&t.once("error",e)}},{inherits:39,"readable-stream":62}],45:[function(t,e,r){(function(t){"use strict";function r(e,r,n,i){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var o,s,a=arguments.length;switch(a){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick(function(){e.call(null,r)});case 3:return t.nextTick(function(){e.call(null,r,n)});case 4:return t.nextTick(function(){e.call(null,r,n,i)});default:for(o=new Array(a-1),s=0;s<o.length;)o[s++]=arguments[s];return t.nextTick(function(){e.apply(null,o)})}}!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?e.exports={nextTick:r}:e.exports=t}).call(this,t("_process"))},{_process:46}],46:[function(t,e,r){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(t){if(f===setTimeout)return setTimeout(t,0);if((f===n||!f)&&setTimeout)return f=setTimeout,setTimeout(t,0);try{return f(t,0)}catch(e){try{return f.call(null,t,0)}catch(e){return f.call(this,t,0)}}}function s(t){if(h===clearTimeout)return clearTimeout(t);if((h===i||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(t);try{return h(t)}catch(e){try{return h.call(null,t)}catch(e){return h.call(this,t)}}}function a(){m&&d&&(m=!1,d.length?y=d.concat(y):g=-1,y.length&&u())}function u(){if(!m){var t=o(a);m=!0;for(var e=y.length;e;){for(d=y,y=[];++g<e;)d&&d[g].run();g=-1,e=y.length}d=null,m=!1,s(t)}}function c(t,e){this.fun=t,this.array=e}function l(){}var f,h,p=e.exports={};!function(){try{f="function"==typeof setTimeout?setTimeout:n}catch(t){f=n}try{h="function"==typeof clearTimeout?clearTimeout:i}catch(t){h=i}}();var d,y=[],m=!1,g=-1;p.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];y.push(new c(t,e)),1!==y.length||m||o(u)},c.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=l,p.addListener=l,p.once=l,p.off=l,p.removeListener=l,p.removeAllListeners=l,p.emit=l,p.prependListener=l,p.prependOnceListener=l,p.listeners=function(t){return[]},p.binding=function(t){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(t){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},{}],47:[function(t,e,r){"use strict";function n(){}function i(t){try{return t.then}catch(e){return g=e,v}}function o(t,e){try{return t(e)}catch(r){return g=r,v}}function s(t,e,r){try{t(e,r)}catch(n){return g=n,v}}function a(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("Promise constructor's argument is not a function");this._40=0,this._65=0,this._55=null,this._72=null,t!==n&&y(t,this)}function u(t,e,r){return new t.constructor(function(i,o){var s=new a(n);s.then(i,o),c(t,new d(e,r,s))})}function c(t,e){for(;3===t._65;)t=t._55;return a._37&&a._37(t),0===t._65?0===t._40?(t._40=1,void(t._72=e)):1===t._40?(t._40=2,void(t._72=[t._72,e])):void t._72.push(e):void l(t,e)}function l(t,e){m(function(){var r=1===t._65?e.onFulfilled:e.onRejected;if(null===r)return void(1===t._65?f(e.promise,t._55):h(e.promise,t._55));var n=o(r,t._55);n===v?h(e.promise,g):f(e.promise,n)})}function f(t,e){if(e===t)return h(t,new TypeError("A promise cannot be resolved with itself."));if(e&&("object"==typeof e||"function"==typeof e)){var r=i(e);if(r===v)return h(t,g);if(r===t.then&&e instanceof a)return t._65=3,t._55=e,void p(t);if("function"==typeof r)return void y(r.bind(e),t)}t._65=1,t._55=e,p(t)}function h(t,e){t._65=2,t._55=e,a._87&&a._87(t,e),p(t)}function p(t){if(1===t._40&&(c(t,t._72),t._72=null),2===t._40){for(var e=0;e<t._72.length;e++)c(t,t._72[e]);t._72=null}}function d(t,e,r){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=r}function y(t,e){var r=!1,n=s(t,function(t){r||(r=!0,f(e,t))},function(t){r||(r=!0,h(e,t))});r||n!==v||(r=!0,h(e,g))}var m=t("asap/raw"),g=null,v={};e.exports=a,a._37=null,a._87=null,a._61=n,a.prototype.then=function(t,e){if(this.constructor!==a)return u(this,t,e);var r=new a(n);return c(this,new d(t,e,r)),r}},{"asap/raw":27}],48:[function(t,e,r){"use strict";function n(t){var e=new i(i._61);return e._65=1,e._55=t,e}var i=t("./core.js");e.exports=i;var o=n(!0),s=n(!1),a=n(null),u=n(void 0),c=n(0),l=n("");i.resolve=function(t){if(t instanceof i)return t;if(null===t)return a;if(void 0===t)return u;if(t===!0)return o;if(t===!1)return s;if(0===t)return c;if(""===t)return l;if("object"==typeof t||"function"==typeof t)try{var e=t.then;if("function"==typeof e)return new i(e.bind(t))}catch(r){return new i(function(t,e){e(r)})}return n(t)},i.all=function(t){var e=Array.prototype.slice.call(t);return new i(function(t,r){function n(s,a){if(a&&("object"==typeof a||"function"==typeof a)){if(a instanceof i&&a.then===i.prototype.then){for(;3===a._65;)a=a._55;return 1===a._65?n(s,a._55):(2===a._65&&r(a._55),void a.then(function(t){n(s,t)},r))}var u=a.then;if("function"==typeof u){var c=new i(u.bind(a));return void c.then(function(t){n(s,t)},r)}}e[s]=a,0===--o&&t(e)}if(0===e.length)return t([]);for(var o=e.length,s=0;s<e.length;s++)n(s,e[s])})},i.reject=function(t){return new i(function(e,r){r(t)})},i.race=function(t){return new i(function(e,r){t.forEach(function(t){i.resolve(t).then(e,r)})})},i.prototype["catch"]=function(t){return this.then(null,t)}},{"./core.js":47}],49:[function(t,e,r){"use strict";function n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.exports=function(t,e,r,o){e=e||"&",r=r||"=";var s={};if("string"!=typeof t||0===t.length)return s;var a=/\+/g;t=t.split(e);var u=1e3;o&&"number"==typeof o.maxKeys&&(u=o.maxKeys);var c=t.length;u>0&&c>u&&(c=u);for(var l=0;l<c;++l){var f,h,p,d,y=t[l].replace(a,"%20"),m=y.indexOf(r);m>=0?(f=y.substr(0,m),h=y.substr(m+1)):(f=y,h=""),p=decodeURIComponent(f),d=decodeURIComponent(h),n(s,p)?i(s[p])?s[p].push(d):s[p]=[s[p],d]:s[p]=d}return s};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},{}],50:[function(t,e,r){"use strict";function n(t,e){if(t.map)return t.map(e);for(var r=[],n=0;n<t.length;n++)r.push(e(t[n],n));return r}var i=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};e.exports=function(t,e,r,a){return e=e||"&",r=r||"=",null===t&&(t=void 0),"object"==typeof t?n(s(t),function(s){var a=encodeURIComponent(i(s))+r;return o(t[s])?n(t[s],function(t){return a+encodeURIComponent(i(t))}).join(e):a+encodeURIComponent(i(t[s]))}).join(e):a?encodeURIComponent(i(a))+r+encodeURIComponent(i(t)):""};var o=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},s=Object.keys||function(t){var e=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.push(r);return e}},{}],51:[function(t,e,r){"use strict";r.decode=r.parse=t("./decode"),r.encode=r.stringify=t("./encode")},{"./decode":49,"./encode":50}],52:[function(t,e,r){e.exports=t("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":53}],53:[function(t,e,r){"use strict";function n(t){return this instanceof n?(c.call(this,t),l.call(this,t),t&&t.readable===!1&&(this.readable=!1),t&&t.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,t&&t.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",i)):new n(t)}function i(){this.allowHalfOpen||this._writableState.ended||s.nextTick(o,this)}function o(t){t.end()}var s=t("process-nextick-args"),a=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};e.exports=n;var u=t("core-util-is");u.inherits=t("inherits");var c=t("./_stream_readable"),l=t("./_stream_writable");u.inherits(n,c);for(var f=a(l.prototype),h=0;h<f.length;h++){var p=f[h];n.prototype[p]||(n.prototype[p]=l.prototype[p])}Object.defineProperty(n.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(n.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),n.prototype._destroy=function(t,e){this.push(null),this.end(),s.nextTick(e,t)}},{"./_stream_readable":55,"./_stream_writable":57,"core-util-is":31,inherits:39,"process-nextick-args":45}],54:[function(t,e,r){"use strict";function n(t){return this instanceof n?void i.call(this,t):new n(t)}e.exports=n;var i=t("./_stream_transform"),o=t("core-util-is");o.inherits=t("inherits"),o.inherits(n,i),n.prototype._transform=function(t,e,r){r(null,t)}},{"./_stream_transform":56,"core-util-is":31,inherits:39}],55:[function(t,e,r){(function(r,n){"use strict";function i(t){return U.from(t)}function o(t){return U.isBuffer(t)||t instanceof P}function s(t,e,r){return"function"==typeof t.prependListener?t.prependListener(e,r):void(t._events&&t._events[e]?k(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]:t.on(e,r))}function a(e,r){j=j||t("./_stream_duplex"),e=e||{};var n=r instanceof j;this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var i=e.highWaterMark,o=e.readableHighWaterMark,s=this.objectMode?16:16384;i||0===i?this.highWaterMark=i:n&&(o||0===o)?this.highWaterMark=o:this.highWaterMark=s,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new z,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(X||(X=t("string_decoder/").StringDecoder),this.decoder=new X(e.encoding),this.encoding=e.encoding)}function u(e){return j=j||t("./_stream_duplex"),this instanceof u?(this._readableState=new a(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),void M.call(this)):new u(e)}function c(t,e,r,n,o){var s=t._readableState;if(null===e)s.reading=!1,y(t,s);else{var a;o||(a=f(s,e)),a?t.emit("error",a):s.objectMode||e&&e.length>0?("string"==typeof e||s.objectMode||Object.getPrototypeOf(e)===U.prototype||(e=i(e)),n?s.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):l(t,s,e,!0):s.ended?t.emit("error",new Error("stream.push() after EOF")):(s.reading=!1,s.decoder&&!r?(e=s.decoder.write(e),s.objectMode||0!==e.length?l(t,s,e,!1):v(t,s)):l(t,s,e,!1))):n||(s.reading=!1)}return h(s)}function l(t,e,r,n){e.flowing&&0===e.length&&!e.sync?(t.emit("data",r),t.read(0)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&m(t)),v(t,e)}function f(t,e){var r;return o(e)||"string"==typeof e||void 0===e||t.objectMode||(r=new TypeError("Invalid non-string/buffer chunk")),r}function h(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}function p(t){return t>=W?t=W:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function d(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=p(t)),
t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function y(t,e){if(!e.ended){if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,m(t)}}function m(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(F("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?L.nextTick(g,t):g(t))}function g(t){F("emit readable"),t.emit("readable"),S(t)}function v(t,e){e.readingMore||(e.readingMore=!0,L.nextTick(_,t,e))}function _(t,e){for(var r=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(F("maybeReadMore read 0"),t.read(0),r!==e.length);)r=e.length;e.readingMore=!1}function b(t){return function(){var e=t._readableState;F("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&R(t,"data")&&(e.flowing=!0,S(t))}}function w(t){F("readable nexttick read 0"),t.read(0)}function E(t,e){e.resumeScheduled||(e.resumeScheduled=!0,L.nextTick(T,t,e))}function T(t,e){e.reading||(F("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),S(t),e.flowing&&!e.reading&&t.read(0)}function S(t){var e=t._readableState;for(F("flow",e.flowing);e.flowing&&null!==t.read(););}function x(t,e){if(0===e.length)return null;var r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(r=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):r=O(t,e.buffer,e.decoder),r}function O(t,e,r){var n;return t<e.head.data.length?(n=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):n=t===e.head.data.length?e.shift():r?I(t,e):D(t,e),n}function I(t,e){var r=e.head,n=1,i=r.data;for(t-=i.length;r=r.next;){var o=r.data,s=t>o.length?o.length:t;if(i+=s===o.length?o:o.slice(0,t),t-=s,0===t){s===o.length?(++n,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r,r.data=o.slice(s));break}++n}return e.length-=n,i}function D(t,e){var r=U.allocUnsafe(t),n=e.head,i=1;for(n.data.copy(r),t-=n.data.length;n=n.next;){var o=n.data,s=t>o.length?o.length:t;if(o.copy(r,r.length-t,0,s),t-=s,0===t){s===o.length?(++i,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=o.slice(s));break}++i}return e.length-=i,r}function A(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,L.nextTick(C,e,t))}function C(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function N(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}var L=t("process-nextick-args");e.exports=u;var j,k=t("isarray");u.ReadableState=a;var R=(t("events").EventEmitter,function(t,e){return t.listeners(e).length}),M=t("./internal/streams/stream"),U=t("safe-buffer").Buffer,P=n.Uint8Array||function(){},q=t("core-util-is");q.inherits=t("inherits");var B=t("util"),F=void 0;F=B&&B.debuglog?B.debuglog("stream"):function(){};var X,z=t("./internal/streams/BufferList"),V=t("./internal/streams/destroy");q.inherits(u,M);var H=["error","close","destroy","pause","resume"];Object.defineProperty(u.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),u.prototype.destroy=V.destroy,u.prototype._undestroy=V.undestroy,u.prototype._destroy=function(t,e){this.push(null),e(t)},u.prototype.push=function(t,e){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof t&&(e=e||n.defaultEncoding,e!==n.encoding&&(t=U.from(t,e),e=""),r=!0),c(this,t,e,!1,r)},u.prototype.unshift=function(t){return c(this,t,null,!0,!1)},u.prototype.isPaused=function(){return this._readableState.flowing===!1},u.prototype.setEncoding=function(e){return X||(X=t("string_decoder/").StringDecoder),this._readableState.decoder=new X(e),this._readableState.encoding=e,this};var W=8388608;u.prototype.read=function(t){F("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return F("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?A(this):m(this),null;if(t=d(t,e),0===t&&e.ended)return 0===e.length&&A(this),null;var n=e.needReadable;F("need readable",n),(0===e.length||e.length-t<e.highWaterMark)&&(n=!0,F("length less than watermark",n)),e.ended||e.reading?(n=!1,F("reading or ended",n)):n&&(F("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=d(r,e)));var i;return i=t>0?x(t,e):null,null===i?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&A(this)),null!==i&&this.emit("data",i),i},u.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))},u.prototype.pipe=function(t,e){function n(t,e){F("onunpipe"),t===h&&e&&e.hasUnpiped===!1&&(e.hasUnpiped=!0,o())}function i(){F("onend"),t.end()}function o(){F("cleanup"),t.removeListener("close",c),t.removeListener("finish",l),t.removeListener("drain",m),t.removeListener("error",u),t.removeListener("unpipe",n),h.removeListener("end",i),h.removeListener("end",f),h.removeListener("data",a),g=!0,!p.awaitDrain||t._writableState&&!t._writableState.needDrain||m()}function a(e){F("ondata"),v=!1;var r=t.write(e);!1!==r||v||((1===p.pipesCount&&p.pipes===t||p.pipesCount>1&&N(p.pipes,t)!==-1)&&!g&&(F("false write response, pause",h._readableState.awaitDrain),h._readableState.awaitDrain++,v=!0),h.pause())}function u(e){F("onerror",e),f(),t.removeListener("error",u),0===R(t,"error")&&t.emit("error",e)}function c(){t.removeListener("finish",l),f()}function l(){F("onfinish"),t.removeListener("close",c),f()}function f(){F("unpipe"),h.unpipe(t)}var h=this,p=this._readableState;switch(p.pipesCount){case 0:p.pipes=t;break;case 1:p.pipes=[p.pipes,t];break;default:p.pipes.push(t)}p.pipesCount+=1,F("pipe count=%d opts=%j",p.pipesCount,e);var d=(!e||e.end!==!1)&&t!==r.stdout&&t!==r.stderr,y=d?i:f;p.endEmitted?L.nextTick(y):h.once("end",y),t.on("unpipe",n);var m=b(h);t.on("drain",m);var g=!1,v=!1;return h.on("data",a),s(t,"error",u),t.once("close",c),t.once("finish",l),t.emit("pipe",h),p.flowing||(F("pipe resume"),h.resume()),t},u.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r),this);if(!t){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,r);return this}var s=N(e.pipes,t);return s===-1?this:(e.pipes.splice(s,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r),this)},u.prototype.on=function(t,e){var r=M.prototype.on.call(this,t,e);if("data"===t)this._readableState.flowing!==!1&&this.resume();else if("readable"===t){var n=this._readableState;n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&m(this):L.nextTick(w,this))}return r},u.prototype.addListener=u.prototype.on,u.prototype.resume=function(){var t=this._readableState;return t.flowing||(F("resume"),t.flowing=!0,E(this,t)),this},u.prototype.pause=function(){return F("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(F("pause"),this._readableState.flowing=!1,this.emit("pause")),this},u.prototype.wrap=function(t){var e=this,r=this._readableState,n=!1;t.on("end",function(){if(F("wrapped end"),r.decoder&&!r.ended){var t=r.decoder.end();t&&t.length&&e.push(t)}e.push(null)}),t.on("data",function(i){if(F("wrapped data"),r.decoder&&(i=r.decoder.write(i)),(!r.objectMode||null!==i&&void 0!==i)&&(r.objectMode||i&&i.length)){var o=e.push(i);o||(n=!0,t.pause())}});for(var i in t)void 0===this[i]&&"function"==typeof t[i]&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));for(var o=0;o<H.length;o++)t.on(H[o],this.emit.bind(this,H[o]));return this._read=function(e){F("wrapped _read",e),n&&(n=!1,t.resume())},this},Object.defineProperty(u.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),u._fromList=x}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./_stream_duplex":53,"./internal/streams/BufferList":58,"./internal/streams/destroy":59,"./internal/streams/stream":60,_process:46,"core-util-is":31,events:37,inherits:39,isarray:41,"process-nextick-args":45,"safe-buffer":65,"string_decoder/":68,util:29}],56:[function(t,e,r){"use strict";function n(t,e){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,null!=e&&this.push(e),n(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function i(t){return this instanceof i?(a.call(this,t),this._transformState={afterTransform:n.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),void this.on("prefinish",o)):new i(t)}function o(){var t=this;"function"==typeof this._flush?this._flush(function(e,r){s(t,e,r)}):s(this,null,null)}function s(t,e,r){if(e)return t.emit("error",e);if(null!=r&&t.push(r),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}e.exports=i;var a=t("./_stream_duplex"),u=t("core-util-is");u.inherits=t("inherits"),u.inherits(i,a),i.prototype.push=function(t,e){return this._transformState.needTransform=!1,a.prototype.push.call(this,t,e)},i.prototype._transform=function(t,e,r){throw new Error("_transform() is not implemented")},i.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},i.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},i.prototype._destroy=function(t,e){var r=this;a.prototype._destroy.call(this,t,function(t){e(t),r.emit("close")})}},{"./_stream_duplex":53,"core-util-is":31,inherits:39}],57:[function(t,e,r){(function(r,n,i){"use strict";function o(t){var e=this;this.next=null,this.entry=null,this.finish=function(){I(e,t)}}function s(t){return k.from(t)}function a(t){return k.isBuffer(t)||t instanceof R}function u(){}function c(e,r){A=A||t("./_stream_duplex"),e=e||{};var n=r instanceof A;this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var i=e.highWaterMark,s=e.writableHighWaterMark,a=this.objectMode?16:16384;i||0===i?this.highWaterMark=i:n&&(s||0===s)?this.highWaterMark=s:this.highWaterMark=a,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var u=e.decodeStrings===!1;this.decodeStrings=!u,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){v(r,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function l(e){return A=A||t("./_stream_duplex"),U.call(l,this)||this instanceof A?(this._writableState=new c(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e["final"]&&(this._final=e["final"])),void j.call(this)):new l(e)}function f(t,e){var r=new Error("write after end");t.emit("error",r),D.nextTick(e,r)}function h(t,e,r,n){var i=!0,o=!1;return null===r?o=new TypeError("May not write null values to stream"):"string"==typeof r||void 0===r||e.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(t.emit("error",o),D.nextTick(n,o),i=!1),i}function p(t,e,r){return t.objectMode||t.decodeStrings===!1||"string"!=typeof e||(e=k.from(e,r)),e}function d(t,e,r,n,i,o){if(!r){var s=p(e,n,i);n!==s&&(r=!0,i="buffer",n=s)}var a=e.objectMode?1:n.length;e.length+=a;var u=e.length<e.highWaterMark;if(u||(e.needDrain=!0),e.writing||e.corked){var c=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},c?c.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else y(t,e,!1,a,n,i,o);return u}function y(t,e,r,n,i,o,s){e.writelen=n,e.writecb=s,e.writing=!0,e.sync=!0,r?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function m(t,e,r,n,i){--e.pendingcb,r?(D.nextTick(i,n),D.nextTick(x,t,e),t._writableState.errorEmitted=!0,t.emit("error",n)):(i(n),t._writableState.errorEmitted=!0,t.emit("error",n),x(t,e))}function g(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function v(t,e){var r=t._writableState,n=r.sync,i=r.writecb;if(g(r),e)m(t,r,n,e,i);else{var o=E(r);o||r.corked||r.bufferProcessing||!r.bufferedRequest||w(t,r),n?C(_,t,r,o,i):_(t,r,o,i)}}function _(t,e,r,n){r||b(t,e),e.pendingcb--,n(),x(t,e)}function b(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function w(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,i=new Array(n),s=e.corkedRequestsFree;s.entry=r;for(var a=0,u=!0;r;)i[a]=r,r.isBuf||(u=!1),r=r.next,a+=1;i.allBuffers=u,y(t,e,!0,e.length,i,"",s.finish),e.pendingcb++,e.lastBufferedRequest=null,s.next?(e.corkedRequestsFree=s.next,s.next=null):e.corkedRequestsFree=new o(e),e.bufferedRequestCount=0}else{for(;r;){var c=r.chunk,l=r.encoding,f=r.callback,h=e.objectMode?1:c.length;if(y(t,e,!1,h,c,l,f),r=r.next,e.bufferedRequestCount--,e.writing)break}null===r&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}function E(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function T(t,e){t._final(function(r){e.pendingcb--,r&&t.emit("error",r),e.prefinished=!0,t.emit("prefinish"),x(t,e)})}function S(t,e){e.prefinished||e.finalCalled||("function"==typeof t._final?(e.pendingcb++,e.finalCalled=!0,D.nextTick(T,t,e)):(e.prefinished=!0,t.emit("prefinish")))}function x(t,e){var r=E(e);return r&&(S(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"))),r}function O(t,e,r){e.ending=!0,x(t,e),r&&(e.finished?D.nextTick(r):t.once("finish",r)),e.ended=!0,t.writable=!1}function I(t,e,r){var n=t.entry;for(t.entry=null;n;){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}var D=t("process-nextick-args");e.exports=l;var A,C=!r.browser&&["v0.10","v0.9."].indexOf(r.version.slice(0,5))>-1?i:D.nextTick;l.WritableState=c;var N=t("core-util-is");N.inherits=t("inherits");var L={deprecate:t("util-deprecate")},j=t("./internal/streams/stream"),k=t("safe-buffer").Buffer,R=n.Uint8Array||function(){},M=t("./internal/streams/destroy");N.inherits(l,j),c.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(c.prototype,"buffer",{get:L.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}();var U;"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(U=Function.prototype[Symbol.hasInstance],Object.defineProperty(l,Symbol.hasInstance,{value:function(t){return!!U.call(this,t)||this===l&&(t&&t._writableState instanceof c)}})):U=function(t){return t instanceof this},l.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},l.prototype.write=function(t,e,r){var n=this._writableState,i=!1,o=!n.objectMode&&a(t);return o&&!k.isBuffer(t)&&(t=s(t)),"function"==typeof e&&(r=e,e=null),o?e="buffer":e||(e=n.defaultEncoding),"function"!=typeof r&&(r=u),n.ended?f(this,r):(o||h(this,n,t,r))&&(n.pendingcb++,i=d(this,n,o,t,e,r)),i},l.prototype.cork=function(){var t=this._writableState;t.corked++},l.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||w(this,t))},l.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),l.prototype._write=function(t,e,r){r(new Error("_write() is not implemented"))},l.prototype._writev=null,l.prototype.end=function(t,e,r){var n=this._writableState;"function"==typeof t?(r=t,t=null,e=null):"function"==typeof e&&(r=e,e=null),null!==t&&void 0!==t&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||O(this,n,r)},Object.defineProperty(l.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),l.prototype.destroy=M.destroy,l.prototype._undestroy=M.undestroy,l.prototype._destroy=function(t,e){this.end(),e(t)}}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("timers").setImmediate)},{"./_stream_duplex":53,"./internal/streams/destroy":59,"./internal/streams/stream":60,_process:46,"core-util-is":31,inherits:39,"process-nextick-args":45,"safe-buffer":65,timers:69,"util-deprecate":70}],58:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e,r){t.copy(e,r)}var o=t("safe-buffer").Buffer,s=t("util");e.exports=function(){function t(){n(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},t.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},t.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,r=""+e.data;e=e.next;)r+=t+e.data;return r},t.prototype.concat=function(t){if(0===this.length)return o.alloc(0);if(1===this.length)return this.head.data;for(var e=o.allocUnsafe(t>>>0),r=this.head,n=0;r;)i(r.data,e,n),n+=r.data.length,r=r.next;return e},t}(),s&&s.inspect&&s.inspect.custom&&(e.exports.prototype[s.inspect.custom]=function(){var t=s.inspect({length:this.length});return this.constructor.name+" "+t})},{"safe-buffer":65,util:29}],59:[function(t,e,r){"use strict";function n(t,e){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(e?e(t):!t||this._writableState&&this._writableState.errorEmitted||s.nextTick(o,this,t),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(t){!e&&t?(s.nextTick(o,r,t),r._writableState&&(r._writableState.errorEmitted=!0)):e&&e(t)}),this)}function i(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function o(t,e){t.emit("error",e)}var s=t("process-nextick-args");e.exports={destroy:n,undestroy:i}},{"process-nextick-args":45}],60:[function(t,e,r){e.exports=t("events").EventEmitter},{events:37}],61:[function(t,e,r){e.exports=t("./readable").PassThrough},{"./readable":62}],62:[function(t,e,r){r=e.exports=t("./lib/_stream_readable.js"),r.Stream=r,r.Readable=r,r.Writable=t("./lib/_stream_writable.js"),r.Duplex=t("./lib/_stream_duplex.js"),r.Transform=t("./lib/_stream_transform.js"),r.PassThrough=t("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":53,"./lib/_stream_passthrough.js":54,"./lib/_stream_readable.js":55,"./lib/_stream_transform.js":56,"./lib/_stream_writable.js":57}],63:[function(t,e,r){e.exports=t("./readable").Transform},{"./readable":62}],64:[function(t,e,r){e.exports=t("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":57}],65:[function(t,e,r){function n(t,e){for(var r in t)e[r]=t[r]}function i(t,e,r){return s(t,e,r)}var o=t("buffer"),s=o.Buffer;s.from&&s.alloc&&s.allocUnsafe&&s.allocUnsafeSlow?e.exports=o:(n(o,r),r.Buffer=i),n(s,i),i.from=function(t,e,r){if("number"==typeof t)throw new TypeError("Argument must not be a number");return s(t,e,r)},i.alloc=function(t,e,r){if("number"!=typeof t)throw new TypeError("Argument must be a number");var n=s(t);return void 0!==e?"string"==typeof r?n.fill(e,r):n.fill(e):n.fill(0),n},i.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return s(t)},i.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return o.SlowBuffer(t)}},{buffer:30}],66:[function(t,e,r){(function(e){!function(r){function n(t,e){if(!(this instanceof n))return new n(t,e);var i=this;o(i),i.q=i.c="",i.bufferCheckPosition=r.MAX_BUFFER_LENGTH,i.opt=e||{},i.opt.lowercase=i.opt.lowercase||i.opt.lowercasetags,i.looseCase=i.opt.lowercase?"toLowerCase":"toUpperCase",i.tags=[],i.closed=i.closedRoot=i.sawRoot=!1,i.tag=i.error=null,i.strict=!!t,i.noscript=!(!t&&!i.opt.noscript),i.state=z.BEGIN,i.strictEntities=i.opt.strictEntities,i.ENTITIES=i.strictEntities?Object.create(r.XML_ENTITIES):Object.create(r.ENTITIES),i.attribList=[],i.opt.xmlns&&(i.ns=Object.create(P)),i.trackPosition=i.opt.position!==!1,i.trackPosition&&(i.position=i.line=i.column=0),d(i,"onready")}function i(t){for(var e=Math.max(r.MAX_BUFFER_LENGTH,10),n=0,i=0,o=C.length;i<o;i++){var s=t[C[i]].length;if(s>e)switch(C[i]){case"textNode":m(t);break;case"cdata":y(t,"oncdata",t.cdata),t.cdata="";break;case"script":y(t,"onscript",t.script),t.script="";break;default:v(t,"Max buffer length exceeded: "+C[i])}n=Math.max(n,s)}var a=r.MAX_BUFFER_LENGTH-n;t.bufferCheckPosition=a+t.position}function o(t){for(var e=0,r=C.length;e<r;e++)t[C[e]]=""}function s(t){m(t),""!==t.cdata&&(y(t,"oncdata",t.cdata),t.cdata=""),""!==t.script&&(y(t,"onscript",t.script),t.script="")}function a(t,e){return new u(t,e)}function u(t,e){if(!(this instanceof u))return new u(t,e);N.apply(this),this._parser=new n(t,e),this.writable=!0,this.readable=!0;var r=this;this._parser.onend=function(){r.emit("end")},this._parser.onerror=function(t){r.emit("error",t),r._parser.error=null},this._decoder=null,j.forEach(function(t){Object.defineProperty(r,"on"+t,{get:function(){return r._parser["on"+t]},set:function(e){return e?void r.on(t,e):(r.removeAllListeners(t),r._parser["on"+t]=e,e)},enumerable:!0,configurable:!1})})}function c(t){return" "===t||"\n"===t||"\r"===t||"\t"===t}function l(t){return'"'===t||"'"===t}function f(t){return">"===t||c(t)}function h(t,e){return t.test(e)}function p(t,e){return!h(t,e)}function d(t,e,r){t[e]&&t[e](r)}function y(t,e,r){t.textNode&&m(t),d(t,e,r)}function m(t){t.textNode=g(t.opt,t.textNode),t.textNode&&d(t,"ontext",t.textNode),t.textNode=""}function g(t,e){return t.trim&&(e=e.trim()),t.normalize&&(e=e.replace(/\s+/g," ")),e}function v(t,e){return m(t),t.trackPosition&&(e+="\nLine: "+t.line+"\nColumn: "+t.column+"\nChar: "+t.c),e=new Error(e),t.error=e,d(t,"onerror",e),t}function _(t){return t.sawRoot&&!t.closedRoot&&b(t,"Unclosed root tag"),t.state!==z.BEGIN&&t.state!==z.BEGIN_WHITESPACE&&t.state!==z.TEXT&&v(t,"Unexpected end"),m(t),t.c="",t.closed=!0,d(t,"onend"),n.call(t,t.strict,t.opt),t}function b(t,e){if("object"!=typeof t||!(t instanceof n))throw new Error("bad call to strictFail");t.strict&&v(t,e)}function w(t){t.strict||(t.tagName=t.tagName[t.looseCase]());var e=t.tags[t.tags.length-1]||t,r=t.tag={name:t.tagName,attributes:{}};t.opt.xmlns&&(r.ns=e.ns),t.attribList.length=0,y(t,"onopentagstart",r)}function E(t,e){var r=t.indexOf(":"),n=r<0?["",t]:t.split(":"),i=n[0],o=n[1];return e&&"xmlns"===t&&(i="xmlns",o=""),{prefix:i,local:o}}function T(t){if(t.strict||(t.attribName=t.attribName[t.looseCase]()),t.attribList.indexOf(t.attribName)!==-1||t.tag.attributes.hasOwnProperty(t.attribName))return void(t.attribName=t.attribValue="");if(t.opt.xmlns){var e=E(t.attribName,!0),r=e.prefix,n=e.local;if("xmlns"===r)if("xml"===n&&t.attribValue!==M)b(t,"xml: prefix must be bound to "+M+"\nActual: "+t.attribValue);else if("xmlns"===n&&t.attribValue!==U)b(t,"xmlns: prefix must be bound to "+U+"\nActual: "+t.attribValue);else{var i=t.tag,o=t.tags[t.tags.length-1]||t;i.ns===o.ns&&(i.ns=Object.create(o.ns)),i.ns[n]=t.attribValue}t.attribList.push([t.attribName,t.attribValue])}else t.tag.attributes[t.attribName]=t.attribValue,y(t,"onattribute",{name:t.attribName,value:t.attribValue});t.attribName=t.attribValue=""}function S(t,e){if(t.opt.xmlns){var r=t.tag,n=E(t.tagName);r.prefix=n.prefix,r.local=n.local,r.uri=r.ns[n.prefix]||"",r.prefix&&!r.uri&&(b(t,"Unbound namespace prefix: "+JSON.stringify(t.tagName)),r.uri=n.prefix);var i=t.tags[t.tags.length-1]||t;r.ns&&i.ns!==r.ns&&Object.keys(r.ns).forEach(function(e){y(t,"onopennamespace",{prefix:e,uri:r.ns[e]})});for(var o=0,s=t.attribList.length;o<s;o++){var a=t.attribList[o],u=a[0],c=a[1],l=E(u,!0),f=l.prefix,h=l.local,p=""===f?"":r.ns[f]||"",d={name:u,value:c,prefix:f,local:h,uri:p};f&&"xmlns"!==f&&!p&&(b(t,"Unbound namespace prefix: "+JSON.stringify(f)),d.uri=f),t.tag.attributes[u]=d,y(t,"onattribute",d)}t.attribList.length=0}t.tag.isSelfClosing=!!e,t.sawRoot=!0,t.tags.push(t.tag),y(t,"onopentag",t.tag),e||(t.noscript||"script"!==t.tagName.toLowerCase()?t.state=z.TEXT:t.state=z.SCRIPT,t.tag=null,t.tagName=""),t.attribName=t.attribValue="",t.attribList.length=0}function x(t){if(!t.tagName)return b(t,"Weird empty close tag."),t.textNode+="</>",void(t.state=z.TEXT);if(t.script){if("script"!==t.tagName)return t.script+="</"+t.tagName+">",t.tagName="",void(t.state=z.SCRIPT);y(t,"onscript",t.script),t.script=""}var e=t.tags.length,r=t.tagName;t.strict||(r=r[t.looseCase]());for(var n=r;e--;){var i=t.tags[e];if(i.name===n)break;b(t,"Unexpected close tag")}if(e<0)return b(t,"Unmatched closing tag: "+t.tagName),t.textNode+="</"+t.tagName+">",void(t.state=z.TEXT);t.tagName=r;for(var o=t.tags.length;o-- >e;){var s=t.tag=t.tags.pop();t.tagName=t.tag.name,y(t,"onclosetag",t.tagName);var a={};for(var u in s.ns)a[u]=s.ns[u];var c=t.tags[t.tags.length-1]||t;t.opt.xmlns&&s.ns!==c.ns&&Object.keys(s.ns).forEach(function(e){var r=s.ns[e];y(t,"onclosenamespace",{prefix:e,uri:r})})}0===e&&(t.closedRoot=!0),t.tagName=t.attribValue=t.attribName="",t.attribList.length=0,t.state=z.TEXT}function O(t){var e,r=t.entity,n=r.toLowerCase(),i="";return t.ENTITIES[r]?t.ENTITIES[r]:t.ENTITIES[n]?t.ENTITIES[n]:(r=n,"#"===r.charAt(0)&&("x"===r.charAt(1)?(r=r.slice(2),e=parseInt(r,16),i=e.toString(16)):(r=r.slice(1),e=parseInt(r,10),i=e.toString(10))),r=r.replace(/^0+/,""),isNaN(e)||i.toLowerCase()!==r?(b(t,"Invalid character entity"),"&"+t.entity+";"):String.fromCodePoint(e))}function I(t,e){"<"===e?(t.state=z.OPEN_WAKA,t.startTagPosition=t.position):c(e)||(b(t,"Non-whitespace before first tag."),t.textNode=e,t.state=z.TEXT)}function D(t,e){var r="";return e<t.length&&(r=t.charAt(e)),r}function A(t){var e=this;if(this.error)throw this.error;if(e.closed)return v(e,"Cannot write after close. Assign an onready handler.");if(null===t)return _(e);"object"==typeof t&&(t=t.toString());for(var r=0,n="";;){if(n=D(t,r++),e.c=n,!n)break;switch(e.trackPosition&&(e.position++,"\n"===n?(e.line++,e.column=0):e.column++),e.state){case z.BEGIN:if(e.state=z.BEGIN_WHITESPACE,"\ufeff"===n)continue;I(e,n);continue;case z.BEGIN_WHITESPACE:I(e,n);continue;case z.TEXT:if(e.sawRoot&&!e.closedRoot){for(var o=r-1;n&&"<"!==n&&"&"!==n;)n=D(t,r++),n&&e.trackPosition&&(e.position++,"\n"===n?(e.line++,e.column=0):e.column++);e.textNode+=t.substring(o,r-1)}"<"!==n||e.sawRoot&&e.closedRoot&&!e.strict?(c(n)||e.sawRoot&&!e.closedRoot||b(e,"Text data outside of root node."),"&"===n?e.state=z.TEXT_ENTITY:e.textNode+=n):(e.state=z.OPEN_WAKA,e.startTagPosition=e.position);continue;case z.SCRIPT:"<"===n?e.state=z.SCRIPT_ENDING:e.script+=n;continue;case z.SCRIPT_ENDING:"/"===n?e.state=z.CLOSE_TAG:(e.script+="<"+n,e.state=z.SCRIPT);continue;case z.OPEN_WAKA:if("!"===n)e.state=z.SGML_DECL,e.sgmlDecl="";else if(c(n));else if(h(q,n))e.state=z.OPEN_TAG,e.tagName=n;else if("/"===n)e.state=z.CLOSE_TAG,e.tagName="";else if("?"===n)e.state=z.PROC_INST,e.procInstName=e.procInstBody="";else{if(b(e,"Unencoded <"),e.startTagPosition+1<e.position){var s=e.position-e.startTagPosition;n=new Array(s).join(" ")+n}e.textNode+="<"+n,e.state=z.TEXT}continue;case z.SGML_DECL:(e.sgmlDecl+n).toUpperCase()===k?(y(e,"onopencdata"),e.state=z.CDATA,e.sgmlDecl="",e.cdata=""):e.sgmlDecl+n==="--"?(e.state=z.COMMENT,e.comment="",e.sgmlDecl=""):(e.sgmlDecl+n).toUpperCase()===R?(e.state=z.DOCTYPE,(e.doctype||e.sawRoot)&&b(e,"Inappropriately located doctype declaration"),e.doctype="",e.sgmlDecl=""):">"===n?(y(e,"onsgmldeclaration",e.sgmlDecl),e.sgmlDecl="",e.state=z.TEXT):l(n)?(e.state=z.SGML_DECL_QUOTED,e.sgmlDecl+=n):e.sgmlDecl+=n;continue;case z.SGML_DECL_QUOTED:n===e.q&&(e.state=z.SGML_DECL,e.q=""),e.sgmlDecl+=n;continue;case z.DOCTYPE:">"===n?(e.state=z.TEXT,y(e,"ondoctype",e.doctype),e.doctype=!0):(e.doctype+=n,"["===n?e.state=z.DOCTYPE_DTD:l(n)&&(e.state=z.DOCTYPE_QUOTED,e.q=n));continue;case z.DOCTYPE_QUOTED:e.doctype+=n,n===e.q&&(e.q="",e.state=z.DOCTYPE);continue;case z.DOCTYPE_DTD:e.doctype+=n,"]"===n?e.state=z.DOCTYPE:l(n)&&(e.state=z.DOCTYPE_DTD_QUOTED,e.q=n);continue;case z.DOCTYPE_DTD_QUOTED:e.doctype+=n,n===e.q&&(e.state=z.DOCTYPE_DTD,e.q="");continue;case z.COMMENT:"-"===n?e.state=z.COMMENT_ENDING:e.comment+=n;continue;case z.COMMENT_ENDING:"-"===n?(e.state=z.COMMENT_ENDED,e.comment=g(e.opt,e.comment),e.comment&&y(e,"oncomment",e.comment),e.comment=""):(e.comment+="-"+n,e.state=z.COMMENT);continue;case z.COMMENT_ENDED:">"!==n?(b(e,"Malformed comment"),e.comment+="--"+n,e.state=z.COMMENT):e.state=z.TEXT;continue;case z.CDATA:"]"===n?e.state=z.CDATA_ENDING:e.cdata+=n;continue;case z.CDATA_ENDING:"]"===n?e.state=z.CDATA_ENDING_2:(e.cdata+="]"+n,e.state=z.CDATA);continue;case z.CDATA_ENDING_2:">"===n?(e.cdata&&y(e,"oncdata",e.cdata),y(e,"onclosecdata"),e.cdata="",e.state=z.TEXT):"]"===n?e.cdata+="]":(e.cdata+="]]"+n,e.state=z.CDATA);continue;case z.PROC_INST:"?"===n?e.state=z.PROC_INST_ENDING:c(n)?e.state=z.PROC_INST_BODY:e.procInstName+=n;continue;case z.PROC_INST_BODY:if(!e.procInstBody&&c(n))continue;"?"===n?e.state=z.PROC_INST_ENDING:e.procInstBody+=n;continue;case z.PROC_INST_ENDING:">"===n?(y(e,"onprocessinginstruction",{name:e.procInstName,body:e.procInstBody}),e.procInstName=e.procInstBody="",e.state=z.TEXT):(e.procInstBody+="?"+n,e.state=z.PROC_INST_BODY);continue;case z.OPEN_TAG:h(B,n)?e.tagName+=n:(w(e),">"===n?S(e):"/"===n?e.state=z.OPEN_TAG_SLASH:(c(n)||b(e,"Invalid character in tag name"),
e.state=z.ATTRIB));continue;case z.OPEN_TAG_SLASH:">"===n?(S(e,!0),x(e)):(b(e,"Forward-slash in opening tag not followed by >"),e.state=z.ATTRIB);continue;case z.ATTRIB:if(c(n))continue;">"===n?S(e):"/"===n?e.state=z.OPEN_TAG_SLASH:h(q,n)?(e.attribName=n,e.attribValue="",e.state=z.ATTRIB_NAME):b(e,"Invalid attribute name");continue;case z.ATTRIB_NAME:"="===n?e.state=z.ATTRIB_VALUE:">"===n?(b(e,"Attribute without value"),e.attribValue=e.attribName,T(e),S(e)):c(n)?e.state=z.ATTRIB_NAME_SAW_WHITE:h(B,n)?e.attribName+=n:b(e,"Invalid attribute name");continue;case z.ATTRIB_NAME_SAW_WHITE:if("="===n)e.state=z.ATTRIB_VALUE;else{if(c(n))continue;b(e,"Attribute without value"),e.tag.attributes[e.attribName]="",e.attribValue="",y(e,"onattribute",{name:e.attribName,value:""}),e.attribName="",">"===n?S(e):h(q,n)?(e.attribName=n,e.state=z.ATTRIB_NAME):(b(e,"Invalid attribute name"),e.state=z.ATTRIB)}continue;case z.ATTRIB_VALUE:if(c(n))continue;l(n)?(e.q=n,e.state=z.ATTRIB_VALUE_QUOTED):(b(e,"Unquoted attribute value"),e.state=z.ATTRIB_VALUE_UNQUOTED,e.attribValue=n);continue;case z.ATTRIB_VALUE_QUOTED:if(n!==e.q){"&"===n?e.state=z.ATTRIB_VALUE_ENTITY_Q:e.attribValue+=n;continue}T(e),e.q="",e.state=z.ATTRIB_VALUE_CLOSED;continue;case z.ATTRIB_VALUE_CLOSED:c(n)?e.state=z.ATTRIB:">"===n?S(e):"/"===n?e.state=z.OPEN_TAG_SLASH:h(q,n)?(b(e,"No whitespace between attributes"),e.attribName=n,e.attribValue="",e.state=z.ATTRIB_NAME):b(e,"Invalid attribute name");continue;case z.ATTRIB_VALUE_UNQUOTED:if(!f(n)){"&"===n?e.state=z.ATTRIB_VALUE_ENTITY_U:e.attribValue+=n;continue}T(e),">"===n?S(e):e.state=z.ATTRIB;continue;case z.CLOSE_TAG:if(e.tagName)">"===n?x(e):h(B,n)?e.tagName+=n:e.script?(e.script+="</"+e.tagName,e.tagName="",e.state=z.SCRIPT):(c(n)||b(e,"Invalid tagname in closing tag"),e.state=z.CLOSE_TAG_SAW_WHITE);else{if(c(n))continue;p(q,n)?e.script?(e.script+="</"+n,e.state=z.SCRIPT):b(e,"Invalid tagname in closing tag."):e.tagName=n}continue;case z.CLOSE_TAG_SAW_WHITE:if(c(n))continue;">"===n?x(e):b(e,"Invalid characters in closing tag");continue;case z.TEXT_ENTITY:case z.ATTRIB_VALUE_ENTITY_Q:case z.ATTRIB_VALUE_ENTITY_U:var a,u;switch(e.state){case z.TEXT_ENTITY:a=z.TEXT,u="textNode";break;case z.ATTRIB_VALUE_ENTITY_Q:a=z.ATTRIB_VALUE_QUOTED,u="attribValue";break;case z.ATTRIB_VALUE_ENTITY_U:a=z.ATTRIB_VALUE_UNQUOTED,u="attribValue"}";"===n?(e[u]+=O(e),e.entity="",e.state=a):h(e.entity.length?X:F,n)?e.entity+=n:(b(e,"Invalid character in entity name"),e[u]+="&"+e.entity+n,e.entity="",e.state=a);continue;default:throw new Error(e,"Unknown state: "+e.state)}}return e.position>=e.bufferCheckPosition&&i(e),e}r.parser=function(t,e){return new n(t,e)},r.SAXParser=n,r.SAXStream=u,r.createStream=a,r.MAX_BUFFER_LENGTH=65536;var C=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];r.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(t){function e(){}e.prototype=t;var r=new e;return r}),Object.keys||(Object.keys=function(t){var e=[];for(var r in t)t.hasOwnProperty(r)&&e.push(r);return e}),n.prototype={end:function(){_(this)},write:A,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){s(this)}};var N;try{N=t("stream").Stream}catch(L){N=function(){}}var j=r.EVENTS.filter(function(t){return"error"!==t&&"end"!==t});u.prototype=Object.create(N.prototype,{constructor:{value:u}}),u.prototype.write=function(r){if("function"==typeof e&&"function"==typeof e.isBuffer&&e.isBuffer(r)){if(!this._decoder){var n=t("string_decoder").StringDecoder;this._decoder=new n("utf8")}r=this._decoder.write(r)}return this._parser.write(r.toString()),this.emit("data",r),!0},u.prototype.end=function(t){return t&&t.length&&this.write(t),this._parser.end(),!0},u.prototype.on=function(t,e){var r=this;return r._parser["on"+t]||j.indexOf(t)===-1||(r._parser["on"+t]=function(){var e=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);e.splice(0,0,t),r.emit.apply(r,e)}),N.prototype.on.call(r,t,e)};var k="[CDATA[",R="DOCTYPE",M="http://www.w3.org/XML/1998/namespace",U="http://www.w3.org/2000/xmlns/",P={xml:M,xmlns:U},q=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,B=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,F=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,X=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,z=0;r.STATE={BEGIN:z++,BEGIN_WHITESPACE:z++,TEXT:z++,TEXT_ENTITY:z++,OPEN_WAKA:z++,SGML_DECL:z++,SGML_DECL_QUOTED:z++,DOCTYPE:z++,DOCTYPE_QUOTED:z++,DOCTYPE_DTD:z++,DOCTYPE_DTD_QUOTED:z++,COMMENT_STARTING:z++,COMMENT:z++,COMMENT_ENDING:z++,COMMENT_ENDED:z++,CDATA:z++,CDATA_ENDING:z++,CDATA_ENDING_2:z++,PROC_INST:z++,PROC_INST_BODY:z++,PROC_INST_ENDING:z++,OPEN_TAG:z++,OPEN_TAG_SLASH:z++,ATTRIB:z++,ATTRIB_NAME:z++,ATTRIB_NAME_SAW_WHITE:z++,ATTRIB_VALUE:z++,ATTRIB_VALUE_QUOTED:z++,ATTRIB_VALUE_CLOSED:z++,ATTRIB_VALUE_UNQUOTED:z++,ATTRIB_VALUE_ENTITY_Q:z++,ATTRIB_VALUE_ENTITY_U:z++,CLOSE_TAG:z++,CLOSE_TAG_SAW_WHITE:z++,SCRIPT:z++,SCRIPT_ENDING:z++},r.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},r.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,"int":8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(r.ENTITIES).forEach(function(t){var e=r.ENTITIES[t],n="number"==typeof e?String.fromCharCode(e):e;r.ENTITIES[t]=n});for(var V in r.STATE)r.STATE[r.STATE[V]]=V;z=r.STATE,String.fromCodePoint||!function(){var t=String.fromCharCode,e=Math.floor,r=function(){var r,n,i=16384,o=[],s=-1,a=arguments.length;if(!a)return"";for(var u="";++s<a;){var c=Number(arguments[s]);if(!isFinite(c)||c<0||c>1114111||e(c)!==c)throw RangeError("Invalid code point: "+c);c<=65535?o.push(c):(c-=65536,r=(c>>10)+55296,n=c%1024+56320,o.push(r,n)),(s+1===a||o.length>i)&&(u+=t.apply(null,o),o.length=0)}return u};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:r,configurable:!0,writable:!0}):String.fromCodePoint=r}()}("undefined"==typeof r?this.sax={}:r)}).call(this,t("buffer").Buffer)},{buffer:30,stream:67,string_decoder:68}],67:[function(t,e,r){function n(){i.call(this)}e.exports=n;var i=t("events").EventEmitter,o=t("inherits");o(n,i),n.Readable=t("readable-stream/readable.js"),n.Writable=t("readable-stream/writable.js"),n.Duplex=t("readable-stream/duplex.js"),n.Transform=t("readable-stream/transform.js"),n.PassThrough=t("readable-stream/passthrough.js"),n.Stream=n,n.prototype.pipe=function(t,e){function r(e){t.writable&&!1===t.write(e)&&c.pause&&c.pause()}function n(){c.readable&&c.resume&&c.resume()}function o(){l||(l=!0,t.end())}function s(){l||(l=!0,"function"==typeof t.destroy&&t.destroy())}function a(t){if(u(),0===i.listenerCount(this,"error"))throw t}function u(){c.removeListener("data",r),t.removeListener("drain",n),c.removeListener("end",o),c.removeListener("close",s),c.removeListener("error",a),t.removeListener("error",a),c.removeListener("end",u),c.removeListener("close",u),t.removeListener("close",u)}var c=this;c.on("data",r),t.on("drain",n),t._isStdio||e&&e.end===!1||(c.on("end",o),c.on("close",s));var l=!1;return c.on("error",a),t.on("error",a),c.on("end",u),c.on("close",u),t.on("close",u),t.emit("pipe",c),t}},{events:37,inherits:39,"readable-stream/duplex.js":52,"readable-stream/passthrough.js":61,"readable-stream/readable.js":62,"readable-stream/transform.js":63,"readable-stream/writable.js":64}],68:[function(t,e,r){"use strict";function n(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function i(t){var e=n(t);if("string"!=typeof e&&(v.isEncoding===_||!_(t)))throw new Error("Unknown encoding: "+t);return e||t}function o(t){this.encoding=i(t);var e;switch(this.encoding){case"utf16le":this.text=h,this.end=p,e=4;break;case"utf8":this.fillLast=c,e=4;break;case"base64":this.text=d,this.end=y,e=3;break;default:return this.write=m,void(this.end=g)}this.lastNeed=0,this.lastTotal=0,this.lastChar=v.allocUnsafe(e)}function s(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function a(t,e,r){var n=e.length-1;if(n<r)return 0;var i=s(e[n]);return i>=0?(i>0&&(t.lastNeed=i-1),i):--n<r||i===-2?0:(i=s(e[n]),i>=0?(i>0&&(t.lastNeed=i-2),i):--n<r||i===-2?0:(i=s(e[n]),i>=0?(i>0&&(2===i?i=0:t.lastNeed=i-3),i):0))}function u(t,e,r){if(128!==(192&e[0]))return t.lastNeed=0,"";if(t.lastNeed>1&&e.length>1){if(128!==(192&e[1]))return t.lastNeed=1,"";if(t.lastNeed>2&&e.length>2&&128!==(192&e[2]))return t.lastNeed=2,""}}function c(t){var e=this.lastTotal-this.lastNeed,r=u(this,t,e);return void 0!==r?r:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function l(t,e){var r=a(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)}function f(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"":e}function h(t,e){if((t.length-e)%2===0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function p(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function d(t,e){var r=(t.length-e)%3;return 0===r?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function y(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function m(t){return t.toString(this.encoding)}function g(t){return t&&t.length?this.write(t):""}var v=t("safe-buffer").Buffer,_=v.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};r.StringDecoder=o,o.prototype.write=function(t){if(0===t.length)return"";var e,r;if(this.lastNeed){if(e=this.fillLast(t),void 0===e)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""},o.prototype.end=f,o.prototype.text=l,o.prototype.fillLast=function(t){return this.lastNeed<=t.length?(t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),void(this.lastNeed-=t.length))}},{"safe-buffer":65}],69:[function(t,e,r){(function(e,n){function i(t,e){this._id=t,this._clearFn=e}var o=t("process/browser.js").nextTick,s=Function.prototype.apply,a=Array.prototype.slice,u={},c=0;r.setTimeout=function(){return new i(s.call(setTimeout,window,arguments),clearTimeout)},r.setInterval=function(){return new i(s.call(setInterval,window,arguments),clearInterval)},r.clearTimeout=r.clearInterval=function(t){t.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(window,this._id)},r.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},r.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},r._unrefActive=r.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},r.setImmediate="function"==typeof e?e:function(t){var e=c++,n=!(arguments.length<2)&&a.call(arguments,1);return u[e]=!0,o(function(){u[e]&&(n?t.apply(null,n):t.call(null),r.clearImmediate(e))}),e},r.clearImmediate="function"==typeof n?n:function(t){delete u[t]}}).call(this,t("timers").setImmediate,t("timers").clearImmediate)},{"process/browser.js":46,timers:69}],70:[function(t,e,r){(function(t){function r(t,e){function r(){if(!i){if(n("throwDeprecation"))throw new Error(e);n("traceDeprecation")?console.trace(e):console.warn(e),i=!0}return t.apply(this,arguments)}if(n("noDeprecation"))return t;var i=!1;return r}function n(e){try{if(!t.localStorage)return!1}catch(r){return!1}var n=t.localStorage[e];return null!=n&&"true"===String(n).toLowerCase()}e.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],71:[function(t,e,r){e.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},{}],72:[function(t,e,r){(function(e,n){function i(t,e){var n={seen:[],stylize:s};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),y(e)?n.showHidden=e:e&&r._extend(n,e),w(n.showHidden)&&(n.showHidden=!1),w(n.depth)&&(n.depth=2),w(n.colors)&&(n.colors=!1),w(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=o),u(n,t,n.depth)}function o(t,e){var r=i.styles[e];return r?"["+i.colors[r][0]+"m"+t+"["+i.colors[r][1]+"m":t}function s(t,e){return t}function a(t){var e={};return t.forEach(function(t,r){e[t]=!0}),e}function u(t,e,n){if(t.customInspect&&e&&O(e.inspect)&&e.inspect!==r.inspect&&(!e.constructor||e.constructor.prototype!==e)){var i=e.inspect(n,t);return _(i)||(i=u(t,i,n)),i}var o=c(t,e);if(o)return o;var s=Object.keys(e),y=a(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(e)),x(e)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return l(e);if(0===s.length){if(O(e)){var m=e.name?": "+e.name:"";return t.stylize("[Function"+m+"]","special")}if(E(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(S(e))return t.stylize(Date.prototype.toString.call(e),"date");if(x(e))return l(e)}var g="",v=!1,b=["{","}"];if(d(e)&&(v=!0,b=["[","]"]),O(e)){var w=e.name?": "+e.name:"";g=" [Function"+w+"]"}if(E(e)&&(g=" "+RegExp.prototype.toString.call(e)),S(e)&&(g=" "+Date.prototype.toUTCString.call(e)),x(e)&&(g=" "+l(e)),0===s.length&&(!v||0==e.length))return b[0]+g+b[1];if(n<0)return E(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special");t.seen.push(e);var T;return T=v?f(t,e,n,y,s):s.map(function(r){return h(t,e,n,y,r,v)}),t.seen.pop(),p(T,g,b)}function c(t,e){if(w(e))return t.stylize("undefined","undefined");if(_(e)){var r="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(r,"string")}return v(e)?t.stylize(""+e,"number"):y(e)?t.stylize(""+e,"boolean"):m(e)?t.stylize("null","null"):void 0}function l(t){return"["+Error.prototype.toString.call(t)+"]"}function f(t,e,r,n,i){for(var o=[],s=0,a=e.length;s<a;++s)N(e,String(s))?o.push(h(t,e,r,n,String(s),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(h(t,e,r,n,i,!0))}),o}function h(t,e,r,n,i,o){var s,a,c;if(c=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]},c.get?a=c.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):c.set&&(a=t.stylize("[Setter]","special")),N(n,i)||(s="["+i+"]"),a||(t.seen.indexOf(c.value)<0?(a=m(r)?u(t,c.value,null):u(t,c.value,r-1),a.indexOf("\n")>-1&&(a=o?a.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+a.split("\n").map(function(t){return"   "+t}).join("\n"))):a=t.stylize("[Circular]","special")),w(s)){if(o&&i.match(/^\d+$/))return a;s=JSON.stringify(""+i),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+a}function p(t,e,r){var n=0,i=t.reduce(function(t,e){return n++,e.indexOf("\n")>=0&&n++,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?r[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+r[1]:r[0]+e+" "+t.join(", ")+" "+r[1]}function d(t){return Array.isArray(t)}function y(t){return"boolean"==typeof t}function m(t){return null===t}function g(t){return null==t}function v(t){return"number"==typeof t}function _(t){return"string"==typeof t}function b(t){return"symbol"==typeof t}function w(t){return void 0===t}function E(t){return T(t)&&"[object RegExp]"===D(t)}function T(t){return"object"==typeof t&&null!==t}function S(t){return T(t)&&"[object Date]"===D(t)}function x(t){return T(t)&&("[object Error]"===D(t)||t instanceof Error)}function O(t){return"function"==typeof t}function I(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function D(t){return Object.prototype.toString.call(t)}function A(t){return t<10?"0"+t.toString(10):t.toString(10)}function C(){var t=new Date,e=[A(t.getHours()),A(t.getMinutes()),A(t.getSeconds())].join(":");return[t.getDate(),R[t.getMonth()],e].join(" ")}function N(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var L=/%[sdj%]/g;r.format=function(t){if(!_(t)){for(var e=[],r=0;r<arguments.length;r++)e.push(i(arguments[r]));return e.join(" ")}for(var r=1,n=arguments,o=n.length,s=String(t).replace(L,function(t){if("%%"===t)return"%";if(r>=o)return t;switch(t){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return t}}),a=n[r];r<o;a=n[++r])s+=m(a)||!T(a)?" "+a:" "+i(a);return s},r.deprecate=function(t,i){function o(){if(!s){if(e.throwDeprecation)throw new Error(i);e.traceDeprecation?console.trace(i):console.error(i),s=!0}return t.apply(this,arguments)}if(w(n.process))return function(){return r.deprecate(t,i).apply(this,arguments)};if(e.noDeprecation===!0)return t;var s=!1;return o};var j,k={};r.debuglog=function(t){if(w(j)&&(j=e.env.NODE_DEBUG||""),t=t.toUpperCase(),!k[t])if(new RegExp("\\b"+t+"\\b","i").test(j)){var n=e.pid;k[t]=function(){var e=r.format.apply(r,arguments);console.error("%s %d: %s",t,n,e)}}else k[t]=function(){};return k[t]},r.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},r.isArray=d,r.isBoolean=y,r.isNull=m,r.isNullOrUndefined=g,r.isNumber=v,r.isString=_,r.isSymbol=b,r.isUndefined=w,r.isRegExp=E,r.isObject=T,r.isDate=S,r.isError=x,r.isFunction=O,r.isPrimitive=I,r.isBuffer=t("./support/isBuffer");var R=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];r.log=function(){console.log("%s - %s",C(),r.format.apply(r,arguments))},r.inherits=t("inherits"),r._extend=function(t,e){if(!e||!T(e))return t;for(var r=Object.keys(e),n=r.length;n--;)t[r[n]]=e[r[n]];return t}}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":71,_process:46,inherits:39}],73:[function(t,e,r){(function(){"use strict";r.stripBOM=function(t){return"\ufeff"===t[0]?t.substring(1):t}}).call(this)},{}],74:[function(t,e,r){(function(){"use strict";var e,n,i,o,s,a={}.hasOwnProperty;e=t("xmlbuilder"),n=t("./defaults").defaults,o=function(t){return"string"==typeof t&&(t.indexOf("&")>=0||t.indexOf(">")>=0||t.indexOf("<")>=0)},s=function(t){return"<![CDATA["+i(t)+"]]>"},i=function(t){return t.replace("]]>","]]]]><![CDATA[>")},r.Builder=function(){function t(t){var e,r,i;this.options={},r=n[.2];for(e in r)a.call(r,e)&&(i=r[e],this.options[e]=i);for(e in t)a.call(t,e)&&(i=t[e],this.options[e]=i)}return t.prototype.buildObject=function(t){var r,i,u,c,l;return r=this.options.attrkey,i=this.options.charkey,1===Object.keys(t).length&&this.options.rootName===n[.2].rootName?(l=Object.keys(t)[0],t=t[l]):l=this.options.rootName,u=function(t){return function(e,n){var c,l,f,h,p,d;if("object"!=typeof n)t.options.cdata&&o(n)?e.raw(s(n)):e.txt(n);else if(Array.isArray(n)){for(h in n)if(a.call(n,h)){l=n[h];for(p in l)f=l[p],e=u(e.ele(p),f).up()}}else for(p in n)if(a.call(n,p))if(l=n[p],p===r){if("object"==typeof l)for(c in l)d=l[c],e=e.att(c,d)}else if(p===i)e=t.options.cdata&&o(l)?e.raw(s(l)):e.txt(l);else if(Array.isArray(l))for(h in l)a.call(l,h)&&(f=l[h],e="string"==typeof f?t.options.cdata&&o(f)?e.ele(p).raw(s(f)).up():e.ele(p,f).up():u(e.ele(p),f).up());else"object"==typeof l?e=u(e.ele(p),l).up():"string"==typeof l&&t.options.cdata&&o(l)?e=e.ele(p).raw(s(l)).up():(null==l&&(l=""),e=e.ele(p,l.toString()).up());return e}}(this),c=e.create(l,this.options.xmldec,this.options.doctype,{headless:this.options.headless,allowSurrogateChars:this.options.allowSurrogateChars}),u(c,t).end(this.options.renderOpts)},t}()}).call(this)},{"./defaults":75,xmlbuilder:100}],75:[function(t,e,r){(function(){r.defaults={.1:{explicitCharkey:!1,trim:!0,normalize:!0,normalizeTags:!1,attrkey:"@",charkey:"#",explicitArray:!1,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!1,validator:null,xmlns:!1,explicitChildren:!1,childkey:"@@",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,emptyTag:""},.2:{explicitCharkey:!1,trim:!1,normalize:!1,normalizeTags:!1,attrkey:"$",charkey:"_",explicitArray:!0,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!0,validator:null,xmlns:!1,explicitChildren:!1,preserveChildrenOrder:!1,childkey:"$$",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,rootName:"root",xmldec:{version:"1.0",encoding:"UTF-8",standalone:!0},doctype:null,renderOpts:{pretty:!0,indent:"  ",newline:"\n"},headless:!1,chunkSize:1e4,emptyTag:"",cdata:!1}}}).call(this)},{}],76:[function(t,e,r){(function(){"use strict";var e,n,i,o,s,a,u,c,l=function(t,e){return function(){return t.apply(e,arguments)}},f=function(t,e){function r(){this.constructor=t}for(var n in e)h.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},h={}.hasOwnProperty;u=t("sax"),i=t("events"),e=t("./bom"),a=t("./processors"),c=t("timers").setImmediate,n=t("./defaults").defaults,o=function(t){return"object"==typeof t&&null!=t&&0===Object.keys(t).length},s=function(t,e,r){var n,i,o;for(n=0,i=t.length;n<i;n++)o=t[n],e=o(e,r);return e},r.Parser=function(t){function i(t){this.parseString=l(this.parseString,this),this.reset=l(this.reset,this),this.assignOrPush=l(this.assignOrPush,this),this.processAsync=l(this.processAsync,this);var e,i,o;if(!(this instanceof r.Parser))return new r.Parser(t);this.options={},i=n[.2];for(e in i)h.call(i,e)&&(o=i[e],this.options[e]=o);for(e in t)h.call(t,e)&&(o=t[e],this.options[e]=o);this.options.xmlns&&(this.options.xmlnskey=this.options.attrkey+"ns"),this.options.normalizeTags&&(this.options.tagNameProcessors||(this.options.tagNameProcessors=[]),this.options.tagNameProcessors.unshift(a.normalize)),this.reset()}return f(i,t),i.prototype.processAsync=function(){var t,e;try{return this.remaining.length<=this.options.chunkSize?(t=this.remaining,this.remaining="",this.saxParser=this.saxParser.write(t),this.saxParser.close()):(t=this.remaining.substr(0,this.options.chunkSize),this.remaining=this.remaining.substr(this.options.chunkSize,this.remaining.length),this.saxParser=this.saxParser.write(t),c(this.processAsync))}catch(r){if(e=r,!this.saxParser.errThrown)return this.saxParser.errThrown=!0,this.emit(e)}},i.prototype.assignOrPush=function(t,e,r){return e in t?(t[e]instanceof Array||(t[e]=[t[e]]),t[e].push(r)):this.options.explicitArray?t[e]=[r]:t[e]=r},i.prototype.reset=function(){var t,e,r,n;return this.removeAllListeners(),this.saxParser=u.parser(this.options.strict,{trim:!1,normalize:!1,xmlns:this.options.xmlns}),this.saxParser.errThrown=!1,this.saxParser.onerror=function(t){return function(e){if(t.saxParser.resume(),!t.saxParser.errThrown)return t.saxParser.errThrown=!0,t.emit("error",e)}}(this),this.saxParser.onend=function(t){return function(){if(!t.saxParser.ended)return t.saxParser.ended=!0,t.emit("end",t.resultObject)}}(this),this.saxParser.ended=!1,this.EXPLICIT_CHARKEY=this.options.explicitCharkey,this.resultObject=null,n=[],t=this.options.attrkey,e=this.options.charkey,this.saxParser.onopentag=function(r){return function(i){var o,a,u,c,l;if(u={},u[e]="",!r.options.ignoreAttrs){l=i.attributes;for(o in l)h.call(l,o)&&(t in u||r.options.mergeAttrs||(u[t]={}),a=r.options.attrValueProcessors?s(r.options.attrValueProcessors,i.attributes[o],o):i.attributes[o],c=r.options.attrNameProcessors?s(r.options.attrNameProcessors,o):o,r.options.mergeAttrs?r.assignOrPush(u,c,a):u[t][c]=a)}return u["#name"]=r.options.tagNameProcessors?s(r.options.tagNameProcessors,i.name):i.name,r.options.xmlns&&(u[r.options.xmlnskey]={uri:i.uri,local:i.local}),n.push(u)}}(this),this.saxParser.onclosetag=function(t){return function(){var r,i,a,u,c,l,f,p,d,y;if(l=n.pop(),c=l["#name"],t.options.explicitChildren&&t.options.preserveChildrenOrder||delete l["#name"],l.cdata===!0&&(r=l.cdata,delete l.cdata),d=n[n.length-1],l[e].match(/^\s*$/)&&!r?(i=l[e],delete l[e]):(t.options.trim&&(l[e]=l[e].trim()),t.options.normalize&&(l[e]=l[e].replace(/\s{2,}/g," ").trim()),l[e]=t.options.valueProcessors?s(t.options.valueProcessors,l[e],c):l[e],1===Object.keys(l).length&&e in l&&!t.EXPLICIT_CHARKEY&&(l=l[e])),o(l)&&(l=""!==t.options.emptyTag?t.options.emptyTag:i),null!=t.options.validator&&(y="/"+function(){var t,e,r;for(r=[],t=0,e=n.length;t<e;t++)u=n[t],r.push(u["#name"]);return r}().concat(c).join("/"),function(){var e;try{return l=t.options.validator(y,d&&d[c],l)}catch(r){return e=r,t.emit("error",e)}}()),t.options.explicitChildren&&!t.options.mergeAttrs&&"object"==typeof l)if(t.options.preserveChildrenOrder){if(d){d[t.options.childkey]=d[t.options.childkey]||[],f={};for(a in l)h.call(l,a)&&(f[a]=l[a]);d[t.options.childkey].push(f),delete l["#name"],1===Object.keys(l).length&&e in l&&!t.EXPLICIT_CHARKEY&&(l=l[e])}}else u={},t.options.attrkey in l&&(u[t.options.attrkey]=l[t.options.attrkey],delete l[t.options.attrkey]),!t.options.charsAsChildren&&t.options.charkey in l&&(u[t.options.charkey]=l[t.options.charkey],delete l[t.options.charkey]),Object.getOwnPropertyNames(l).length>0&&(u[t.options.childkey]=l),l=u;return n.length>0?t.assignOrPush(d,c,l):(t.options.explicitRoot&&(p=l,l={},l[c]=p),t.resultObject=l,t.saxParser.ended=!0,t.emit("end",t.resultObject))}}(this),r=function(t){return function(r){var i,o;if(o=n[n.length-1])return o[e]+=r,t.options.explicitChildren&&t.options.preserveChildrenOrder&&t.options.charsAsChildren&&(t.options.includeWhiteChars||""!==r.replace(/\\n/g,"").trim())&&(o[t.options.childkey]=o[t.options.childkey]||[],i={"#name":"__text__"},i[e]=r,t.options.normalize&&(i[e]=i[e].replace(/\s{2,}/g," ").trim()),o[t.options.childkey].push(i)),o}}(this),this.saxParser.ontext=r,this.saxParser.oncdata=function(t){return function(t){var e;if(e=r(t))return e.cdata=!0}}(this)},i.prototype.parseString=function(t,r){var n;null!=r&&"function"==typeof r&&(this.on("end",function(t){return this.reset(),r(null,t)}),this.on("error",function(t){return this.reset(),r(t)}));try{return t=t.toString(),""===t.trim()?(this.emit("end",null),!0):(t=e.stripBOM(t),this.options.async?(this.remaining=t,c(this.processAsync),this.saxParser):this.saxParser.write(t).close())}catch(i){if(n=i,!this.saxParser.errThrown&&!this.saxParser.ended)return this.emit("error",n),this.saxParser.errThrown=!0;if(this.saxParser.ended)throw n}},i}(i.EventEmitter),r.parseString=function(t,e,n){var i,o,s;return null!=n?("function"==typeof n&&(i=n),"object"==typeof e&&(o=e)):("function"==typeof e&&(i=e),o={}),s=new r.Parser(o),s.parseString(t,i)}}).call(this)},{"./bom":73,"./defaults":75,"./processors":77,events:37,sax:66,timers:69}],77:[function(t,e,r){(function(){"use strict";var t;t=new RegExp(/(?!xmlns)^.*:/),r.normalize=function(t){return t.toLowerCase()},r.firstCharLowerCase=function(t){return t.charAt(0).toLowerCase()+t.slice(1)},r.stripPrefix=function(e){return e.replace(t,"")},r.parseNumbers=function(t){return isNaN(t)||(t=t%1===0?parseInt(t,10):parseFloat(t)),t},r.parseBooleans=function(t){return/^(?:true|false)$/i.test(t)&&(t="true"===t.toLowerCase()),t}}).call(this)},{}],78:[function(t,e,r){(function(){"use strict";var e,n,i,o,s=function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty;n=t("./defaults"),e=t("./builder"),i=t("./parser"),o=t("./processors"),r.defaults=n.defaults,r.processors=o,r.ValidationError=function(t){function e(t){this.message=t;
}return s(e,t),e}(Error),r.Builder=e.Builder,r.Parser=i.Parser,r.parseString=i.parseString}).call(this)},{"./builder":74,"./defaults":75,"./parser":76,"./processors":77}],79:[function(t,e,r){(function(){var t,r,n,i,o,s,a=[].slice,u={}.hasOwnProperty;t=function(){var t,e,r,n,o,s;if(s=arguments[0],o=2<=arguments.length?a.call(arguments,1):[],i(Object.assign))Object.assign.apply(null,arguments);else for(t=0,r=o.length;t<r;t++)if(n=o[t],null!=n)for(e in n)u.call(n,e)&&(s[e]=n[e]);return s},i=function(t){return!!t&&"[object Function]"===Object.prototype.toString.call(t)},o=function(t){var e;return!!t&&("function"==(e=typeof t)||"object"===e)},r=function(t){return i(Array.isArray)?Array.isArray(t):"[object Array]"===Object.prototype.toString.call(t)},n=function(t){var e;if(r(t))return!t.length;for(e in t)if(u.call(t,e))return!1;return!0},s=function(t){var e,r;return o(t)&&(r=Object.getPrototypeOf(t))&&(e=r.constructor)&&"function"==typeof e&&e instanceof e&&Function.prototype.toString.call(e)===Function.prototype.toString.call(Object)},e.exports.assign=t,e.exports.isFunction=i,e.exports.isObject=o,e.exports.isArray=r,e.exports.isEmpty=n,e.exports.isPlainObject=s}).call(this)},{}],80:[function(t,e,r){(function(){var t;e.exports=t=function(){function t(t,e,r){if(this.options=t.options,this.stringify=t.stringify,null==e)throw new Error("Missing attribute name of element "+t.name);if(null==r)throw new Error("Missing attribute value for attribute "+e+" of element "+t.name);this.name=this.stringify.attName(e),this.value=this.stringify.attValue(r)}return t.prototype.clone=function(){return Object.create(this)},t.prototype.toString=function(t){return this.options.writer.set(t).attribute(this)},t}()}).call(this)},{}],81:[function(t,e,r){(function(){var r,n,i=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty;n=t("./XMLNode"),e.exports=r=function(t){function e(t,r){if(e.__super__.constructor.call(this,t),null==r)throw new Error("Missing CDATA text");this.text=this.stringify.cdata(r)}return i(e,t),e.prototype.clone=function(){return Object.create(this)},e.prototype.toString=function(t){return this.options.writer.set(t).cdata(this)},e}(n)}).call(this)},{"./XMLNode":92}],82:[function(t,e,r){(function(){var r,n,i=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty;n=t("./XMLNode"),e.exports=r=function(t){function e(t,r){if(e.__super__.constructor.call(this,t),null==r)throw new Error("Missing comment text");this.text=this.stringify.comment(r)}return i(e,t),e.prototype.clone=function(){return Object.create(this)},e.prototype.toString=function(t){return this.options.writer.set(t).comment(this)},e}(n)}).call(this)},{"./XMLNode":92}],83:[function(t,e,r){(function(){var r,n,i=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty;n=t("./XMLNode"),e.exports=r=function(t){function e(t,r,n,i,o,s){if(e.__super__.constructor.call(this,t),null==r)throw new Error("Missing DTD element name");if(null==n)throw new Error("Missing DTD attribute name");if(!i)throw new Error("Missing DTD attribute type");if(!o)throw new Error("Missing DTD attribute default");if(0!==o.indexOf("#")&&(o="#"+o),!o.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/))throw new Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT");if(s&&!o.match(/^(#FIXED|#DEFAULT)$/))throw new Error("Default value only applies to #FIXED or #DEFAULT");this.elementName=this.stringify.eleName(r),this.attributeName=this.stringify.attName(n),this.attributeType=this.stringify.dtdAttType(i),this.defaultValue=this.stringify.dtdAttDefault(s),this.defaultValueType=o}return i(e,t),e.prototype.toString=function(t){return this.options.writer.set(t).dtdAttList(this)},e}(n)}).call(this)},{"./XMLNode":92}],84:[function(t,e,r){(function(){var r,n,i=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty;n=t("./XMLNode"),e.exports=r=function(t){function e(t,r,n){if(e.__super__.constructor.call(this,t),null==r)throw new Error("Missing DTD element name");n||(n="(#PCDATA)"),Array.isArray(n)&&(n="("+n.join(",")+")"),this.name=this.stringify.eleName(r),this.value=this.stringify.dtdElementValue(n)}return i(e,t),e.prototype.toString=function(t){return this.options.writer.set(t).dtdElement(this)},e}(n)}).call(this)},{"./XMLNode":92}],85:[function(t,e,r){(function(){var r,n,i,o=function(t,e){function r(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty;i=t("./Utility").isObject,n=t("./XMLNode"),e.exports=r=function(t){function e(t,r,n,o){if(e.__super__.constructor.call(this,t),null==n)throw new Error("Missing entity name");if(null==o)throw new Error("Missing entity value");if(this.pe=!!r,this.name=this.stringify.eleName(n),i(o)){if(!o.pubID&&!o.sysID)throw new Error("Public and/or system identifiers are required for an external entity");if(o.pubID&&!o.sysID)throw new Error("System identifier is required for a public external entity");if(null!=o.pubID&&(this.pubID=this.stringify.dtdPubID(o.pubID)),null!=o.sysID&&(this.sysID=this.stringify.dtdSysID(o.sysID)),null!=o.nData&&(this.nData=this.stringify.dtdNData(o.nData)),this.pe&&this.nData)throw new Error("Notation declaration is not allowed in a parameter entity")}else this.value=this.stringify.dtdEntityValue(o)}return o(e,t),e.prototype.toString=function(t){return this.options.writer.set(t).dtdEntity(this)},e}(n)}).call(this)},{"./Utility":79,"./XMLNode":92}],86:[function(t,e,r){(function(){var r,n,i=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty;n=t("./XMLNode"),e.exports=r=function(t){function e(t,r,n){if(e.__super__.constructor.call(this,t),null==r)throw new Error("Missing notation name");if(!n.pubID&&!n.sysID)throw new Error("Public or system identifiers are required for an external entity");this.name=this.stringify.eleName(r),null!=n.pubID&&(this.pubID=this.stringify.dtdPubID(n.pubID)),null!=n.sysID&&(this.sysID=this.stringify.dtdSysID(n.sysID))}return i(e,t),e.prototype.toString=function(t){return this.options.writer.set(t).dtdNotation(this)},e}(n)}).call(this)},{"./XMLNode":92}],87:[function(t,e,r){(function(){var r,n,i,o=function(t,e){function r(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty;i=t("./Utility").isObject,n=t("./XMLNode"),e.exports=r=function(t){function e(t,r,n,o){var s;e.__super__.constructor.call(this,t),i(r)&&(s=r,r=s.version,n=s.encoding,o=s.standalone),r||(r="1.0"),this.version=this.stringify.xmlVersion(r),null!=n&&(this.encoding=this.stringify.xmlEncoding(n)),null!=o&&(this.standalone=this.stringify.xmlStandalone(o))}return o(e,t),e.prototype.toString=function(t){return this.options.writer.set(t).declaration(this)},e}(n)}).call(this)},{"./Utility":79,"./XMLNode":92}],88:[function(t,e,r){(function(){var r,n,i,o,s,a,u,c=function(t,e){function r(){this.constructor=t}for(var n in e)l.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},l={}.hasOwnProperty;u=t("./Utility").isObject,a=t("./XMLNode"),r=t("./XMLDTDAttList"),i=t("./XMLDTDEntity"),n=t("./XMLDTDElement"),o=t("./XMLDTDNotation"),e.exports=s=function(t){function e(t,r,n){var i,o;e.__super__.constructor.call(this,t),this.documentObject=t,u(r)&&(i=r,r=i.pubID,n=i.sysID),null==n&&(o=[r,n],n=o[0],r=o[1]),null!=r&&(this.pubID=this.stringify.dtdPubID(r)),null!=n&&(this.sysID=this.stringify.dtdSysID(n))}return c(e,t),e.prototype.element=function(t,e){var r;return r=new n(this,t,e),this.children.push(r),this},e.prototype.attList=function(t,e,n,i,o){var s;return s=new r(this,t,e,n,i,o),this.children.push(s),this},e.prototype.entity=function(t,e){var r;return r=new i(this,(!1),t,e),this.children.push(r),this},e.prototype.pEntity=function(t,e){var r;return r=new i(this,(!0),t,e),this.children.push(r),this},e.prototype.notation=function(t,e){var r;return r=new o(this,t,e),this.children.push(r),this},e.prototype.toString=function(t){return this.options.writer.set(t).docType(this)},e.prototype.ele=function(t,e){return this.element(t,e)},e.prototype.att=function(t,e,r,n,i){return this.attList(t,e,r,n,i)},e.prototype.ent=function(t,e){return this.entity(t,e)},e.prototype.pent=function(t,e){return this.pEntity(t,e)},e.prototype.not=function(t,e){return this.notation(t,e)},e.prototype.up=function(){return this.root()||this.documentObject},e}(a)}).call(this)},{"./Utility":79,"./XMLDTDAttList":83,"./XMLDTDElement":84,"./XMLDTDEntity":85,"./XMLDTDNotation":86,"./XMLNode":92}],89:[function(t,e,r){(function(){var r,n,i,o,s,a=function(t,e){function r(){this.constructor=t}for(var n in e)u.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},u={}.hasOwnProperty;s=t("./Utility").isPlainObject,n=t("./XMLNode"),o=t("./XMLStringifier"),i=t("./XMLStringWriter"),e.exports=r=function(t){function e(t){e.__super__.constructor.call(this,null),t||(t={}),t.writer||(t.writer=new i),this.options=t,this.stringify=new o(t),this.isDocument=!0}return a(e,t),e.prototype.end=function(t){var e;return t?s(t)&&(e=t,t=this.options.writer.set(e)):t=this.options.writer,t.document(this)},e.prototype.toString=function(t){return this.options.writer.set(t).document(this)},e}(n)}).call(this)},{"./Utility":79,"./XMLNode":92,"./XMLStringWriter":96,"./XMLStringifier":97}],90:[function(t,e,r){(function(){var r,n,i,o,s,a,u,c,l,f,h,p,d,y,m,g,v,_,b,w,E={}.hasOwnProperty;w=t("./Utility"),_=w.isObject,v=w.isFunction,b=w.isPlainObject,h=t("./XMLElement"),n=t("./XMLCData"),i=t("./XMLComment"),d=t("./XMLRaw"),g=t("./XMLText"),p=t("./XMLProcessingInstruction"),c=t("./XMLDeclaration"),l=t("./XMLDocType"),o=t("./XMLDTDAttList"),a=t("./XMLDTDEntity"),s=t("./XMLDTDElement"),u=t("./XMLDTDNotation"),r=t("./XMLAttribute"),m=t("./XMLStringifier"),y=t("./XMLStringWriter"),e.exports=f=function(){function t(t,e,r){var n;t||(t={}),t.writer?b(t.writer)&&(n=t.writer,t.writer=new y(n)):t.writer=new y(t),this.options=t,this.writer=t.writer,this.stringify=new m(t),this.onDataCallback=e||function(){},this.onEndCallback=r||function(){},this.currentNode=null,this.currentLevel=-1,this.openTags={},this.documentStarted=!1,this.documentCompleted=!1,this.root=null}return t.prototype.node=function(t,e,r){var n;if(null==t)throw new Error("Missing node name");if(this.root&&this.currentLevel===-1)throw new Error("Document can only have one root node");return this.openCurrent(),t=t.valueOf(),null==e&&(e={}),e=e.valueOf(),_(e)||(n=[e,r],r=n[0],e=n[1]),this.currentNode=new h(this,t,e),this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,null!=r&&this.text(r),this},t.prototype.element=function(t,e,r){return this.currentNode&&this.currentNode instanceof l?this.dtdElement.apply(this,arguments):this.node(t,e,r)},t.prototype.attribute=function(t,e){var n,i;if(!this.currentNode||this.currentNode.children)throw new Error("att() can only be used immediately after an ele() call in callback mode");if(null!=t&&(t=t.valueOf()),_(t))for(n in t)E.call(t,n)&&(i=t[n],this.attribute(n,i));else v(e)&&(e=e.apply()),this.options.skipNullAttributes&&null==e||(this.currentNode.attributes[t]=new r(this,t,e));return this},t.prototype.text=function(t){var e;return this.openCurrent(),e=new g(this,t),this.onData(this.writer.text(e,this.currentLevel+1)),this},t.prototype.cdata=function(t){var e;return this.openCurrent(),e=new n(this,t),this.onData(this.writer.cdata(e,this.currentLevel+1)),this},t.prototype.comment=function(t){var e;return this.openCurrent(),e=new i(this,t),this.onData(this.writer.comment(e,this.currentLevel+1)),this},t.prototype.raw=function(t){var e;return this.openCurrent(),e=new d(this,t),this.onData(this.writer.raw(e,this.currentLevel+1)),this},t.prototype.instruction=function(t,e){var r,n,i,o,s;if(this.openCurrent(),null!=t&&(t=t.valueOf()),null!=e&&(e=e.valueOf()),Array.isArray(t))for(r=0,o=t.length;r<o;r++)n=t[r],this.instruction(n);else if(_(t))for(n in t)E.call(t,n)&&(i=t[n],this.instruction(n,i));else v(e)&&(e=e.apply()),s=new p(this,t,e),this.onData(this.writer.processingInstruction(s,this.currentLevel+1));return this},t.prototype.declaration=function(t,e,r){var n;if(this.openCurrent(),this.documentStarted)throw new Error("declaration() must be the first node");return n=new c(this,t,e,r),this.onData(this.writer.declaration(n,this.currentLevel+1)),this},t.prototype.doctype=function(t,e,r){if(this.openCurrent(),null==t)throw new Error("Missing root node name");if(this.root)throw new Error("dtd() must come before the root node");return this.currentNode=new l(this,e,r),this.currentNode.rootNodeName=t,this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,this},t.prototype.dtdElement=function(t,e){var r;return this.openCurrent(),r=new s(this,t,e),this.onData(this.writer.dtdElement(r,this.currentLevel+1)),this},t.prototype.attList=function(t,e,r,n,i){var s;return this.openCurrent(),s=new o(this,t,e,r,n,i),this.onData(this.writer.dtdAttList(s,this.currentLevel+1)),this},t.prototype.entity=function(t,e){var r;return this.openCurrent(),r=new a(this,(!1),t,e),this.onData(this.writer.dtdEntity(r,this.currentLevel+1)),this},t.prototype.pEntity=function(t,e){var r;return this.openCurrent(),r=new a(this,(!0),t,e),this.onData(this.writer.dtdEntity(r,this.currentLevel+1)),this},t.prototype.notation=function(t,e){var r;return this.openCurrent(),r=new u(this,t,e),this.onData(this.writer.dtdNotation(r,this.currentLevel+1)),this},t.prototype.up=function(){if(this.currentLevel<0)throw new Error("The document node has no parent");return this.currentNode?(this.currentNode.children?this.closeNode(this.currentNode):this.openNode(this.currentNode),this.currentNode=null):this.closeNode(this.openTags[this.currentLevel]),delete this.openTags[this.currentLevel],this.currentLevel--,this},t.prototype.end=function(){for(;this.currentLevel>=0;)this.up();return this.onEnd()},t.prototype.openCurrent=function(){if(this.currentNode)return this.currentNode.children=!0,this.openNode(this.currentNode)},t.prototype.openNode=function(t){if(!t.isOpen)return!this.root&&0===this.currentLevel&&t instanceof h&&(this.root=t),this.onData(this.writer.openNode(t,this.currentLevel)),t.isOpen=!0},t.prototype.closeNode=function(t){if(!t.isClosed)return this.onData(this.writer.closeNode(t,this.currentLevel)),t.isClosed=!0},t.prototype.onData=function(t){return this.documentStarted=!0,this.onDataCallback(t)},t.prototype.onEnd=function(){return this.documentCompleted=!0,this.onEndCallback()},t.prototype.ele=function(){return this.element.apply(this,arguments)},t.prototype.nod=function(t,e,r){return this.node(t,e,r)},t.prototype.txt=function(t){return this.text(t)},t.prototype.dat=function(t){return this.cdata(t)},t.prototype.com=function(t){return this.comment(t)},t.prototype.ins=function(t,e){return this.instruction(t,e)},t.prototype.dec=function(t,e,r){return this.declaration(t,e,r)},t.prototype.dtd=function(t,e,r){return this.doctype(t,e,r)},t.prototype.e=function(t,e,r){return this.element(t,e,r)},t.prototype.n=function(t,e,r){return this.node(t,e,r)},t.prototype.t=function(t){return this.text(t)},t.prototype.d=function(t){return this.cdata(t)},t.prototype.c=function(t){return this.comment(t)},t.prototype.r=function(t){return this.raw(t)},t.prototype.i=function(t,e){return this.instruction(t,e)},t.prototype.att=function(){return this.currentNode&&this.currentNode instanceof l?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},t.prototype.a=function(){return this.currentNode&&this.currentNode instanceof l?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},t.prototype.ent=function(t,e){return this.entity(t,e)},t.prototype.pent=function(t,e){return this.pEntity(t,e)},t.prototype.not=function(t,e){return this.notation(t,e)},t}()}).call(this)},{"./Utility":79,"./XMLAttribute":80,"./XMLCData":81,"./XMLComment":82,"./XMLDTDAttList":83,"./XMLDTDElement":84,"./XMLDTDEntity":85,"./XMLDTDNotation":86,"./XMLDeclaration":87,"./XMLDocType":88,"./XMLElement":91,"./XMLProcessingInstruction":93,"./XMLRaw":94,"./XMLStringWriter":96,"./XMLStringifier":97,"./XMLText":98}],91:[function(t,e,r){(function(){var r,n,i,o,s,a,u=function(t,e){function r(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},c={}.hasOwnProperty;a=t("./Utility"),s=a.isObject,o=a.isFunction,i=t("./XMLNode"),r=t("./XMLAttribute"),e.exports=n=function(t){function e(t,r,n){if(e.__super__.constructor.call(this,t),null==r)throw new Error("Missing element name");this.name=this.stringify.eleName(r),this.attributes={},null!=n&&this.attribute(n),t.isDocument&&(this.isRoot=!0,this.documentObject=t,t.rootObject=this)}return u(e,t),e.prototype.clone=function(){var t,e,r,n;r=Object.create(this),r.isRoot&&(r.documentObject=null),r.attributes={},n=this.attributes;for(e in n)c.call(n,e)&&(t=n[e],r.attributes[e]=t.clone());return r.children=[],this.children.forEach(function(t){var e;return e=t.clone(),e.parent=r,r.children.push(e)}),r},e.prototype.attribute=function(t,e){var n,i;if(null!=t&&(t=t.valueOf()),s(t))for(n in t)c.call(t,n)&&(i=t[n],this.attribute(n,i));else o(e)&&(e=e.apply()),this.options.skipNullAttributes&&null==e||(this.attributes[t]=new r(this,t,e));return this},e.prototype.removeAttribute=function(t){var e,r,n;if(null==t)throw new Error("Missing attribute name");if(t=t.valueOf(),Array.isArray(t))for(r=0,n=t.length;r<n;r++)e=t[r],delete this.attributes[e];else delete this.attributes[t];return this},e.prototype.toString=function(t){return this.options.writer.set(t).element(this)},e.prototype.att=function(t,e){return this.attribute(t,e)},e.prototype.a=function(t,e){return this.attribute(t,e)},e}(i)}).call(this)},{"./Utility":79,"./XMLAttribute":80,"./XMLNode":92}],92:[function(t,e,r){(function(){var r,n,i,o,s,a,u,c,l,f,h,p,d,y={}.hasOwnProperty;d=t("./Utility"),p=d.isObject,h=d.isFunction,f=d.isEmpty,s=null,r=null,n=null,i=null,o=null,c=null,l=null,u=null,e.exports=a=function(){function e(e){this.parent=e,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),this.children=[],s||(s=t("./XMLElement"),r=t("./XMLCData"),n=t("./XMLComment"),i=t("./XMLDeclaration"),o=t("./XMLDocType"),c=t("./XMLRaw"),l=t("./XMLText"),u=t("./XMLProcessingInstruction"))}return e.prototype.element=function(t,e,r){var n,i,o,s,a,u,c,l,d,m;if(u=null,null==e&&(e={}),e=e.valueOf(),p(e)||(d=[e,r],r=d[0],e=d[1]),null!=t&&(t=t.valueOf()),Array.isArray(t))for(o=0,c=t.length;o<c;o++)i=t[o],u=this.element(i);else if(h(t))u=this.element(t.apply());else if(p(t)){for(a in t)if(y.call(t,a))if(m=t[a],h(m)&&(m=m.apply()),p(m)&&f(m)&&(m=null),!this.options.ignoreDecorators&&this.stringify.convertAttKey&&0===a.indexOf(this.stringify.convertAttKey))u=this.attribute(a.substr(this.stringify.convertAttKey.length),m);else if(!this.options.separateArrayItems&&Array.isArray(m))for(s=0,l=m.length;s<l;s++)i=m[s],n={},n[a]=i,u=this.element(n);else p(m)?(u=this.element(a),u.element(m)):u=this.element(a,m)}else u=!this.options.ignoreDecorators&&this.stringify.convertTextKey&&0===t.indexOf(this.stringify.convertTextKey)?this.text(r):!this.options.ignoreDecorators&&this.stringify.convertCDataKey&&0===t.indexOf(this.stringify.convertCDataKey)?this.cdata(r):!this.options.ignoreDecorators&&this.stringify.convertCommentKey&&0===t.indexOf(this.stringify.convertCommentKey)?this.comment(r):!this.options.ignoreDecorators&&this.stringify.convertRawKey&&0===t.indexOf(this.stringify.convertRawKey)?this.raw(r):!this.options.ignoreDecorators&&this.stringify.convertPIKey&&0===t.indexOf(this.stringify.convertPIKey)?this.instruction(t.substr(this.stringify.convertPIKey.length),r):this.node(t,e,r);if(null==u)throw new Error("Could not create any elements with: "+t);return u},e.prototype.insertBefore=function(t,e,r){var n,i,o;if(this.isRoot)throw new Error("Cannot insert elements at root level");return i=this.parent.children.indexOf(this),o=this.parent.children.splice(i),n=this.parent.element(t,e,r),Array.prototype.push.apply(this.parent.children,o),n},e.prototype.insertAfter=function(t,e,r){var n,i,o;if(this.isRoot)throw new Error("Cannot insert elements at root level");return i=this.parent.children.indexOf(this),o=this.parent.children.splice(i+1),n=this.parent.element(t,e,r),Array.prototype.push.apply(this.parent.children,o),n},e.prototype.remove=function(){var t,e;if(this.isRoot)throw new Error("Cannot remove the root element");return t=this.parent.children.indexOf(this),[].splice.apply(this.parent.children,[t,t-t+1].concat(e=[])),e,this.parent},e.prototype.node=function(t,e,r){var n,i;return null!=t&&(t=t.valueOf()),e||(e={}),e=e.valueOf(),p(e)||(i=[e,r],r=i[0],e=i[1]),n=new s(this,t,e),null!=r&&n.text(r),this.children.push(n),n},e.prototype.text=function(t){var e;return e=new l(this,t),this.children.push(e),this},e.prototype.cdata=function(t){var e;return e=new r(this,t),this.children.push(e),this},e.prototype.comment=function(t){var e;return e=new n(this,t),this.children.push(e),this},e.prototype.commentBefore=function(t){var e,r,n;return r=this.parent.children.indexOf(this),n=this.parent.children.splice(r),e=this.parent.comment(t),Array.prototype.push.apply(this.parent.children,n),this},e.prototype.commentAfter=function(t){var e,r,n;return r=this.parent.children.indexOf(this),n=this.parent.children.splice(r+1),e=this.parent.comment(t),Array.prototype.push.apply(this.parent.children,n),this},e.prototype.raw=function(t){var e;return e=new c(this,t),this.children.push(e),this},e.prototype.instruction=function(t,e){var r,n,i,o,s;if(null!=t&&(t=t.valueOf()),null!=e&&(e=e.valueOf()),Array.isArray(t))for(o=0,s=t.length;o<s;o++)r=t[o],this.instruction(r);else if(p(t))for(r in t)y.call(t,r)&&(n=t[r],this.instruction(r,n));else h(e)&&(e=e.apply()),i=new u(this,t,e),this.children.push(i);return this},e.prototype.instructionBefore=function(t,e){var r,n,i;return n=this.parent.children.indexOf(this),i=this.parent.children.splice(n),r=this.parent.instruction(t,e),Array.prototype.push.apply(this.parent.children,i),this},e.prototype.instructionAfter=function(t,e){var r,n,i;return n=this.parent.children.indexOf(this),i=this.parent.children.splice(n+1),r=this.parent.instruction(t,e),Array.prototype.push.apply(this.parent.children,i),this},e.prototype.declaration=function(t,e,r){var n,o;return n=this.document(),o=new i(n,t,e,r),n.children[0]instanceof i?n.children[0]=o:n.children.unshift(o),n.root()||n},e.prototype.doctype=function(t,e){var r,n,i,s,a,u,c,l,f,h;for(n=this.document(),i=new o(n,t,e),f=n.children,s=a=0,c=f.length;a<c;s=++a)if(r=f[s],r instanceof o)return n.children[s]=i,i;for(h=n.children,s=u=0,l=h.length;u<l;s=++u)if(r=h[s],r.isRoot)return n.children.splice(s,0,i),i;return n.children.push(i),i},e.prototype.up=function(){if(this.isRoot)throw new Error("The root node has no parent. Use doc() if you need to get the document object.");return this.parent},e.prototype.root=function(){var t;for(t=this;t;){if(t.isDocument)return t.rootObject;if(t.isRoot)return t;t=t.parent}},e.prototype.document=function(){var t;for(t=this;t;){if(t.isDocument)return t;t=t.parent}},e.prototype.end=function(t){return this.document().end(t)},e.prototype.prev=function(){var t;if(t=this.parent.children.indexOf(this),t<1)throw new Error("Already at the first node");return this.parent.children[t-1]},e.prototype.next=function(){var t;if(t=this.parent.children.indexOf(this),t===-1||t===this.parent.children.length-1)throw new Error("Already at the last node");return this.parent.children[t+1]},e.prototype.importDocument=function(t){var e;return e=t.root().clone(),e.parent=this,e.isRoot=!1,this.children.push(e),this},e.prototype.ele=function(t,e,r){return this.element(t,e,r)},e.prototype.nod=function(t,e,r){return this.node(t,e,r)},e.prototype.txt=function(t){return this.text(t)},e.prototype.dat=function(t){return this.cdata(t)},e.prototype.com=function(t){return this.comment(t)},e.prototype.ins=function(t,e){return this.instruction(t,e)},e.prototype.doc=function(){return this.document()},e.prototype.dec=function(t,e,r){return this.declaration(t,e,r)},e.prototype.dtd=function(t,e){return this.doctype(t,e)},e.prototype.e=function(t,e,r){return this.element(t,e,r)},e.prototype.n=function(t,e,r){return this.node(t,e,r)},e.prototype.t=function(t){return this.text(t)},e.prototype.d=function(t){return this.cdata(t)},e.prototype.c=function(t){return this.comment(t)},e.prototype.r=function(t){return this.raw(t)},e.prototype.i=function(t,e){return this.instruction(t,e)},e.prototype.u=function(){return this.up()},e.prototype.importXMLBuilder=function(t){return this.importDocument(t)},e}()}).call(this)},{"./Utility":79,"./XMLCData":81,"./XMLComment":82,"./XMLDeclaration":87,"./XMLDocType":88,"./XMLElement":91,"./XMLProcessingInstruction":93,"./XMLRaw":94,"./XMLText":98}],93:[function(t,e,r){(function(){var r,n,i=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty;r=t("./XMLNode"),e.exports=n=function(t){function e(t,r,n){if(e.__super__.constructor.call(this,t),null==r)throw new Error("Missing instruction target");this.target=this.stringify.insTarget(r),n&&(this.value=this.stringify.insValue(n))}return i(e,t),e.prototype.clone=function(){return Object.create(this)},e.prototype.toString=function(t){return this.options.writer.set(t).processingInstruction(this)},e}(r)}).call(this)},{"./XMLNode":92}],94:[function(t,e,r){(function(){var r,n,i=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty;r=t("./XMLNode"),e.exports=n=function(t){function e(t,r){if(e.__super__.constructor.call(this,t),null==r)throw new Error("Missing raw text");this.value=this.stringify.raw(r)}return i(e,t),e.prototype.clone=function(){return Object.create(this)},e.prototype.toString=function(t){return this.options.writer.set(t).raw(this)},e}(r)}).call(this)},{"./XMLNode":92}],95:[function(t,e,r){(function(){var r,n,i,o,s,a,u,c,l,f,h,p,d,y,m=function(t,e){function r(){this.constructor=t}for(var n in e)g.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},g={}.hasOwnProperty;u=t("./XMLDeclaration"),c=t("./XMLDocType"),r=t("./XMLCData"),n=t("./XMLComment"),l=t("./XMLElement"),h=t("./XMLRaw"),d=t("./XMLText"),f=t("./XMLProcessingInstruction"),i=t("./XMLDTDAttList"),o=t("./XMLDTDElement"),s=t("./XMLDTDEntity"),a=t("./XMLDTDNotation"),y=t("./XMLWriterBase"),e.exports=p=function(t){function e(t,r){e.__super__.constructor.call(this,r),this.stream=t}return m(e,t),e.prototype.document=function(t){var e,r,i,o,s,a,l,h;for(a=t.children,r=0,o=a.length;r<o;r++)e=a[r],e.isLastRootNode=!1;for(t.children[t.children.length-1].isLastRootNode=!0,l=t.children,h=[],i=0,s=l.length;i<s;i++)switch(e=l[i],!1){case!(e instanceof u):h.push(this.declaration(e));break;case!(e instanceof c):h.push(this.docType(e));break;case!(e instanceof n):h.push(this.comment(e));break;case!(e instanceof f):h.push(this.processingInstruction(e));break;default:h.push(this.element(e))}return h},e.prototype.attribute=function(t){return this.stream.write(" "+t.name+'="'+t.value+'"')},e.prototype.cdata=function(t,e){return this.stream.write(this.space(e)+"<![CDATA["+t.text+"]]>"+this.endline(t))},e.prototype.comment=function(t,e){return this.stream.write(this.space(e)+"<!-- "+t.text+" -->"+this.endline(t))},e.prototype.declaration=function(t,e){return this.stream.write(this.space(e)),this.stream.write('<?xml version="'+t.version+'"'),null!=t.encoding&&this.stream.write(' encoding="'+t.encoding+'"'),null!=t.standalone&&this.stream.write(' standalone="'+t.standalone+'"'),this.stream.write(this.spacebeforeslash+"?>"),this.stream.write(this.endline(t))},e.prototype.docType=function(t,e){var u,c,l,h;if(e||(e=0),this.stream.write(this.space(e)),this.stream.write("<!DOCTYPE "+t.root().name),t.pubID&&t.sysID?this.stream.write(' PUBLIC "'+t.pubID+'" "'+t.sysID+'"'):t.sysID&&this.stream.write(' SYSTEM "'+t.sysID+'"'),t.children.length>0){for(this.stream.write(" ["),this.stream.write(this.endline(t)),h=t.children,c=0,l=h.length;c<l;c++)switch(u=h[c],!1){case!(u instanceof i):this.dtdAttList(u,e+1);break;case!(u instanceof o):this.dtdElement(u,e+1);break;case!(u instanceof s):this.dtdEntity(u,e+1);break;case!(u instanceof a):this.dtdNotation(u,e+1);break;case!(u instanceof r):this.cdata(u,e+1);break;case!(u instanceof n):this.comment(u,e+1);break;case!(u instanceof f):this.processingInstruction(u,e+1);break;default:throw new Error("Unknown DTD node type: "+u.constructor.name)}this.stream.write("]")}return this.stream.write(this.spacebeforeslash+">"),this.stream.write(this.endline(t))},e.prototype.element=function(t,e){var i,o,s,a,u,c,p,y;e||(e=0),y=this.space(e),this.stream.write(y+"<"+t.name),c=t.attributes;for(u in c)g.call(c,u)&&(i=c[u],this.attribute(i));if(0===t.children.length||t.children.every(function(t){return""===t.value}))this.allowEmpty?this.stream.write("></"+t.name+">"):this.stream.write(this.spacebeforeslash+"/>");else if(this.pretty&&1===t.children.length&&null!=t.children[0].value)this.stream.write(">"),this.stream.write(t.children[0].value),this.stream.write("</"+t.name+">");else{for(this.stream.write(">"+this.newline),p=t.children,s=0,a=p.length;s<a;s++)switch(o=p[s],!1){case!(o instanceof r):this.cdata(o,e+1);break;case!(o instanceof n):this.comment(o,e+1);break;case!(o instanceof l):this.element(o,e+1);break;case!(o instanceof h):this.raw(o,e+1);break;case!(o instanceof d):this.text(o,e+1);break;case!(o instanceof f):this.processingInstruction(o,e+1);break;default:throw new Error("Unknown XML node type: "+o.constructor.name)}this.stream.write(y+"</"+t.name+">")}return this.stream.write(this.endline(t))},e.prototype.processingInstruction=function(t,e){return this.stream.write(this.space(e)+"<?"+t.target),t.value&&this.stream.write(" "+t.value),this.stream.write(this.spacebeforeslash+"?>"+this.endline(t))},e.prototype.raw=function(t,e){return this.stream.write(this.space(e)+t.value+this.endline(t))},e.prototype.text=function(t,e){return this.stream.write(this.space(e)+t.value+this.endline(t))},e.prototype.dtdAttList=function(t,e){return this.stream.write(this.space(e)+"<!ATTLIST "+t.elementName+" "+t.attributeName+" "+t.attributeType),"#DEFAULT"!==t.defaultValueType&&this.stream.write(" "+t.defaultValueType),t.defaultValue&&this.stream.write(' "'+t.defaultValue+'"'),this.stream.write(this.spacebeforeslash+">"+this.endline(t))},e.prototype.dtdElement=function(t,e){return this.stream.write(this.space(e)+"<!ELEMENT "+t.name+" "+t.value),this.stream.write(this.spacebeforeslash+">"+this.endline(t))},e.prototype.dtdEntity=function(t,e){return this.stream.write(this.space(e)+"<!ENTITY"),t.pe&&this.stream.write(" %"),this.stream.write(" "+t.name),t.value?this.stream.write(' "'+t.value+'"'):(t.pubID&&t.sysID?this.stream.write(' PUBLIC "'+t.pubID+'" "'+t.sysID+'"'):t.sysID&&this.stream.write(' SYSTEM "'+t.sysID+'"'),t.nData&&this.stream.write(" NDATA "+t.nData)),this.stream.write(this.spacebeforeslash+">"+this.endline(t))},e.prototype.dtdNotation=function(t,e){
return this.stream.write(this.space(e)+"<!NOTATION "+t.name),t.pubID&&t.sysID?this.stream.write(' PUBLIC "'+t.pubID+'" "'+t.sysID+'"'):t.pubID?this.stream.write(' PUBLIC "'+t.pubID+'"'):t.sysID&&this.stream.write(' SYSTEM "'+t.sysID+'"'),this.stream.write(this.spacebeforeslash+">"+this.endline(t))},e.prototype.endline=function(t){return t.isLastRootNode?"":this.newline},e}(y)}).call(this)},{"./XMLCData":81,"./XMLComment":82,"./XMLDTDAttList":83,"./XMLDTDElement":84,"./XMLDTDEntity":85,"./XMLDTDNotation":86,"./XMLDeclaration":87,"./XMLDocType":88,"./XMLElement":91,"./XMLProcessingInstruction":93,"./XMLRaw":94,"./XMLText":98,"./XMLWriterBase":99}],96:[function(t,e,r){(function(){var r,n,i,o,s,a,u,c,l,f,h,p,d,y,m=function(t,e){function r(){this.constructor=t}for(var n in e)g.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},g={}.hasOwnProperty;u=t("./XMLDeclaration"),c=t("./XMLDocType"),r=t("./XMLCData"),n=t("./XMLComment"),l=t("./XMLElement"),h=t("./XMLRaw"),d=t("./XMLText"),f=t("./XMLProcessingInstruction"),i=t("./XMLDTDAttList"),o=t("./XMLDTDElement"),s=t("./XMLDTDEntity"),a=t("./XMLDTDNotation"),y=t("./XMLWriterBase"),e.exports=p=function(t){function e(t){e.__super__.constructor.call(this,t)}return m(e,t),e.prototype.document=function(t){var e,r,i,o,s;for(this.textispresent=!1,o="",s=t.children,r=0,i=s.length;r<i;r++)e=s[r],o+=function(){switch(!1){case!(e instanceof u):return this.declaration(e);case!(e instanceof c):return this.docType(e);case!(e instanceof n):return this.comment(e);case!(e instanceof f):return this.processingInstruction(e);default:return this.element(e,0)}}.call(this);return this.pretty&&o.slice(-this.newline.length)===this.newline&&(o=o.slice(0,-this.newline.length)),o},e.prototype.attribute=function(t){return" "+t.name+'="'+t.value+'"'},e.prototype.cdata=function(t,e){return this.space(e)+"<![CDATA["+t.text+"]]>"+this.newline},e.prototype.comment=function(t,e){return this.space(e)+"<!-- "+t.text+" -->"+this.newline},e.prototype.declaration=function(t,e){var r;return r=this.space(e),r+='<?xml version="'+t.version+'"',null!=t.encoding&&(r+=' encoding="'+t.encoding+'"'),null!=t.standalone&&(r+=' standalone="'+t.standalone+'"'),r+=this.spacebeforeslash+"?>",r+=this.newline},e.prototype.docType=function(t,e){var u,c,l,h,p;if(e||(e=0),h=this.space(e),h+="<!DOCTYPE "+t.root().name,t.pubID&&t.sysID?h+=' PUBLIC "'+t.pubID+'" "'+t.sysID+'"':t.sysID&&(h+=' SYSTEM "'+t.sysID+'"'),t.children.length>0){for(h+=" [",h+=this.newline,p=t.children,c=0,l=p.length;c<l;c++)u=p[c],h+=function(){switch(!1){case!(u instanceof i):return this.dtdAttList(u,e+1);case!(u instanceof o):return this.dtdElement(u,e+1);case!(u instanceof s):return this.dtdEntity(u,e+1);case!(u instanceof a):return this.dtdNotation(u,e+1);case!(u instanceof r):return this.cdata(u,e+1);case!(u instanceof n):return this.comment(u,e+1);case!(u instanceof f):return this.processingInstruction(u,e+1);default:throw new Error("Unknown DTD node type: "+u.constructor.name)}}.call(this);h+="]"}return h+=this.spacebeforeslash+">",h+=this.newline},e.prototype.element=function(t,e){var i,o,s,a,u,c,p,y,m,v,_,b,w;e||(e=0),w=!1,this.textispresent?(this.newline="",this.pretty=!1):(this.newline=this.newlinedefault,this.pretty=this.prettydefault),b=this.space(e),y="",y+=b+"<"+t.name,m=t.attributes;for(p in m)g.call(m,p)&&(i=m[p],y+=this.attribute(i));if(0===t.children.length||t.children.every(function(t){return""===t.value}))y+=this.allowEmpty?"></"+t.name+">"+this.newline:this.spacebeforeslash+"/>"+this.newline;else if(this.pretty&&1===t.children.length&&null!=t.children[0].value)y+=">",y+=t.children[0].value,y+="</"+t.name+">"+this.newline;else{if(this.dontprettytextnodes)for(v=t.children,s=0,u=v.length;s<u;s++)if(o=v[s],null!=o.value){this.textispresent++,w=!0;break}for(this.textispresent&&(this.newline="",this.pretty=!1,b=this.space(e)),y+=">"+this.newline,_=t.children,a=0,c=_.length;a<c;a++)o=_[a],y+=function(){switch(!1){case!(o instanceof r):return this.cdata(o,e+1);case!(o instanceof n):return this.comment(o,e+1);case!(o instanceof l):return this.element(o,e+1);case!(o instanceof h):return this.raw(o,e+1);case!(o instanceof d):return this.text(o,e+1);case!(o instanceof f):return this.processingInstruction(o,e+1);default:throw new Error("Unknown XML node type: "+o.constructor.name)}}.call(this);w&&this.textispresent--,this.textispresent||(this.newline=this.newlinedefault,this.pretty=this.prettydefault),y+=b+"</"+t.name+">"+this.newline}return y},e.prototype.processingInstruction=function(t,e){var r;return r=this.space(e)+"<?"+t.target,t.value&&(r+=" "+t.value),r+=this.spacebeforeslash+"?>"+this.newline},e.prototype.raw=function(t,e){return this.space(e)+t.value+this.newline},e.prototype.text=function(t,e){return this.space(e)+t.value+this.newline},e.prototype.dtdAttList=function(t,e){var r;return r=this.space(e)+"<!ATTLIST "+t.elementName+" "+t.attributeName+" "+t.attributeType,"#DEFAULT"!==t.defaultValueType&&(r+=" "+t.defaultValueType),t.defaultValue&&(r+=' "'+t.defaultValue+'"'),r+=this.spacebeforeslash+">"+this.newline},e.prototype.dtdElement=function(t,e){return this.space(e)+"<!ELEMENT "+t.name+" "+t.value+this.spacebeforeslash+">"+this.newline},e.prototype.dtdEntity=function(t,e){var r;return r=this.space(e)+"<!ENTITY",t.pe&&(r+=" %"),r+=" "+t.name,t.value?r+=' "'+t.value+'"':(t.pubID&&t.sysID?r+=' PUBLIC "'+t.pubID+'" "'+t.sysID+'"':t.sysID&&(r+=' SYSTEM "'+t.sysID+'"'),t.nData&&(r+=" NDATA "+t.nData)),r+=this.spacebeforeslash+">"+this.newline},e.prototype.dtdNotation=function(t,e){var r;return r=this.space(e)+"<!NOTATION "+t.name,t.pubID&&t.sysID?r+=' PUBLIC "'+t.pubID+'" "'+t.sysID+'"':t.pubID?r+=' PUBLIC "'+t.pubID+'"':t.sysID&&(r+=' SYSTEM "'+t.sysID+'"'),r+=this.spacebeforeslash+">"+this.newline},e.prototype.openNode=function(t,e){var r,n,i,o;if(e||(e=0),t instanceof l){i=this.space(e)+"<"+t.name,o=t.attributes;for(n in o)g.call(o,n)&&(r=o[n],i+=this.attribute(r));return i+=(t.children?">":"/>")+this.newline}return i=this.space(e)+"<!DOCTYPE "+t.rootNodeName,t.pubID&&t.sysID?i+=' PUBLIC "'+t.pubID+'" "'+t.sysID+'"':t.sysID&&(i+=' SYSTEM "'+t.sysID+'"'),i+=(t.children?" [":">")+this.newline},e.prototype.closeNode=function(t,e){switch(e||(e=0),!1){case!(t instanceof l):return this.space(e)+"</"+t.name+">"+this.newline;case!(t instanceof c):return this.space(e)+"]>"+this.newline}},e}(y)}).call(this)},{"./XMLCData":81,"./XMLComment":82,"./XMLDTDAttList":83,"./XMLDTDElement":84,"./XMLDTDEntity":85,"./XMLDTDNotation":86,"./XMLDeclaration":87,"./XMLDocType":88,"./XMLElement":91,"./XMLProcessingInstruction":93,"./XMLRaw":94,"./XMLText":98,"./XMLWriterBase":99}],97:[function(t,e,r){(function(){var t,r=function(t,e){return function(){return t.apply(e,arguments)}},n={}.hasOwnProperty;e.exports=t=function(){function t(t){this.assertLegalChar=r(this.assertLegalChar,this);var e,i,o;t||(t={}),this.noDoubleEncoding=t.noDoubleEncoding,i=t.stringify||{};for(e in i)n.call(i,e)&&(o=i[e],this[e]=o)}return t.prototype.eleName=function(t){return t=""+t||"",this.assertLegalChar(t)},t.prototype.eleText=function(t){return t=""+t||"",this.assertLegalChar(this.elEscape(t))},t.prototype.cdata=function(t){return t=""+t||"",t=t.replace("]]>","]]]]><![CDATA[>"),this.assertLegalChar(t)},t.prototype.comment=function(t){if(t=""+t||"",t.match(/--/))throw new Error("Comment text cannot contain double-hypen: "+t);return this.assertLegalChar(t)},t.prototype.raw=function(t){return""+t||""},t.prototype.attName=function(t){return t=""+t||""},t.prototype.attValue=function(t){return t=""+t||"",this.attEscape(t)},t.prototype.insTarget=function(t){return""+t||""},t.prototype.insValue=function(t){if(t=""+t||"",t.match(/\?>/))throw new Error("Invalid processing instruction value: "+t);return t},t.prototype.xmlVersion=function(t){if(t=""+t||"",!t.match(/1\.[0-9]+/))throw new Error("Invalid version number: "+t);return t},t.prototype.xmlEncoding=function(t){if(t=""+t||"",!t.match(/^[A-Za-z](?:[A-Za-z0-9._-])*$/))throw new Error("Invalid encoding: "+t);return t},t.prototype.xmlStandalone=function(t){return t?"yes":"no"},t.prototype.dtdPubID=function(t){return""+t||""},t.prototype.dtdSysID=function(t){return""+t||""},t.prototype.dtdElementValue=function(t){return""+t||""},t.prototype.dtdAttType=function(t){return""+t||""},t.prototype.dtdAttDefault=function(t){return null!=t?""+t||"":t},t.prototype.dtdEntityValue=function(t){return""+t||""},t.prototype.dtdNData=function(t){return""+t||""},t.prototype.convertAttKey="@",t.prototype.convertPIKey="?",t.prototype.convertTextKey="#text",t.prototype.convertCDataKey="#cdata",t.prototype.convertCommentKey="#comment",t.prototype.convertRawKey="#raw",t.prototype.assertLegalChar=function(t){var e;if(e=t.match(/[\0\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/))throw new Error("Invalid character in string: "+t+" at index "+e.index);return t},t.prototype.elEscape=function(t){var e;return e=this.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,t.replace(e,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;")},t.prototype.attEscape=function(t){var e;return e=this.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,t.replace(e,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;")},t}()}).call(this)},{}],98:[function(t,e,r){(function(){var r,n,i=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty;r=t("./XMLNode"),e.exports=n=function(t){function e(t,r){if(e.__super__.constructor.call(this,t),null==r)throw new Error("Missing element text");this.value=this.stringify.eleText(r)}return i(e,t),e.prototype.clone=function(){return Object.create(this)},e.prototype.toString=function(t){return this.options.writer.set(t).text(this)},e}(r)}).call(this)},{"./XMLNode":92}],99:[function(t,e,r){(function(){var t,r={}.hasOwnProperty;e.exports=t=function(){function t(t){var e,n,i,o,s,a,u,c,l;t||(t={}),this.pretty=t.pretty||!1,this.allowEmpty=null!=(n=t.allowEmpty)&&n,this.pretty?(this.indent=null!=(i=t.indent)?i:"  ",this.newline=null!=(o=t.newline)?o:"\n",this.offset=null!=(s=t.offset)?s:0,this.dontprettytextnodes=null!=(a=t.dontprettytextnodes)?a:0):(this.indent="",this.newline="",this.offset=0,this.dontprettytextnodes=0),this.spacebeforeslash=null!=(u=t.spacebeforeslash)?u:"",this.spacebeforeslash===!0&&(this.spacebeforeslash=" "),this.newlinedefault=this.newline,this.prettydefault=this.pretty,c=t.writer||{};for(e in c)r.call(c,e)&&(l=c[e],this[e]=l)}return t.prototype.set=function(t){var e,n,i;t||(t={}),"pretty"in t&&(this.pretty=t.pretty),"allowEmpty"in t&&(this.allowEmpty=t.allowEmpty),this.pretty?(this.indent="indent"in t?t.indent:"  ",this.newline="newline"in t?t.newline:"\n",this.offset="offset"in t?t.offset:0,this.dontprettytextnodes="dontprettytextnodes"in t?t.dontprettytextnodes:0):(this.indent="",this.newline="",this.offset=0,this.dontprettytextnodes=0),this.spacebeforeslash="spacebeforeslash"in t?t.spacebeforeslash:"",this.spacebeforeslash===!0&&(this.spacebeforeslash=" "),this.newlinedefault=this.newline,this.prettydefault=this.pretty,n=t.writer||{};for(e in n)r.call(n,e)&&(i=n[e],this[e]=i);return this},t.prototype.space=function(t){var e;return this.pretty?(e=(t||0)+this.offset+1,e>0?new Array(e).join(this.indent):""):""},t}()}).call(this)},{}],100:[function(t,e,r){(function(){var r,n,i,o,s,a,u;u=t("./Utility"),s=u.assign,a=u.isFunction,r=t("./XMLDocument"),n=t("./XMLDocumentCB"),o=t("./XMLStringWriter"),i=t("./XMLStreamWriter"),e.exports.create=function(t,e,n,i){var o,a;if(null==t)throw new Error("Root element needs a name");return i=s({},e,n,i),o=new r(i),a=o.element(t),i.headless||(o.declaration(i),null==i.pubID&&null==i.sysID||o.doctype(i)),a},e.exports.begin=function(t,e,i){var o;return a(t)&&(o=[t,e],e=o[0],i=o[1],t={}),e?new n(t,e,i):new r(t)},e.exports.stringWriter=function(t){return new o(t)},e.exports.streamWriter=function(t,e){return new i(t,e)}}).call(this)},{"./Utility":79,"./XMLDocument":89,"./XMLDocumentCB":90,"./XMLStreamWriter":95,"./XMLStringWriter":96}]},{},[1])(1)});
//# sourceMappingURL=jsforce-core.min.js.map
