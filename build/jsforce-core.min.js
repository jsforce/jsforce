!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).jsforce=t()}}((function(){return function t(e,r,n){function i(s,a){if(!r[s]){if(!e[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=r[s]={exports:{}};e[s][0].call(l.exports,(function(t){return i(e[s][1][t]||t)}),l,l.exports,t,e,r,n)}return r[s].exports}for(var o="function"==typeof require&&require,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(t,e,r){"use strict";var n=t("../core");n.browser=t("./client"),e.exports=n},{"../core":10,"./client":5}],2:[function(t,e,r){"use strict";e.exports="1.11.1"},{}],3:[function(t,e,r){"use strict";e.exports={inherits:t("inherits"),util:t("util"),events:t("events"),"lodash/core":t("lodash/core"),"readable-stream":t("readable-stream"),multistream:t("multistream"),"./VERSION":t("./VERSION"),"./cache":t("./cache"),"./connection":t("./connection"),"./core":t("./core"),"./csv":t("./csv"),"./date":t("./date"),"./http-api":t("./http-api"),"./logger":t("./logger"),"./oauth2":t("./oauth2"),"./process":t("./process"),"./promise":t("./promise"),"./query":t("./query"),"./quick-action":t("./quick-action"),"./record-stream":t("./record-stream"),"./record":t("./record"),"./soap":t("./soap"),"./sobject":t("./sobject"),"./soql-builder":t("./soql-builder"),"./transport":t("./transport")}},{"./VERSION":2,"./cache":8,"./connection":9,"./core":10,"./csv":11,"./date":12,"./http-api":13,"./logger":14,"./oauth2":15,"./process":16,"./promise":17,"./query":18,"./quick-action":19,"./record":21,"./record-stream":20,"./soap":23,"./sobject":24,"./soql-builder":25,"./transport":26,events:37,inherits:39,"lodash/core":43,multistream:44,"readable-stream":62,util:72}],4:[function(t,e,r){"use strict";var n=t("readable-stream").Duplex,i=t("lodash/core");e.exports={supported:"object"==typeof Sfdc&&void 0!==Sfdc.canvas,createRequest:function(t){return function(e,r){var o,s=new n;s._read=function(t){o&&s.push(o.body)};var a=[],u=!1;function c(n){var a={client:t.client,method:e.method,data:n};if(e.headers)for(var u in a.headers={},e.headers)"content-type"===u.toLowerCase()?a.contentType=e.headers[u]:a.headers[u]=e.headers[u];a.success=function(t){var e=function(t){var e={};return t.split(/\n/).forEach((function(t){var r=t.split(/\s*:\s*/),n=r[0].toLowerCase(),i=r[1];e[n]=i})),e}(t.responseHeaders),n=t.payload;i.isString(n)||(n=JSON.stringify(n)),o={statusCode:t.status,headers:e,body:n},r&&r(null,o,o.body),s.end()},a.failure=function(t){r&&r(t)},Sfdc.canvas.client.ajax(e.url,a)}return s._write=function(t,e,r){a.push(t.toString(e)),r()},s.on("finish",(function(){u||(c(a.join("")),u=!0)})),!e.body&&""!==e.body&&/^(put|post|patch)$/i.test(e.method)||(c(e.body),u=!0),s}}}},{"lodash/core":43,"readable-stream":62}],5:[function(t,e,r){"use strict";var n=t("events"),i=t("inherits"),o=t("querystring"),s=t("lodash/core"),a=t("../connection"),u=t("../oauth2");function c(){var t=function(){var t;if(window.location.hash){if((t=o.parse(window.location.hash.substring(1))).access_token)return{success:!0,body:t}}else if(window.location.search&&(t=o.parse(window.location.search.substring(1))).error)return{success:!1,body:t}}(),e=localStorage.getItem("jsforce_state");if(t&&e&&t.body.state===e){localStorage.removeItem("jsforce_state");var r=e.split("."),n=r[0],i=r[1],s=new h(n);return t.success?(s._storeTokens(t.body),location.hash=""):s._storeError(t.body),"popup"===i&&window.close(),!0}}var l=0,h=function(t){this._prefix=t||"jsforce"+l++,this.connection=null};i(h,n.EventEmitter),h.prototype.init=function(t){if(!c()){this.config=t,this.connection=new a(t);var e=this._getTokens();if(e){this.connection.initialize(e);var r=this;setTimeout((function(){r.emit("connect",r.connection)}),10)}}},h.prototype.login=function(t,e){s.isFunction(t)&&(e=t,t={}),t=t||{},e=e||function(){},s.extend(t,this.config);this._prompt(t,e)},h.prototype._prompt=function(t,e){var r=this,n=new u(t),i=Math.random().toString(36).substring(2),o=[this._prefix,"popup",i].join(".");localStorage.setItem("jsforce_state",o);var s,a,c,l,h,p=n.getAuthorizationUrl({response_type:"token",scope:t.scope,state:o}),f=t.size||{},d=(s=p,a=f.width||912,c=f.height||513,l=screen.width/2-a/2,h=screen.height/2-c/2,window.open(s,null,"location=yes,toolbar=no,status=no,menubar=no,width="+a+",height="+c+",top="+h+",left="+l));if(!d)return o=[this._prefix,"redirect",i].join("."),localStorage.setItem("jsforce_state",o),p=n.getAuthorizationUrl({response_type:"token",scope:t.scope,state:o}),void(location.href=p);r._removeTokens();var y=setInterval((function(){try{if(!d||d.closed){clearInterval(y);var t=r._getTokens();if(t)r.connection.initialize(t),r.emit("connect",r.connection),e(null,{status:"connect"});else{var n=r._getError();n?e(new Error(n.error+": "+n.error_description)):e(null,{status:"cancel"})}}}catch(t){}}),1e3)},h.prototype.isLoggedIn=function(){return!(!this.connection||!this.connection.accessToken)},h.prototype.logout=function(){this.connection.logout(),this._removeTokens(),this.emit("disconnect")},h.prototype._getTokens=function(){var t=new RegExp("(^|;\\s*)"+this._prefix+"_loggedin=true(;|$)");if(document.cookie.match(t)){var e=Number(localStorage.getItem(this._prefix+"_issued_at"));if(Date.now()<e+72e5){var r,n=localStorage.getItem(this._prefix+"_id");if(n){var i=n.split("/");r={id:i.pop(),organizationId:i.pop(),url:n}}return{accessToken:localStorage.getItem(this._prefix+"_access_token"),instanceUrl:localStorage.getItem(this._prefix+"_instance_url"),userInfo:r}}}return null},h.prototype._storeTokens=function(t){localStorage.setItem(this._prefix+"_access_token",t.access_token),localStorage.setItem(this._prefix+"_instance_url",t.instance_url),localStorage.setItem(this._prefix+"_issued_at",t.issued_at),localStorage.setItem(this._prefix+"_id",t.id),document.cookie=this._prefix+"_loggedin=true;"},h.prototype._removeTokens=function(){localStorage.removeItem(this._prefix+"_access_token"),localStorage.removeItem(this._prefix+"_instance_url"),localStorage.removeItem(this._prefix+"_issued_at"),localStorage.removeItem(this._prefix+"_id"),document.cookie=this._prefix+"_loggedin="},h.prototype._getError=function(){try{var t=JSON.parse(localStorage.getItem(this._prefix+"_error"));return localStorage.removeItem(this._prefix+"_error"),t}catch(t){}},h.prototype._storeError=function(t){localStorage.setItem(this._prefix+"_error",JSON.stringify(t))},e.exports=new h,e.exports.Client=h},{"../connection":9,"../oauth2":15,events:37,inherits:39,"lodash/core":43,querystring:51}],6:[function(t,e,r){"use strict";var n=0;e.exports={supported:"undefined"!=typeof window&&"undefined"!=typeof document,createRequest:function(t,e){return t=t||"callback",e=e||1e4,function(r,i){if("GET"!==r.method.toUpperCase())return i(new Error("JSONP only supports GET request."));var o="_jsforce_jsonpCallback_"+ ++n,s=window,a=r.url;a+=a.indexOf("?")>0?"&":"?",a+=t+"="+o;var u=document.createElement("script");u.type="text/javascript",u.src=a,document.documentElement.appendChild(u);var c=setTimeout((function(){l(),i(new Error("JSONP call time out."))}),e);s[o]=function(t){l(),i(null,{statusCode:200,headers:{"content-type":"application/json"},body:JSON.stringify(t)})};var l=function(){clearTimeout(c),document.documentElement.removeChild(u),delete s[o]}}}}},{}],7:[function(t,e,r){"use strict";var n=t("readable-stream").Duplex,i=t("lodash/core");e.exports=function(t,e){var r,o=new XMLHttpRequest;if(o.open(t.method,t.url),t.headers)for(var s in t.headers)o.setRequestHeader(s,t.headers[s]);o.setRequestHeader("Accept","*/*");var a=new n;a._read=function(t){r&&a.push(r.body)};var u=[],c=!1;return a._write=function(t,e,r){u.push(t.toString("buffer"===e?"binary":e)),r()},a.on("finish",(function(){c||(o.send(u.join("")),c=!0)})),!t.body&&""!==t.body&&/^(put|post|patch)$/i.test(t.method)||(o.send(t.body),c=!0),o.onreadystatechange=function(){if(4===o.readyState){var t=function(t){var e=(t.getAllResponseHeaders()||"").split(/[\r\n]+/);return i.map(e,(function(t){return t.split(/\s*:/)[0].toLowerCase()}))}(o),n={};i.forEach(t,(function(t){t&&(n[t]=o.getResponseHeader(t))})),(r={statusCode:o.status,headers:n,body:o.response}).statusCode||(r.statusCode=400,r.body="Access Declined"),e&&e(null,r,r.body),a.end()}},a}},{"lodash/core":43,"readable-stream":62}],8:[function(t,e,r){"use strict";var n=t("events"),i=t("inherits"),o=t("lodash/core"),s=function(){this.fetching=!1};i(s,n.EventEmitter),s.prototype.get=function(t){if(!t)return this._value;this.once("value",t),o.isUndefined(this._value)||this.emit("value",this._value)},s.prototype.set=function(t){this._value=t,this.emit("value",this._value)},s.prototype.clear=function(){this.fetching=!1,delete this._value};var a=function(){this._entries={}};function u(t,e){return e=Array.prototype.slice.apply(e),t+"("+o.map(e,(function(t){return JSON.stringify(t)})).join(",")+")"}a.prototype.get=function(t){if(t&&this._entries[t])return this._entries[t];var e=new s;return this._entries[t]=e,e},a.prototype.clear=function(t){for(var e in this._entries)t&&0!==e.indexOf(t)||this._entries[e].clear()},a.prototype.makeResponseCacheable=function(t,e,r){var n=this;return r=r||{},function(){var i=Array.prototype.slice.apply(arguments),s=i.pop();o.isFunction(s)||(i.push(s),s=null);var a=o.isString(r.key)?r.key:o.isFunction(r.key)?r.key.apply(e,i):u(r.namespace,i);Array.isArray(a)||(a=[a]);var c,l,h=[];a.forEach((function(t){var e=n.get(t);e.fetching=!0,h.push(e)})),s&&i.push((function(t,e){Array.isArray(e)&&e.length==h.length?h.forEach((function(r,n){r.set({error:t,result:e[n]})})):h.forEach((function(r){r.set({error:t,result:e})})),s(t,e)}));try{c=t.apply(e||this,i)}catch(t){l=t}if(c&&o.isFunction(c.then))return s?c:c.then((function(t){return Array.isArray(t)&&t.length==h.length?h.forEach((function(e,r){e.set({error:void 0,result:t[r]})})):h.forEach((function(e){e.set({error:void 0,result:t})})),t}),(function(t){throw Array.isArray(t)&&t.length==h.length?h.forEach((function(e,r){e.set({error:t[r],result:void 0})})):h.forEach((function(e){e.set({error:t,result:void 0})})),t}));if(Array.isArray(c)&&c.length==h.length?h.forEach((function(t,e){t.set({error:l,result:c[e]})})):h.forEach((function(t){t.set({error:l,result:c})})),l)throw l;return c}},a.prototype.makeCacheable=function(t,e,r){var n=this;r=r||{};var i=function(){var i=Array.prototype.slice.apply(arguments),s=i.pop();o.isFunction(s)||i.push(s);var a=o.isString(r.key)?r.key:o.isFunction(r.key)?r.key.apply(e,i):u(r.namespace,i),c=n.get(a);if(!o.isFunction(s)){var l=c.get();if(!l)throw new Error("Function call result is not cached yet.");if(l.error)throw l.error;return l.result}c.get((function(t){s(t.error,t.result)})),c.fetching||(c.fetching=!0,i.push((function(t,e){c.set({error:t,result:e})})),t.apply(e||this,i))};return i.clear=function(){var t=o.isString(r.key)?r.key:o.isFunction(r.key)?r.key.apply(e,arguments):u(r.namespace,arguments);n.clear(t)},i},e.exports=a},{events:37,inherits:39,"lodash/core":43}],9:[function(t,e,r){(function(r){"use strict";var n=t("events"),i=t("inherits"),o=t("lodash/core"),s=t("./promise"),a=t("./logger"),u=t("./oauth2"),c=t("./query"),l=t("./sobject"),h=t("./quick-action"),p=t("./http-api"),f=t("./transport"),d=t("./process"),y=t("./cache"),m="https://login.salesforce.com",g="",_="42.0",v=200,b=25,w=e.exports=function(e){e=e||{},this._logger=new a(e.logLevel);var r=e.oauth2||{loginUrl:e.loginUrl,clientId:e.clientId,clientSecret:e.clientSecret,redirectUri:e.redirectUri,proxyUrl:e.proxyUrl,httpProxy:e.httpProxy};this.oauth2=r=r instanceof u?r:new u(r),this.loginUrl=e.loginUrl||r.loginUrl||m,this.version=e.version||_,this.maxRequest=e.maxRequest||this.maxRequest||10,e.proxyUrl?this._transport=new f.ProxyTransport(e.proxyUrl):e.httpProxy?this._transport=new f.HttpProxyTransport(e.httpProxy):this._transport=new f,this.callOptions=e.callOptions,t("./core").emit("connection:new",this),this.process=new d(this),this.cache=new y;var n=e.refreshFn;!n&&this.oauth2.clientId&&(n=T),n&&(this._refreshDelegate=new p.SessionRefreshDelegate(this,n));var i={key:function(t){return t?t.type?"describe."+t.type:"describe."+t:"describe"}};this.describe$=this.cache.makeCacheable(this.describe,this,i),this.describe=this.cache.makeResponseCacheable(this.describe,this,i),this.describeSObject$=this.describe$,this.describeSObject=this.describe;var o={key:function(t){var e=t.types,r=t.autofetch||!1,n=e.length>b?r?e:e.slice(0,b):e,i=[];return n.forEach((function(t){i.push("describe."+t)})),i}};this.batchDescribe=this.cache.makeResponseCacheable(this.batchDescribe,this,o),this.batchDescribeSObjects=this.batchDescribe,i={key:"describeGlobal"},this.describeGlobal$=this.cache.makeCacheable(this.describeGlobal,this,i),this.describeGlobal=this.cache.makeResponseCacheable(this.describeGlobal,this,i),this.initialize(e)};function T(t,e){t.oauth2.refreshToken(t.refreshToken,(function(r,n){if(r)return e(r);var i=O(n.id);t.initialize({instanceUrl:n.instance_url,accessToken:n.access_token,userInfo:i}),e(null,n.access_token,n)}))}function E(t){function e(t){return t<10?"0"+t:t}return t.getUTCFullYear()+"-"+e(t.getUTCMonth()+1)+"-"+e(t.getUTCDate())+"T"+e(t.getUTCHours())+":"+e(t.getUTCMinutes())+":"+e(t.getUTCSeconds())+"+00:00"}function O(t){var e=t.split("/");return{id:e.pop(),organizationId:e.pop(),url:t}}function S(t){return t&&String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}i(w,n.EventEmitter),w.prototype.initialize=function(t){if(!t.instanceUrl&&t.serverUrl&&(t.instanceUrl=t.serverUrl.split("/").slice(0,3).join("/")),this.instanceUrl=t.instanceUrl||t.serverUrl||this.instanceUrl||g,this.accessToken=t.sessionId||t.accessToken||this.accessToken,this.refreshToken=t.refreshToken||this.refreshToken,this.refreshToken&&!this._refreshDelegate)throw new Error("Refresh token is specified without oauth2 client information or refresh function");this.signedRequest=t.signedRequest&&function(t){if(o.isString(t)){if("{"===t[0])return JSON.parse(t);var e=t.split(".").pop(),n=r.from(e,"base64").toString("utf-8");return JSON.parse(n)}return t}(t.signedRequest),this.signedRequest&&(this.accessToken=this.signedRequest.client.oauthToken,f.CanvasTransport.supported&&(this._transport=new f.CanvasTransport(this.signedRequest))),t.userInfo&&(this.userInfo=t.userInfo),this.limitInfo={},this.sobjects={},this.cache.clear(),this.cache.get("describeGlobal").removeAllListeners("value"),this.cache.get("describeGlobal").on("value",o.bind((function(t){t.result&&o.map(t.result.sobjects,(function(t){return t.name})).forEach(this.sobject,this)}),this)),this.tooling&&this.tooling.initialize(),this._sessionType=t.sessionId?"soap":"oauth2"},w.prototype._baseUrl=function(){return[this.instanceUrl,"services/data","v"+this.version].join("/")},w.prototype._normalizeUrl=function(t){return"/"===t[0]?0===t.indexOf("/services/")?this.instanceUrl+t:this._baseUrl()+t:t},w.prototype.request=function(t,e,r){"function"==typeof e&&(r=e,e=null),e=e||{};var n=this;o.isString(t)&&(t={method:"GET",url:t}),t.url=this._normalizeUrl(t.url);var i=new p(this,e);return i.on("response",(function(t){if(t.headers&&t.headers["sforce-limit-info"]){var e=t.headers["sforce-limit-info"].match(/api\-usage=(\d+)\/(\d+)/);e&&(n.limitInfo={apiUsage:{used:parseInt(e[1],10),limit:parseInt(e[2],10)}})}})),i.request(t).thenCall(r)},w.prototype.requestGet=function(t,e,r){var n={method:"GET",url:t};return this.request(n,e,r)},w.prototype.requestPost=function(t,e,r,n){var i={method:"POST",url:t,body:JSON.stringify(e),headers:{"content-type":"application/json"}};return this.request(i,r,n)},w.prototype.requestPut=function(t,e,r,n){var i={method:"PUT",url:t,body:JSON.stringify(e),headers:{"content-type":"application/json"}};return this.request(i,r,n)},w.prototype.requestPatch=function(t,e,r,n){var i={method:"PATCH",url:t,body:JSON.stringify(e),headers:{"content-type":"application/json"}};return this.request(i,r,n)},w.prototype.requestDelete=function(t,e,r){var n={method:"DELETE",url:t};return this.request(n,e,r)},w.prototype.query=function(t,e,r){"function"==typeof e&&(r=e,e=void 0);var n=new c(this,t,e);return r&&n.run(r),n},w.prototype.queryAll=function(t,e,r){"function"==typeof e&&(r=e,e=void 0);var n=new c(this,t,e);return n.scanAll(!0),r&&n.run(r),n},w.prototype.queryMore=function(t,e,r){"function"==typeof e&&(r=e,e=void 0);var n=new c(this,{locator:t},e);return r&&n.run(r),n},w.prototype._ensureVersion=function(t){var e=this.version.split(".");return parseInt(e[0],10)>=t},w.prototype._supports=function(t){return"sobject-collection"===t&&this._ensureVersion(42)},w.prototype.retrieve=function(t,e,r,n){return"function"==typeof r&&(n=r,r={}),r=r||{},(o.isArray(e)?this._supports("sobject-collection")?this._retrieveMany(t,e,r):this._retrieveParallel(t,e,r):this._retrieveSingle(t,e,r)).thenCall(n)},w.prototype._retrieveSingle=function(t,e,r){if(!e)return s.reject(new Error("Invalid record ID. Specify valid record ID value"));var n=[this._baseUrl(),"sobjects",t,e].join("/");return r.fields&&(n+="?fields="+r.fields.join(",")),this.request({method:"GET",url:n,headers:r.headers})},w.prototype._retrieveParallel=function(t,e,r){if(e.length>this.maxRequest)return s.reject(new Error("Exceeded max limit of concurrent call"));var n=this;return s.all(e.map((function(e){return n._retrieveSingle(t,e,r).catch((function(t){if(r.allOrNone||"NOT_FOUND"!==t.errorCode)throw t;return null}))})))},w.prototype._retrieveMany=function(t,e,r){if(0===e.length)return s.resolve([]);var n=[this._baseUrl(),"composite","sobjects",t].join("/"),i=this;return(r.fields?s.resolve(r.fields):new s((function(e,r){i.describe$(t,(function(t,n){if(t)r(t);else{var i=n.fields.map((function(t){return t.name}));e(i)}}))}))).then((function(t){return i.request({method:"POST",url:n,body:JSON.stringify({ids:e,fields:t}),headers:o.defaults(r.headers||{},{"Content-Type":"application/json"})})}))},w.prototype._toRecordResult=function(t,e){var r={statusCode:e.errorCode,message:e.message};e.content&&(r.content=e.content),e.fields&&(r.fields=e.fields);var n={success:!1,errors:[r]};return t&&(n.id=t),n},w.prototype.insert=w.prototype.create=function(t,e,r,n){return o.isString(t)||(n=r,r=e,e=t,t=null),"function"==typeof r&&(n=r,r={}),r=r||{},(o.isArray(e)?this._supports("sobject-collection")?this._createMany(t,e,r):this._createParallel(t,e,r):this._createSingle(t,e,r)).thenCall(n)},w.prototype._createSingle=function(t,e,r){var n=t||e.attributes&&e.attributes.type||e.type;if(!n)return s.reject(new Error("No SObject Type defined in record"));delete(e=o.clone(e)).Id,delete e.type,delete e.attributes;var i=[this._baseUrl(),"sobjects",n].join("/");return this.request({method:"POST",url:i,body:JSON.stringify(e),headers:o.defaults(r.headers||{},{"Content-Type":"application/json"})})},w.prototype._createParallel=function(t,e,r){if(e.length>this.maxRequest)return s.reject(new Error("Exceeded max limit of concurrent call"));var n=this;return s.all(e.map((function(e){return n._createSingle(t,e,r).catch((function(t){if(r.allOrNone||!t.errorCode)throw t;return this._toRecordResult(null,t)}))})))},w.prototype._createMany=function(t,e,r){if(0===e.length)return s.resolve([]);if(e.length>v&&r.allowRecursive){var n=this;return n._createMany(t,e.slice(0,v),r).then((function(i){return n._createMany(t,e.slice(v),r).then((function(t){return i.concat(t)}))}))}e=o.map(e,(function(e){var r=t||e.attributes&&e.attributes.type||e.type;return r?(delete(e=o.clone(e)).Id,delete e.type,e.attributes={type:r},e):s.reject(new Error("No SObject Type defined in record"))}));var i=[this._baseUrl(),"composite","sobjects"].join("/");return this.request({method:"POST",url:i,body:JSON.stringify({allOrNone:r.allOrNone||!1,records:e}),headers:o.defaults(r.headers||{},{"Content-Type":"application/json"})})},w.prototype.update=function(t,e,r,n){return o.isString(t)||(n=r,r=e,e=t,t=null),"function"==typeof r&&(n=r,r={}),r=r||{},(o.isArray(e)?this._supports("sobject-collection")?this._updateMany(t,e,r):this._updateParallel(t,e,r):this._updateSingle(t,e,r)).thenCall(n)},w.prototype._updateSingle=function(t,e,r){var n=e.Id;if(!n)return s.reject(new Error("Record id is not found in record."));var i=t||e.attributes&&e.attributes.type||e.type;if(!i)return s.reject(new Error("No SObject Type defined in record"));delete(e=o.clone(e)).Id,delete e.type,delete e.attributes;var a=[this._baseUrl(),"sobjects",i,n].join("/");return this.request({method:"PATCH",url:a,body:JSON.stringify(e),headers:o.defaults(r.headers||{},{"Content-Type":"application/json"})},{noContentResponse:{id:n,success:!0,errors:[]}})},w.prototype._updateParallel=function(t,e,r){if(e.length>this.maxRequest)return s.reject(new Error("Exceeded max limit of concurrent call"));var n=this;return s.all(e.map((function(e){return n._updateSingle(t,e,r).catch((function(t){if(r.allOrNone||!t.errorCode)throw t;return this._toRecordResult(e.Id,t)}))})))},w.prototype._updateMany=function(t,e,r){if(0===e.length)return s.resolve([]);if(e.length>v&&r.allowRecursive){var n=this;return n._updateMany(t,e.slice(0,v),r).then((function(i){return n._updateMany(t,e.slice(v),r).then((function(t){return i.concat(t)}))}))}e=o.map(e,(function(e){var r=e.Id;if(!r)throw new Error("Record id is not found in record.");var n=t||e.attributes&&e.attributes.type||e.type;if(!n)throw new Error("No SObject Type defined in record");return delete(e=o.clone(e)).Id,e.id=r,delete e.type,e.attributes={type:n},e}));var i=[this._baseUrl(),"composite","sobjects"].join("/");return this.request({method:"PATCH",url:i,body:JSON.stringify({allOrNone:r.allOrNone||!1,records:e}),headers:o.defaults(r.headers||{},{"Content-Type":"application/json"})})},w.prototype.upsert=function(t,e,r,n,i){o.isString(t)||(i=n,n=r,r=e,e=t,t=null),"function"==typeof n&&(i=n,n={}),n=n||{};var a=this,u=o.isArray(e);return(e=u?e:[e]).length>this.maxRequest?s.reject(new Error("Exceeded max limit of concurrent call")).thenCall(i):s.all(o.map(e,(function(e){var i=t||e.attributes&&e.attributes.type||e.type,s=e[r];delete(e=o.clone(e))[r],delete e.type,delete e.attributes;var c=[a._baseUrl(),"sobjects",i,r,s].join("/");return a.request({method:"PATCH",url:c,body:JSON.stringify(e),headers:o.defaults(n.headers||{},{"Content-Type":"application/json"})},{noContentResponse:{success:!0,errors:[]}}).catch((function(t){if(!u||n.allOrNone||!t.errorCode)throw t;return a._toRecordResult(null,t)}))}))).then((function(t){return!u&&o.isArray(t)?t[0]:t})).thenCall(i)},w.prototype.delete=w.prototype.del=w.prototype.destroy=function(t,e,r,n){return"function"==typeof r&&(n=r,r={}),r=r||{},(o.isArray(e)?this._supports("sobject-collection")?this._destroyMany(t,e,r):this._destroyParallel(t,e,r):this._destroySingle(t,e,r)).thenCall(n)},w.prototype._destroySingle=function(t,e,r){var n=[this._baseUrl(),"sobjects",t,e].join("/");return this.request({method:"DELETE",url:n,headers:r.headers||null},{noContentResponse:{id:e,success:!0,errors:[]}})},w.prototype._destroyParallel=function(t,e,r){if(e.length>this.maxRequest)return s.reject(new Error("Exceeded max limit of concurrent call"));var n=this;return s.all(e.map((function(e){return n._destroySingle(t,e,r).catch((function(t){if(r.allOrNone||!t.errorCode)throw t;return this._toRecordResult(e,t)}))})))},w.prototype._destroyMany=function(t,e,r){if(0===e.length)return s.resolve([]);if(e.length>v&&r.allowRecursive){var n=this;return n._destroyMany(t,e.slice(0,v),r).then((function(i){return n._destroyMany(t,e.slice(v),r).then((function(t){return i.concat(t)}))}))}var i=[this._baseUrl(),"composite","sobjects?ids="].join("/")+e.join(",");return r.allOrNone&&(i+="&allOrNone=true"),this.request({method:"DELETE",url:i,headers:r.headers||null})},w.prototype.search=function(t,e){var r=this._baseUrl()+"/search?q="+encodeURIComponent(t);return this.request(r).thenCall(e)},w.prototype.describe=w.prototype.describeSObject=function(t,e){var r=t.type?t.type:t,n=[this._baseUrl(),"sobjects",r,"describe"].join("/"),i=t.ifModifiedSince?{"If-Modified-Since":t.ifModifiedSince}:{};return this.request({method:"GET",url:n,headers:i}).then((function(t){return""===t?s.resolve(void 0):s.resolve(t)})).thenCall(e)},w.prototype.batchDescribe=w.prototype.batchDescribeSObjects=function(t,e){var r=t.types,n=t.autofetch||!1,i=Math.min(t.maxConcurrentRequests||15,15),o=[];do{var s=r.length>b?r.slice(0,b):r;o.push(s),r=r.length>b?r.slice(b):[]}while(r.length>0&&n);var a=[];do{var u=o.length>i?o.slice(0,i):o;a.push(u),o=o.length>i?o.slice(i):[]}while(o.length>0);return this.doBatchDescribeRequestBatches(a).thenCall(e)},w.prototype.doBatchDescribeRequestBatches=function(t){var e=this,r=[],n=t.shift();return e.doBatchOfBatchDescribeRequests(n).then((function(n){return n.forEach((function(t){r.push(t)})),t.length>0?e.doBatchDescribeRequestBatches(t).then((function(t){return t.forEach((function(t){r.push(t)})),s.resolve(r)})):s.resolve(r)}))},w.prototype.doBatchOfBatchDescribeRequests=function(t){var e=this;return s.all(t.map((function(t){return e.doBatchDescribeRequest(t)}))).then((function(t){var e=[];return t.forEach((function(t){t.forEach((function(t){e.push(t)}))})),s.resolve(e)}))},w.prototype.doBatchDescribeRequest=function(t){var e=[],r=[this._baseUrl(),"composite/batch"].join("/"),n="v"+this.version,i=[];return t.forEach((function(t){i.push({method:"GET",url:[n,"sobjects",t,"describe"].join("/")})})),this.request({method:"POST",url:r,body:JSON.stringify({batchRequests:i}),headers:{"Content-Type":"application/json"}}).then((function(t){if(t.results){var r=0;for(r=0;r<t.results.length;r++){var n=t.results[r];Array.isArray(n.result)?n.result[0].errorCode&&n.result[0].message&&this._logger.error("Error: "+n.result[0].errorCode+" "+n.result[0].message+" - "+typesToFetch[r]):e.push(n.result)}}return s.resolve(e)}))},w.prototype.describeGlobal=function(t){var e=this._baseUrl()+"/sobjects";return this.request(e).thenCall(t)},w.prototype.sobject=function(t){return this.sobjects=this.sobjects||{},this.sobjects[t]=this.sobjects[t]||new l(this,t)},w.prototype.identity=function(t,e){"function"==typeof t&&(e=t,t={}),t=t||{};var r=this,n=this.userInfo&&this.userInfo.url;return s.resolve(n?{identity:n}:this.request({method:"GET",url:this._baseUrl(),headers:t.headers})).then((function(t){var e=t.identity;return r.request({method:"GET",url:e})})).then((function(t){return r.userInfo={id:t.user_id,organizationId:t.organization_id,url:t.id},t})).thenCall(e)},w.prototype.authorize=function(t,e,r){"function"==typeof e&&(r=e,e={});var n=this,i=this._logger;return this.oauth2.requestToken(t,e).then((function(t){var e=O(t.id);return n.initialize({instanceUrl:t.instance_url,accessToken:t.access_token,refreshToken:t.refresh_token,userInfo:e}),i.debug("<login> completed. user id = "+e.id+", org id = "+e.organizationId),e})).thenCall(r)},w.prototype.login=function(t,e,r){return this._refreshDelegate=new p.SessionRefreshDelegate(this,function(t,e){return function(r,n){r.login(t,e,(function(t){if(t)return n(t);n(null,r.accessToken)}))}}(t,e)),this.oauth2&&this.oauth2.clientId&&this.oauth2.clientSecret?this.loginByOAuth2(t,e,r):this.loginBySoap(t,e,r)},w.prototype.loginByOAuth2=function(t,e,r){var n=this,i=this._logger;return this.oauth2.authenticate(t,e).then((function(t){var e=O(t.id);return n.initialize({instanceUrl:t.instance_url,accessToken:t.access_token,userInfo:e}),i.debug("<login> completed. user id = "+e.id+", org id = "+e.organizationId),e})).thenCall(r)},w.prototype.loginBySoap=function(t,e,r){var n=this,i=this._logger,o=['<se:Envelope xmlns:se="http://schemas.xmlsoap.org/soap/envelope/">',"<se:Header/>","<se:Body>",'<login xmlns="urn:partner.soap.sforce.com">',"<username>"+S(t)+"</username>","<password>"+S(e)+"</password>","</login>","</se:Body>","</se:Envelope>"].join(""),s=[this.loginUrl,"services/Soap/u",this.version].join("/");return this._transport.httpRequest({method:"POST",url:s,body:o,headers:{"Content-Type":"text/xml",SOAPAction:'""'}}).then((function(t){var e;if(t.statusCode>=400){var r=(e=t.body.match(/<faultstring>([^<]+)<\/faultstring>/))&&e[1];throw new Error(r||t.body)}i.debug("SOAP response = "+t.body);var o=(e=t.body.match(/<serverUrl>([^<]+)<\/serverUrl>/))&&e[1],a=(e=t.body.match(/<sessionId>([^<]+)<\/sessionId>/))&&e[1],u=(e=t.body.match(/<userId>([^<]+)<\/userId>/))&&e[1],c=(e=t.body.match(/<organizationId>([^<]+)<\/organizationId>/))&&e[1],l=s.split("/").slice(0,3).join("/"),h={id:u,organizationId:c,url:l+="/id/"+c+"/"+u};return n.initialize({serverUrl:o.split("/").slice(0,3).join("/"),sessionId:a,userInfo:h}),i.debug("<login> completed. user id = "+u+", org id = "+c),h})).thenCall(r)},w.prototype.logout=function(t,e){return"function"==typeof t&&(e=t,t=!1),"oauth2"===this._sessionType?this.logoutByOAuth2(t,e):this.logoutBySoap(t,e)},w.prototype.logoutByOAuth2=function(t,e){"function"==typeof t&&(e=t,t=!1);var r=this;this._logger;return this.oauth2.revokeToken(t?this.refreshToken:this.accessToken).then((function(){r.accessToken=null,r.userInfo=null,r.refreshToken=null,r.instanceUrl=null,r.cache.clear()})).thenCall(e)},w.prototype.logoutBySoap=function(t,e){"function"==typeof t&&(e=t,t=!1);var r=this,n=this._logger,i=['<se:Envelope xmlns:se="http://schemas.xmlsoap.org/soap/envelope/">',"<se:Header>",'<SessionHeader xmlns="urn:partner.soap.sforce.com">',"<sessionId>"+S(t?this.refreshToken:this.accessToken)+"</sessionId>","</SessionHeader>","</se:Header>","<se:Body>",'<logout xmlns="urn:partner.soap.sforce.com"/>',"</se:Body>","</se:Envelope>"].join("");return this._transport.httpRequest({method:"POST",url:[this.instanceUrl,"services/Soap/u",this.version].join("/"),body:i,headers:{"Content-Type":"text/xml",SOAPAction:'""'}}).then((function(t){if(n.debug("SOAP statusCode = "+t.statusCode+", response = "+t.body),t.statusCode>=400){var e=t.body.match(/<faultstring>([^<]+)<\/faultstring>/),i=e&&e[1];throw new Error(i||t.body)}r.accessToken=null,r.userInfo=null,r.refreshToken=null,r.instanceUrl=null,r.cache.clear()})).thenCall(e)},w.prototype.recent=function(t,e,r){var n;return o.isString(t)||(r=e,e=t,t=void 0),o.isNumber(e)||(r=e,e=void 0),t?(n=[this._baseUrl(),"sobjects",t].join("/"),this.request(n).then((function(t){return e?t.recentItems.slice(0,e):t.recentItems})).thenCall(r)):(n=this._baseUrl()+"/recent",e&&(n+="?limit="+e),this.request(n).thenCall(r))},w.prototype.updated=function(t,e,r,n){var i=[this._baseUrl(),"sobjects",t,"updated"].join("/");return"string"==typeof e&&(e=new Date(e)),e instanceof Date&&(e=E(e)),e&&(i+="?start="+encodeURIComponent(e)),"string"==typeof r&&(r=new Date(r)),r instanceof Date&&(r=E(r)),r&&(i+="&end="+encodeURIComponent(r)),this.request(i).thenCall(n)},w.prototype.deleted=function(t,e,r,n){var i=[this._baseUrl(),"sobjects",t,"deleted"].join("/");return"string"==typeof e&&(e=new Date(e)),e instanceof Date&&(e=E(e)),e&&(i+="?start="+encodeURIComponent(e)),"string"==typeof r&&(r=new Date(r)),r instanceof Date&&(r=E(r)),r&&(i+="&end="+encodeURIComponent(r)),this.request(i).thenCall(n)},w.prototype.tabs=function(t){var e=[this._baseUrl(),"tabs"].join("/");return this.request(e).thenCall(t)},w.prototype.limits=function(t){var e=[this._baseUrl(),"limits"].join("/");return this.request(e).thenCall(t)},w.prototype.theme=function(t){var e=[this._baseUrl(),"theme"].join("/");return this.request(e).thenCall(t)},w.prototype.quickActions=function(t){return this.request("/quickActions").thenCall(t)},w.prototype.quickAction=function(t){return new h(this,"/quickActions/"+t)}}).call(this,t("buffer").Buffer)},{"./cache":8,"./core":10,"./http-api":13,"./logger":14,"./oauth2":15,"./process":16,"./promise":17,"./query":18,"./quick-action":19,"./sobject":24,"./transport":26,buffer:30,events:37,inherits:39,"lodash/core":43}],10:[function(t,e,r){"use strict";var n=t("events").EventEmitter,i=e.exports=new n;i.VERSION=t("./VERSION"),i.Connection=t("./connection"),i.OAuth2=t("./oauth2"),i.Date=i.SfDate=t("./date"),i.RecordStream=t("./record-stream"),i.Promise=t("./promise"),i.require=t("./require")},{"./VERSION":2,"./connection":9,"./date":12,"./oauth2":15,"./promise":17,"./record-stream":20,"./require":22,events:37}],11:[function(t,e,r){"use strict";var n=t("lodash/core"),i=t("csv-parse/lib/es5"),o=t("csv-parse/lib/es5/sync"),s=t("csv-stringify"),a=t("csv-stringify/lib/sync");e.exports={parseCSV:function(t,e){return e=n.extend({},e,{columns:!0}),o(t,e)},toCSV:function(t,e){return e=n.extend({},e,{header:!0}),a(t,e)},parseCSVStream:function(t){return t=n.extend({},t,{columns:!0}),i(t)},serializeCSVStream:function(t){return t=n.extend({},t,{header:!0}),s(t)}}},{"csv-parse/lib/es5":33,"csv-parse/lib/es5/sync":34,"csv-stringify":35,"csv-stringify/lib/sync":36,"lodash/core":43}],12:[function(t,e,r){"use strict";var n=t("lodash/core"),i=e.exports=function(t){this._literal=t};function o(t){return(t<10?"0":"")+t}i.prototype.toString=i.prototype.toJSON=function(){return this._literal},i.toDateLiteral=function(t){n.isNumber(t)?t=new Date(t):n.isString(t)&&(t=i.parseDate(t));var e=t.getFullYear(),r=t.getMonth()+1,s=t.getDate(),a=[e,o(r),o(s)].join("-");return new i(a)},i.toDateTimeLiteral=function(t){n.isNumber(t)?t=new Date(t):n.isString(t)&&(t=i.parseDate(t));var e=t.getUTCFullYear(),r=t.getUTCMonth()+1,s=t.getUTCDate(),a=t.getUTCHours(),u=t.getUTCMinutes(),c=t.getUTCSeconds(),l=[e,o(r),o(s)].join("-")+"T"+[o(a),o(u),o(c)].join(":")+"Z";return new i(l)},i.parseDate=function(t){var e=new Date,r=t.match(/^([\d]{4})-?([\d]{2})-?([\d]{2})(T([\d]{2}):?([\d]{2}):?([\d]{2})(.([\d]{3}))?(Z|([\+\-])([\d]{2}):?([\d]{2})))?$/);if(r){if(e=new Date(0),r[4]){if(e.setUTCFullYear(parseInt(r[1],10)),e.setUTCDate(parseInt(r[3],10)),e.setUTCMonth(parseInt(r[2],10)-1),e.setUTCHours(parseInt(r[5],10)),e.setUTCMinutes(parseInt(r[6],10)),e.setUTCSeconds(parseInt(r[7],10)),e.setUTCMilliseconds(parseInt(r[9]||"0",10)),r[10]&&"Z"!==r[10]){var n=60*parseInt(r[12],10)+parseInt(r[13],10);e.setTime(("+"===r[11]?-1:1)*n*60*1e3+e.getTime())}}else e.setFullYear(parseInt(r[1],10)),e.setDate(parseInt(r[3],10)),e.setMonth(parseInt(r[2],10)-1),e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0);return e}throw new Error("Invalid date format is specified : "+t)};var s={YESTERDAY:1,TODAY:1,TOMORROW:1,LAST_WEEK:1,THIS_WEEK:1,NEXT_WEEK:1,LAST_MONTH:1,THIS_MONTH:1,NEXT_MONTH:1,LAST_90_DAYS:1,NEXT_90_DAYS:1,LAST_N_DAYS:2,NEXT_N_DAYS:2,NEXT_N_WEEKS:2,LAST_N_WEEKS:2,NEXT_N_MONTHS:2,LAST_N_MONTHS:2,THIS_QUARTER:1,LAST_QUARTER:1,NEXT_QUARTER:1,NEXT_N_QUARTERS:2,LAST_N_QUARTERS:2,THIS_YEAR:1,LAST_YEAR:1,NEXT_YEAR:1,NEXT_N_YEARS:2,LAST_N_YEARS:2,THIS_FISCAL_QUARTER:1,LAST_FISCAL_QUARTER:1,NEXT_FISCAL_QUARTER:1,NEXT_N_FISCAL_QUARTERS:2,LAST_N_FISCAL_QUARTERS:2,THIS_FISCAL_YEAR:1,LAST_FISCAL_YEAR:1,NEXT_FISCAL_YEAR:1,NEXT_N_FISCAL_YEARS:2,LAST_N_FISCAL_YEARS:2};for(var a in s){var u=s[a];i[a]=1===u?new i(a):c(a)}function c(t){return function(e){return new i(t+":"+e)}}},{"lodash/core":43}],13:[function(t,e,r){"use strict";var n=t("inherits"),i=t("events"),o=t("lodash/core"),s=t("./promise"),a=function(t,e){e=e||{},this._conn=t,this.on("resume",(function(e){t.emit("resume",e)})),this._responseType=e.responseType,this._transport=e.transport||t._transport,this._noContentResponse=e.noContentResponse};function u(t){return JSON.parse(t)}function c(e){var r={};if(t("xml2js").parseString(e,{explicitArray:!1},(function(t,e){r={error:t,result:e}})),r.error)throw r.error;return r.result}function l(e){return t("./csv").parseCSV(e)}function h(t){return t}n(a,i.EventEmitter),a.prototype.request=function(t,e){var r=this,n=this._conn,i=n._logger,o=this.getRefreshDelegate(),a=n.instanceUrl,u=s.defer(),c=function(e){e?u.reject(e):(a!==n.instanceUrl&&(t.url=t.url.replace(a,n.instanceUrl)),r.request(t).then((function(t){u.resolve(t)}),(function(t){u.reject(t)})))};if(o&&o._refreshing)return o.once("resume",c),u.promise.thenCall(e);r.beforeSend(t),r.emit("request",t),i.debug("<request> method="+t.method+", url="+t.url);var l=Date.now();return this._transport.httpRequest(t).then((function(e){var n=Date.now();if(i.debug("elapsed time : "+(n-l)+"msec"),i.debug("<response> status="+e.statusCode+", url="+t.url),r.emit("response",e),r.isSessionExpired(e)&&o)return o.refresh(l,c),u.promise;if(r.isErrorResponse(e))throw r.getError(e);return r.getResponseBody(e)}),(function(t){var e=Date.now();throw i.debug("elapsed time : "+(e-l)+"msec"),i.error(t),t})).thenCall(e)},a.prototype.getRefreshDelegate=function(){return this._conn._refreshDelegate},a.prototype.beforeSend=function(t){if(t.headers=t.headers||{},this._conn.accessToken&&(t.headers.Authorization="Bearer "+this._conn.accessToken),this._conn.callOptions){var e=[];for(var r in this._conn.callOptions)e.push(r+"="+this._conn.callOptions[r]);t.headers["Sforce-Call-Options"]=e.join(", ")}},a.prototype.getResponseContentType=function(t){return this._responseType||t.headers&&t.headers["content-type"]},a.prototype.parseResponseBody=function(t){var e=this.getResponseContentType(t),r=/^(text|application)\/xml(;|$)/.test(e)?c:/^application\/json(;|$)/.test(e)?u:/^text\/csv(;|$)/.test(e)?l:h;try{return r(t.body)}catch(e){return t.body}},a.prototype.getResponseBody=function(t){if(204===t.statusCode)return this._noContentResponse;var e,r=this.parseResponseBody(t);if(this.hasErrorInResponseBody(r))throw e=this.getError(t,r);if(300===t.statusCode)throw(e=new Error("Multiple records found")).name="MULTIPLE_CHOICES",e.content=r,e;return r},a.prototype.isSessionExpired=function(t){return 401===t.statusCode},a.prototype.isErrorResponse=function(t){return t.statusCode>=400},a.prototype.hasErrorInResponseBody=function(t){return!1},a.prototype.parseError=function(t){var e=t;return o.isArray(e)?e[0]:e},a.prototype.getError=function(t,e){var r;try{r=this.parseError(e||this.parseResponseBody(t))}catch(t){}r=o.isObject(r)&&o.isString(r.message)?r:{errorCode:"ERROR_HTTP_"+t.statusCode,message:t.body};var n=new Error(r.message);for(var i in n.name=r.errorCode,r)n[i]=r[i];return n};var p=function(t,e){this._conn=t,this._refreshFn=e,this._refreshing=!1};n(p,i.EventEmitter),p.prototype.refresh=function(t,e){if(this._lastRefreshedAt>t)return e();var r=this,n=this._conn,i=n._logger;return r.once("resume",e),r._refreshing?void 0:(i.debug("<refresh token>"),r._refreshing=!0,r._refreshFn(n,(function(t,e,o){t||(i.debug("Connection refresh completed."),n.accessToken=e,n.emit("refresh",e,o)),r._lastRefreshedAt=Date.now(),r._refreshing=!1,r.emit("resume",t)})))},a.SessionRefreshDelegate=p,e.exports=a},{"./csv":11,"./promise":17,events:37,inherits:39,"lodash/core":43,xml2js:78}],14:[function(t,e,r){"use strict";var n=e.exports=function(t){"string"==typeof t&&(t=i[t]),t||(t=i.INFO),this._logLevel=t},i=n.LogLevels={DEBUG:1,INFO:2,WARN:3,ERROR:4,FATAL:5};for(var o in n.prototype.log=function(t,e){this._logLevel<=t&&(t<i.ERROR?console.log(e):console.error(e))},i)n.prototype[o.toLowerCase()]=s(i[o]);function s(t){return function(e){this.log(t,e)}}},{}],15:[function(t,e,r){"use strict";var n=t("querystring"),i=t("lodash/core"),o=t("./transport"),s="https://login.salesforce.com",a=e.exports=function(t){t.authzServiceUrl&&t.tokenServiceUrl?(this.loginUrl=t.authzServiceUrl.split("/").slice(0,3).join("/"),this.authzServiceUrl=t.authzServiceUrl,this.tokenServiceUrl=t.tokenServiceUrl,this.revokeServiceUrl=t.revokeServiceUrl):(this.loginUrl=t.loginUrl||s,this.authzServiceUrl=this.loginUrl+"/services/oauth2/authorize",this.tokenServiceUrl=this.loginUrl+"/services/oauth2/token",this.revokeServiceUrl=this.loginUrl+"/services/oauth2/revoke"),this.clientId=t.clientId,this.clientSecret=t.clientSecret,this.redirectUri=t.redirectUri,t.proxyUrl?this._transport=new o.ProxyTransport(t.proxyUrl):t.httpProxy?this._transport=new o.HttpProxyTransport(t.httpProxy):this._transport=new o};i.extend(a.prototype,{getAuthorizationUrl:function(t){return t=i.extend({response_type:"code",client_id:this.clientId,redirect_uri:this.redirectUri},t||{}),this.authzServiceUrl+(this.authzServiceUrl.indexOf("?")>=0?"&":"?")+n.stringify(t)},refreshToken:function(t,e){var r={grant_type:"refresh_token",refresh_token:t,client_id:this.clientId};return this.clientSecret&&(r.client_secret=this.clientSecret),this._postParams(r,e)},requestToken:function(t,e,r){return"function"==typeof e&&(r=e,e={}),e=i.extend({grant_type:"authorization_code",code:t,client_id:this.clientId,redirect_uri:this.redirectUri},e||{}),this.clientSecret&&(e.client_secret=this.clientSecret),this._postParams(e,r)},authenticate:function(t,e,r){return this._postParams({grant_type:"password",username:t,password:e,client_id:this.clientId,client_secret:this.clientSecret,redirect_uri:this.redirectUri},r)},revokeToken:function(t,e){return this._transport.httpRequest({method:"POST",url:this.revokeServiceUrl,body:n.stringify({token:t}),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(t){if(t.statusCode>=400){var e=n.parse(t.body);e&&e.error||(e={error:"ERROR_HTTP_"+t.statusCode,error_description:t.body});var r=new Error(e.error_description);throw r.name=e.error,r}})).thenCall(e)},_postParams:function(t,e){return this._transport.httpRequest({method:"POST",url:this.tokenServiceUrl,body:n.stringify(t),headers:{"content-type":"application/x-www-form-urlencoded"}}).then((function(t){var e;try{e=JSON.parse(t.body)}catch(t){}if(t.statusCode>=400){e=e||{error:"ERROR_HTTP_"+t.statusCode,error_description:t.body};var r=new Error(e.error_description);throw r.name=e.error,r}return e})).thenCall(e)}})},{"./transport":26,"lodash/core":43,querystring:51}],16:[function(t,e,r){"use strict";var n=t("lodash/core"),i=(t("./promise"),t("./connection"),e.exports=function(t){this.rule=new i(t),this.approval=new o(t)},function(t){this._conn=t});i.prototype.list=function(t){return this._conn.request("/process/rules").then((function(t){return t.rules})).thenCall(t)},i.prototype.trigger=function(t,e){return t=n.isArray(t)?t:[t],this._conn.request({method:"POST",url:"/process/rules/",body:JSON.stringify({contextIds:t}),headers:{"content-type":"application/json"}}).thenCall(e)};var o=function(t){this._conn=t};o.prototype.list=function(t){return this._conn.request("/process/approvals").then((function(t){return t.approvals})).thenCall(t)},o.prototype.request=function(t,e){return t=t.map((function(t){return t._request?t._request:t})),this._conn.request({method:"POST",url:"/process/approvals",headers:{"content-type":"application/json"},body:JSON.stringify({requests:t})}).thenCall(e)},o.prototype._createRequest=function(t,e,r,i,o){"function"==typeof r&&(o=r,i=null,r=null),"function"==typeof i&&(o=i,i=null),i=i||{};var a={actionType:t,contextId:e,comments:r};return n.extend(a,i),new s(this,a).thenCall(o)},o.prototype.submit=function(t,e,r,n){return this._createRequest("Submit",t,e,r,n)},o.prototype.approve=function(t,e,r,n){return this._createRequest("Approve",t,e,r,n)},o.prototype.reject=function(t,e,r,n){return this._createRequest("Reject",t,e,r,n)};var s=function(t,e){this._process=t,this._request=e};s.prototype.then=function(t,e){this._promise||(this._promise=this._process.request([this]).then((function(t){return t[0]}))),this._promise.then(t,e)},s.prototype.thenCall=function(t){return t?this.then((function(e){t(null,e)}),(function(e){t(e)})):this}},{"./connection":9,"./promise":17,"lodash/core":43}],17:[function(t,e,r){(function(r){"use strict";var n=t("lodash/core"),i=t("promise/lib/es6-extensions");i.prototype.thenCall=function(t){return n.isFunction(t)&&this.then((function(e){r.nextTick((function(){t(null,e)}))}),(function(e){r.nextTick((function(){t(e)}))})),this},i.prototype.fail=i.prototype.catch,i.defer=function(){return new o};var o=function(){var t=this;this.promise=new i((function(e,r){t.resolve=e,t.reject=r}))};e.exports=i}).call(this,t("_process"))},{_process:46,"lodash/core":43,"promise/lib/es6-extensions":48}],18:[function(t,e,r){(function(r){"use strict";var n=t("inherits"),i=(t("events"),t("readable-stream")),o=t("lodash/core"),s=t("./promise"),a=(t("./date"),t("./soql-builder")),u=t("./record-stream"),c=e.exports=function(t,e,r){c.super_.call(this,{objectMode:!0}),this._conn=t,o.isString(e)?this._soql=e:e.locator&&e.locator.indexOf("/")>=0?this._locator=e.locator.split("/").pop():(this._config=e,this.select(e.fields),e.includes&&this.include(e.includes),e.sort&&this.sort(e.sort)),this._options=o.defaults(r||{},{maxFetch:1e4,autoFetch:!1,scanAll:!1,responseTarget:l.QueryResult}),this._executed=!1,this._finished=!1,this._chaining=!1,this._deferred=s.defer()};n(c,i.Readable),c.prototype.select=function(t){if(this._soql)throw Error("Cannot set select fields for the query which has already built SOQL.");if(t=t||"*",o.isString(t))t=t.split(/\s*,\s*/);else if(o.isObject(t)&&!o.isArray(t)){var e=[];for(var r in t)t[r]&&e.push(r);t=e}return this._config.fields=t,this},c.prototype.where=function(t){if(this._soql)throw Error("Cannot set where conditions for the query which has already built SOQL.");return this._config.conditions=t,this},c.prototype.limit=function(t){if(this._soql)throw Error("Cannot set limit for the query which has already built SOQL.");return this._config.limit=t,this},c.prototype.skip=c.prototype.offset=function(t){if(this._soql)throw Error("Cannot set skip/offset for the query which has already built SOQL.");return this._config.offset=t,this},c.prototype.sort=c.prototype.orderby=function(t,e){if(this._soql)throw Error("Cannot set sort for the query which has already built SOQL.");return o.isString(t)&&o.isString(e)&&(t=[[t,e]]),this._config.sort=t,this},c.prototype.include=function(t,e,r,n){if(this._soql)throw Error("Cannot include child relationship into the query which has already built SOQL.");if(!o.isObject(t)){var i={table:t,conditions:e,fields:r,limit:n&&n.limit,offset:n&&(n.offset||n.skip),sort:n&&n.sort};o.isArray(this._config.includes)||(this._config.includes=[]),this._config.includes.push(i);var s=new h(this._conn,this,i);return this._children=this._children||[],this._children.push(s),s}var a=t;for(var u in a){var c=a[u];this.include(u,c.conditions,c.fields,c)}},c.prototype.maxFetch=function(t){return this._options.maxFetch=t,this},c.prototype.autoFetch=function(t){return this._options.autoFetch=t,this},c.prototype.scanAll=function(t){return this._options.scanAll=t,this};var l=c.ResponseTargets={};["QueryResult","Records","SingleRecord","Count"].forEach((function(t){l[t]=t})),c.prototype.setResponseTarget=function(t){return t in l&&(this._options.responseTarget=t),this},c.prototype.run=c.prototype.exec=c.prototype.execute=function(t,e){var r=this,n=this._conn._logger,i=this._deferred;if(this._executed)return i.reject(new Error("re-executing already executed query")),this;if(this._finished)return i.reject(new Error("executing already closed query")),this;"function"==typeof t&&(e=t,t={}),t={headers:(t=t||{}).headers||r._options.headers,responseTarget:t.responseTarget||r._options.responseTarget,autoFetch:t.autoFetch||r._options.autoFetch,maxFetch:t.maxFetch||r._options.maxFetch,scanAll:t.scanAll||r._options.scanAll};var s=function(t,r){if(o.isFunction(e))try{r=e(t,r),t=null}catch(e){t=e}t?i.reject(t):i.resolve(r)};return this.once("response",(function(t){s(null,t)})),this.once("error",(function(t){s(t)})),this.once("fetch",(function(){if(t.responseTarget===l.Records&&(r._chaining||e)){n.debug("--- collecting all fetched records ---");var i=[],o=function(t){i.push(t)};r.on("record",o),r.once("end",(function(){r.removeListener("record",o),r.emit("response",i,r)}))}})),this._executed=!0,n.debug(">>> Query start >>>"),this._execute(t).then((function(){n.debug("*** Query finished ***")})).fail((function(t){n.debug("--- Query error ---"),r.emit("error",t)})),this},c.prototype._execute=function(t){var e=this,r=this._conn._logger,n=t.responseTarget,i=t.autoFetch,o=t.maxFetch,a=t.scanAll;return s.resolve(e._locator?e._conn._baseUrl()+"/query/"+e._locator:e.toSOQL().then((function(t){return e.totalFetched=0,r.debug("SOQL = "+t),e._conn._baseUrl()+"/"+(a?"queryAll":"query")+"?q="+encodeURIComponent(t)}))).then((function(r){return e._conn.request({method:"GET",url:r,headers:t.headers})})).then((function(r){var s;switch(e.emit("fetch"),e.totalSize=r.totalSize,n){case l.SingleRecord:s=r.records&&r.records.length>0?r.records[0]:null;break;case l.Records:s=r.records;break;case l.Count:s=r.totalSize;break;default:s=r}n!==l.Records&&e.emit("response",s,e);for(var a=r.records&&r.records.length||0,u=0;u<a;u++){if(e.totalFetched>=o){e._finished=!0;break}var c=r.records[u];e.push(c),e.emit("record",c,e.totalFetched++,e)}return r.nextRecordsUrl&&(e._locator=r.nextRecordsUrl.split("/").pop()),e._finished=e._finished||r.done||!i,e._finished?e.push(null):e._execute(t),s}))},c.prototype._read=function(t){this._finished||this._executed||this.execute({autoFetch:!0})},c.prototype.on=function(t,e){if("record"===t){var r=this;this.on("readable",(function(){for(;null!==r.read(););}))}return c.super_.prototype.on.call(this,t,e)},c.prototype.addListener=c.prototype.on,c.prototype._expandFields=function(){if(this._soql)return s.reject(new Error("Cannot expand fields for the query which has already built SOQL."));var t,e,r=this,n=r._conn._logger,i=this._conn,a=this._config.table,u=this._config.fields||[];return n.debug("_expandFields: table = "+a+", fields = "+u.join(", ")),s.all([s.resolve(r._parent?(t=a,e=r._parent._config.table,n.debug('finding table for relation "'+t+'" in "'+e+'"...'),c(e).then((function(e){var r=t.toUpperCase(),n=o.find(e.childRelationships,(function(t){return(t.relationshipName||"").toUpperCase()===r}));return n?n.childSObject:s.reject(new Error("No child relationship found: "+t))}))):a).then((function(t){return s.all(o.map(u,(function(e){return l(t,e)}))).then((function(t){r._config.fields=o.flatten(t)}))})),s.all(o.map(r._children||[],(function(t){return t._expandFields()})))]);function c(t){n.debug("describe cache: "+t);var e=s.defer();return i.describe$(t,(function(t,r){n.debug("... done."),t?e.reject(t):e.resolve(r)})),e.promise}function l(t,e){n.debug('expanding field "'+e+'" in "'+t+'"...');var r=e.split(".");return"*"===r[r.length-1]?c(t).then((function(e){if(n.debug("table "+t+"has been described"),r.length>1){var i=r.shift(),s=o.find(e.fields,(function(t){return t.relationshipName&&t.relationshipName.toUpperCase()===i.toUpperCase()}));return s?l(1===s.referenceTo.length?s.referenceTo[0]:"Name",r.join(".")).then((function(t){return o.map(t,(function(t){return i+"."+t}))})):[]}return o.map(e.fields,(function(t){return t.name}))})):s.resolve([e])}},c.prototype.explain=function(t){var e=this,r=this._conn._logger;return e.toSOQL().then((function(t){r.debug("SOQL = "+t);var n="/query/?explain="+encodeURIComponent(t);return e._conn.request(n)})).thenCall(t)},c.prototype.toSOQL=function(t){var e=this;return s.resolve(e._soql||e._expandFields().then((function(){return a.createSOQL(e._config)}))).thenCall(t)},c.prototype.stream=u.Serializable.prototype.stream,c.prototype.map=u.prototype.map,c.prototype.filter=u.prototype.map;c.prototype.delete=c.prototype.del=c.prototype.destroy=function(t,e,r){if("function"==typeof t?(r=t,e={},t=null):"object"==typeof t&&null!==t&&(r=e,e=t,t=null),e=e||{},!(t=t||this._config&&this._config.table))throw new Error("SOQL based query needs SObject type information to bulk delete.");var n=!1===e.allowBulk?-1:"number"==typeof e.bulkThreshold?e.bulkThreshold:this._conn._ensureVersion(42)?200:this._conn.maxRequest/2,i=this;return new s((function(e,r){var o=[],s=null;i.on("data",(function(a){if(a.Id){var u={Id:a.Id};s?s.write(u):(o.push(u),(n<0||o.length>n)&&(s=i._conn.sobject(t).deleteBulk().on("response",e).on("error",r),o.forEach((function(t){s.write(t)})),o=[]))}else i.emit("error",new Error("Queried record does not include Salesforce record ID."))})).on("end",(function(){if(s)s.end();else{var n=o.map((function(t){return t.Id}));i._conn.sobject(t).destroy(n,{allowRecursive:!0}).then(e,r)}})).on("error",r)})).thenCall(r)},c.prototype.update=function(t,e,r,n){if("function"==typeof e?(n=e,r={},e=null):"object"==typeof e&&null!==e&&(n=r,r=e,e=null),r=r||{},!(e=e||this._config&&this._config.table))throw new Error("SOQL based query needs SObject type information to bulk update.");var i=o.isFunction(t)?u.map(t):u.recordMapStream(t),a=!1===r.allowBulk?-1:"number"==typeof r.bulkThreshold?r.bulkThreshold:this._conn._ensureVersion(42)?200:this._conn.maxRequest/2,c=this;return new s((function(t,r){var n=[],o=null;c.on("error",r).pipe(i).on("data",(function(i){o?o.write(i):(n.push(i),(a<0||n.length>a)&&(o=c._conn.sobject(e).updateBulk().on("response",t).on("error",r),n.forEach((function(t){o.write(t)})),n=[]))})).on("end",(function(){o?o.end():c._conn.sobject(e).update(n,{allowRecursive:!0}).then(t,r)})).on("error",r)})).thenCall(n)},c.prototype.then=function(t,e){return this._chaining=!0,this._finished||this._executed||this.execute(),this._deferred.promise.then.apply(this._deferred.promise,arguments)},c.prototype.thenCall=function(t){return o.isFunction(t)&&this.then((function(e){r.nextTick((function(){t(null,e)}))}),(function(e){r.nextTick((function(){t(e)}))})),this};var h=function(t,e,r){h.super_.call(this,t,r),this._parent=e};n(h,c),h.prototype.include=function(){throw new Error("Not allowed to include another subquery in subquery.")},h.prototype.end=function(){return this._parent},h.prototype.run=h.prototype.exec=h.prototype.execute=function(){return this._parent.execute.apply(this._parent,arguments)}}).call(this,t("_process"))},{"./date":12,"./promise":17,"./record-stream":20,"./soql-builder":25,_process:46,events:37,inherits:39,"lodash/core":43,"readable-stream":62}],19:[function(t,e,r){"use strict";var n=e.exports=function(t,e){this._conn=t,this._path=e};n.prototype.describe=function(t){var e=this._path+"/describe";return this._conn.request(e).thenCall(t)},n.prototype.defaultValues=function(t,e){"function"==typeof t&&(e=t,t=null);var r=this._path+"/defaultValues";return t&&(r+="/"+t),this._conn.request(r).thenCall(e)},n.prototype.execute=function(t,e,r){var n={contextId:t,record:e};return this._conn.requestPost(this._path,n).thenCall(r)}},{}],20:[function(t,e,r){"use strict";t("events");var n=t("readable-stream"),i=(n.Duplex,n.Transform),o=n.PassThrough,s=t("inherits"),a=t("lodash/core"),u=t("./csv"),c=e.exports=function(){c.super_.call(this,{objectMode:!0})};s(c,i),c.prototype._transform=function(t,e,r){this.emit("record",t),this.push(t),r()},c.prototype.map=function(t){return this.pipe(c.map(t))},c.prototype.filter=function(t){return this.pipe(c.filter(t))};var l=c.Serializable=function(){l.super_.call(this),this._dataStream=null};s(l,c),l.prototype.stream=function(t,e){var r=d[t=t||"csv"];if(!r)throw new Error("Converting ["+t+"] data stream is not supported.");return this._dataStream||(this._dataStream=new o,this.pipe(r.serialize(e)).pipe(this._dataStream)),this._dataStream};var h=c.Parsable=function(){h.super_.call(this),this._dataStream=null};function p(t,e){return Object.keys(t).reduce((function(t,r){var n=t[r],i={};if("attributes"===r)delete(t=a.extend({},t))[r];else if(e.nullValue&&null===n)i[r]=e.nullValue,t=a.extend({},t,i);else if(null!==n&&"object"==typeof n){var o=p(n,e);t=Object.keys(o).reduce((function(t,e){return t[r+"."+e]=o[e],t}),a.extend({},t))}return t}),t)}s(h,c),h.prototype.stream=function(t,e){var r=d[t=t||"csv"],n=this;if(!r)throw new Error("Converting ["+t+"] data stream is not supported.");return this._dataStream||(this._dataStream=new o,this._parserStream=r.parse(e).on("error",(function(t){n.emit("error",t)})),this._parserStream.pipe(this).pipe(new o({objectMode:!0,highWaterMark:5e5}))),this._dataStream},h.prototype.on=function(t,e){return"readable"!==t&&"record"!==t||this._dataStream.pipe(this._parserStream),h.super_.prototype.on.call(this,t,e)},h.prototype.addListener=h.prototype.on,c.map=function(t){var e=new c.Serializable;return e._transform=function(e,r,n){var i=t(e)||e;this.push(i),n()},e},c.recordMapStream=function(t,e){return c.map((function(n){var i={Id:n.Id};for(var o in t)i[o]=e?t[o]:r(t[o],n);return i}));function r(t,e){if(a.isString(t)){var r=/^\$\{(\w+)\}$/.exec(t);return r?e[r[1]]:t.replace(/\$\{(\w+)\}/g,(function(t,r){var n=e[r];return a.isNull(n)||a.isUndefined(n)?"":String(n)}))}return t}},c.filter=function(t){var e=new c.Serializable;return e._transform=function(e,r,n){t(e)&&this.push(e),n()},e};var f={serialize:function(t){return t=t||{},e=c.map((function(e){return p(e,t)})),r=u.serializeCSVStream(t),(n=new o).on("pipe",(function(t){t.unpipe(n),t.pipe(e).pipe(r)})),n.pipe=function(t,e){return r.pipe(t,e)},n;var e,r,n},parse:function(t){return u.parseCSVStream(t)}},d=c.DataStreamConverters={csv:f}},{"./csv":11,events:37,inherits:39,"lodash/core":43,"readable-stream":62}],21:[function(t,e,r){"use strict";var n=t("lodash/core"),i=e.exports=function(t,e,r){this._conn=t,this.type=e,this.id=r};i.prototype.retrieve=function(t,e){return"function"==typeof t&&(e=t,t={}),this._conn.retrieve(this.type,this.id,t,e)},i.prototype.update=function(t,e,r){return"function"==typeof e&&(r=e,e={}),(t=n.clone(t)).Id=this.id,this._conn.update(this.type,t,e,r)},i.prototype.delete=i.prototype.del=i.prototype.destroy=function(t,e){return"function"==typeof t&&(e=t,t={}),this._conn.destroy(this.type,this.id,t,e)},i.prototype.blob=function(t){var e=[this._conn._baseUrl(),"sobjects",this.type,this.id,t].join("/");return this._conn.request(e).stream()}},{"lodash/core":43}],22:[function(t,e,r){"use strict";var n=t("./_required");e.exports=function(t){"./jsforce"!==t&&"jsforce"!==t||(t="./core");var e=n[t];if(void 0===e)throw new Error("Cannot find module '"+t+"'");return e}},{"./_required":3}],23:[function(t,e,r){"use strict";var n=t("inherits"),i=t("lodash/core"),o=(t("xml2js"),t("./http-api")),s=e.exports=function(t,e){s.super_.apply(this,arguments),this._endpointUrl=e.endpointUrl,this._xmlns=e.xmlns||"urn:partner.soap.sforce.com"};function a(t,e){if(i.isArray(t))return t.map((function(t){return a(t,e&&e[0])}));if(i.isObject(t)){if(t.$&&"true"===t.$["xsi:nil"])return null;if(i.isArray(e))return[a(t,e[0])];var r={};for(var n in t)r[n]=a(t[n],e&&e[n]);return r}if(i.isArray(e))return[a(t,e[0])];if(i.isObject(e))return{};switch(e){case"string":return String(t);case"number":return Number(t);case"boolean":return"true"===t;default:return t}}function u(t,e){var r=e.shift();if(r){for(var n in t)if(r.test(n))return u(t[n],e);return null}return t}function c(t,e){if(i.isObject(t)&&(e=t,t=null),i.isArray(e))return i.map(e,(function(e){return c(t,e)})).join("");var r=[],n=[];if(i.isObject(e)){for(var o in e){var s=e[o];"@"===o[0]?(o=o.substring(1),r.push(o+'="'+s+'"')):n.push(c(o,s))}e=n.join("")}else e=String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;");return(t?"<"+t+(r.length>0?" "+r.join(" "):"")+">":"")+e+(t?"</"+t+">":"")}n(s,o),s.prototype.invoke=function(t,e,r,n){"function"==typeof r&&(n=r,r=null);var i={};return i[t]=e,this.request({method:"POST",url:this._endpointUrl,headers:{"Content-Type":"text/xml",SOAPAction:'""'},message:i}).then((function(t){return r?a(t,r):t})).thenCall(n)},s.prototype.beforeSend=function(t){t.body=this._createEnvelope(t.message)},s.prototype.isSessionExpired=function(t){return 500===t.statusCode&&/<faultcode>[a-zA-Z]+:INVALID_SESSION_ID<\/faultcode>/.test(t.body)},s.prototype.parseError=function(t){var e=u(t,[/:Envelope$/,/:Body$/,/:Fault$/]);return{errorCode:e.faultcode,message:e.faultstring}},s.prototype.getResponseBody=function(t){return u(s.super_.prototype.getResponseBody.call(this,t),[/:Envelope$/,/:Body$/,/.+/])},s.prototype._createEnvelope=function(t){var e={},r=this._conn;return r.accessToken&&(e.SessionHeader={sessionId:this._conn.accessToken}),r.callOptions&&(e.CallOptions=r.callOptions),['<?xml version="1.0" encoding="UTF-8"?>','<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"',' xmlns:xsd="http://www.w3.org/2001/XMLSchema"',' xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">','<soapenv:Header xmlns="'+this._xmlns+'">',c(e),"</soapenv:Header>",'<soapenv:Body xmlns="'+this._xmlns+'">',c(t),"</soapenv:Body>","</soapenv:Envelope>"].join("")}},{"./http-api":13,inherits:39,"lodash/core":43,xml2js:78}],24:[function(t,e,r){"use strict";var n=t("lodash/core"),i=t("./record"),o=t("./query"),s=(t("./cache"),t("./quick-action")),a=e.exports=function(t,e){this._conn=t,this.type=e;var r={key:"describe."+this.type};this.describe$=t.cache.makeCacheable(this.describe,this,r),this.describe=t.cache.makeResponseCacheable(this.describe,this,r),r={key:"layouts."+this.type},this.layouts$=t.cache.makeCacheable(this.layouts,this,r),this.layouts=t.cache.makeResponseCacheable(this.layouts,this,r),r={key:"compactLayouts."+this.type},this.compactLayouts$=t.cache.makeCacheable(this.compactLayouts,this,r),this.compactLayouts=t.cache.makeResponseCacheable(this.compactLayouts,this,r),r={key:"approvalLayouts."+this.type},this.approvalLayouts$=t.cache.makeCacheable(this.approvalLayouts,this,r),this.approvalLayouts=t.cache.makeResponseCacheable(this.approvalLayouts,this,r)};a.prototype.insert=a.prototype.create=function(t,e,r){return"function"==typeof e&&(r=e,e={}),this._conn.create(this.type,t,e,r)},a.prototype.retrieve=function(t,e,r){return"function"==typeof e&&(r=e,e={}),this._conn.retrieve(this.type,t,e,r)},a.prototype.update=function(t,e,r){return"function"==typeof e&&(r=e,e={}),this._conn.update(this.type,t,e,r)},a.prototype.upsert=function(t,e,r,n){return"function"==typeof r&&(n=r,r={}),this._conn.upsert(this.type,t,e,r,n)},a.prototype.delete=a.prototype.del=a.prototype.destroy=function(t,e,r){return"function"==typeof e&&(r=e,e={}),this._conn.destroy(this.type,t,e,r)},a.prototype.describe=function(t){return this._conn.describe(this.type,t)},a.prototype.record=function(t){return new i(this._conn,this.type,t)},a.prototype.find=function(t,e,r,n){"function"==typeof t?(n=t,t={},e=null,r=null):"function"==typeof e?(n=e,e=null,r=null):"function"==typeof r&&(n=r,r=null);var i={fields:e,includes:(r=r||{}).includes,table:this.type,conditions:t,limit:r.limit,sort:r.sort,offset:r.offset||r.skip},s=new o(this._conn,i,r);return s.setResponseTarget(o.ResponseTargets.Records),n&&s.run(n),s},a.prototype.findOne=function(t,e,r,i){"function"==typeof t?(i=t,t={},e=null,r=null):"function"==typeof e?(i=e,e=null,r=null):"function"==typeof r&&(i=r,r=null),r=n.extend(r||{},{limit:1});var s=this.find(t,e,r);return s.setResponseTarget(o.ResponseTargets.SingleRecord),i&&s.run(i),s},a.prototype.select=function(t,e){return this.find(null,t,null,e)},a.prototype.count=function(t,e){"function"==typeof t&&(e=t,t={});var r=this.find(t,{"count()":!0});return r.setResponseTarget("Count"),e&&r.run(e),r},a.prototype.bulkload=function(t,e,r,n){return this._conn.bulk.load(this.type,t,e,r,n)},a.prototype.insertBulk=a.prototype.createBulk=function(t,e){return this.bulkload("insert",t,e)},a.prototype.updateBulk=function(t,e){return this.bulkload("update",t,e)},a.prototype.upsertBulk=function(t,e,r){return this.bulkload("upsert",{extIdField:e},t,r)},a.prototype.deleteBulk=a.prototype.destroyBulk=function(t,e){return this.bulkload("delete",t,e)},a.prototype.deleteHardBulk=a.prototype.destroyHardBulk=function(t,e){return this.bulkload("hardDelete",t,e)},a.prototype.recent=function(t){return this._conn.recent(this.type,t)},a.prototype.updated=function(t,e,r){return this._conn.updated(this.type,t,e,r)},a.prototype.deleted=function(t,e,r){return this._conn.deleted(this.type,t,e,r)},a.prototype.layouts=function(t,e){"function"==typeof t&&(e=t,t=null);var r="/sobjects/"+this.type+"/describe/"+(t?"namedLayouts/"+t:"layouts");return this._conn.request(r,e)},a.prototype.compactLayouts=function(t){var e="/sobjects/"+this.type+"/describe/compactLayouts";return this._conn.request(e,t)},a.prototype.approvalLayouts=function(t){var e="/sobjects/"+this.type+"/describe/approvalLayouts";return this._conn.request(e,t)},a.prototype.listviews=function(t){var e=this._conn._baseUrl()+"/sobjects/"+this.type+"/listviews";return this._conn.request(e,t)},a.prototype.listview=function(t){return new u(this._conn,this.type,t)},a.prototype.quickActions=function(t){return this._conn.request("/sobjects/"+this.type+"/quickActions").thenCall(t)},a.prototype.quickAction=function(t){return new s(this._conn,"/sobjects/"+this.type+"/quickActions/"+t)};var u=function(t,e,r){this._conn=t,this.type=e,this.id=r};u.prototype.results=function(t){var e=this._conn._baseUrl()+"/sobjects/"+this.type+"/listviews/"+this.id+"/results";return this._conn.request(e,t)},u.prototype.describe=function(t,e){"function"==typeof t&&(e=t,t={}),t=t||{};var r=this._conn._baseUrl()+"/sobjects/"+this.type+"/listviews/"+this.id+"/describe";return this._conn.request({method:"GET",url:r,headers:t.headers},e)},u.prototype.explain=function(t){var e="/query/?explain="+this.id;return this._conn.request(e,t)}},{"./cache":8,"./query":18,"./quick-action":19,"./record":21,"lodash/core":43}],25:[function(t,e,r){"use strict";var n=t("lodash/core"),i=t("./date");function o(t){var e=["SELECT ",s(t.fields,t.includes)," FROM ",t.table].join(""),r=a(t.conditions);r&&(e+=" WHERE "+r);var i=function(t){if(t=t||[],n.isString(t)){if(/,|\s+(asc|desc)\s*$/.test(t))return t;t=t.split(/\s+/).map((function(t){var e="ASC",r=t[0];return"-"===r?(e="DESC",t=t.substring(1)):"+"===r&&(t=t.substring(1)),[t,e]}))}else h(t)||(t=n.keys(t).map((function(e){return[e,t[e]]})));return t.map((function(t){var e=t[0],r=t[1];switch(String(r)){case"DESC":case"desc":case"descending":case"-":case"-1":r="DESC";break;default:r="ASC"}return e+" "+r})).join(", ")}(t.sort);return i&&(e+=" ORDER BY "+i),t.limit&&(e+=" LIMIT "+t.limit),t.offset&&(e+=" OFFSET "+t.offset),e}function s(t,e){return e=n.map(n.values(e||{}),(function(t){return"("+o(t)+")"})),(t||["Id"]).concat(e).join(", ")}function a(t,e,r){return n.isString(t)?t:(e=e||"AND",r=r||0,t=(t=h(t=t||[])?t.map((function(t){var e=[];for(var r in t)e.push({key:r,value:t[r]});return e.length>1?e:e[0]})):n.keys(t).map((function(e){return{key:e,value:t[e]}}))).map((function(i){var o,s,u,l=r+1;switch(i.key){case"$or":case"$and":case"$not":return"NOT"!==e&&1===t.length&&(l=r),o="$or"===i.key?"OR":"$and"===i.key?"AND":"NOT",a(i.value,o,l);default:return s=i.key,u=i.value,n.isArray(u)?c(s,"$in",u):n.isObject(u)?n.map(u,(function(t,e){if("$"===e[0])return c(s,e,t)})).join(" AND "):c(s,"$eq",u)}})).filter((function(t){return t})),"NOT"===e?((i=r>0)?"(":"")+"NOT "+t[0]+(i?")":""):((i=r>0&&t.length>1)?"(":"")+t.join(" "+e+" ")+(i?")":""));var i}var u={"=":"=",$eq:"=","!=":"!=",$ne:"!=",">":">",$gt:">","<":"<",$lt:"<",">=":">=",$gte:">=","<=":"<=",$lte:"<=",$like:"LIKE",$nlike:"NOT LIKE",$in:"IN",$nin:"NOT IN",$includes:"INCLUDES",$excludes:"EXCLUDES",$exists:"EXISTS"};function c(t,e,r){var i=u[e];if(!i||n.isUndefined(r))return null;var o=l(r);if(n.isUndefined(o))return null;switch(i){case"NOT LIKE":return"("+["NOT",t,"LIKE",o].join(" ")+")";case"EXISTS":return[t,r?"!=":"=","null"].join(" ");default:return[t,i,o].join(" ")}}function l(t){return h(t)?t.length>0?"("+t.map(l).join(", ")+")":void 0:t instanceof i?t.toString():n.isString(t)?"'"+(String(t||"").replace(/'/g,"\\'")+"'"):n.isNumber(t)?t.toString():n.isNull(t)?"null":t}function h(t){return n.isObject(t)&&n.isFunction(t.pop)}r.createSOQL=o},{"./date":12,"lodash/core":43}],26:[function(t,e,r){(function(r){"use strict";var n,i=t("inherits"),o=t("./promise"),s=t("./browser/canvas"),a=t("./browser/jsonp");if("undefined"==typeof window)n=r.env.LOCATION_BASE_URL||"";else{var u=function(t){var e=/(\w+)\.(visual\.force|salesforce)\.com$/.exec(t);e&&(t=e[1]+".salesforce.com");return t}(window.location.host);n=u?"https://"+u:""}function c(t,e){var r=t.then;return t.then=function(){return e(),c(r.apply(t,arguments),e)},t.stream=e,t}var l=e.exports=function(){};l.prototype.httpRequest=function(t,e){var r,n=o.defer(),i=t.url;delete t.url;return c(n.promise,(function(){return r||(r=fetch(i,t)),r})).thenCall(e)};var h=l.JsonpTransport=function(t){this._jsonpParam=t};i(h,l),h.prototype._getHttpRequestModule=function(){return a.createRequest(this._jsonpParam)},h.supported=a.supported;var p=l.CanvasTransport=function(t){this._signedRequest=t};i(p,l),p.prototype._getHttpRequestModule=function(){return s.createRequest(this._signedRequest)},p.supported=s.supported;var f=l.ProxyTransport=function(t){this._proxyUrl=t};i(f,l),f.prototype.httpRequest=function(t,e){var r=t.url;0===r.indexOf("/")&&(r=n+r);var i={method:t.method,url:this._proxyUrl+"?"+Date.now()+"."+(""+Math.random()).substring(2),headers:{"salesforceproxy-endpoint":r}};if((t.body||""===t.body)&&(i.body=t.body),t.headers)for(var o in t.headers)i.headers[o]=t.headers[o];return f.super_.prototype.httpRequest.call(this,i,e)};var d=l.HttpProxyTransport=function(t){this._httpProxy=t};i(d,l),d.prototype.httpRequest=function(t,e){var r=t.url;0===r.indexOf("/")&&(r=n+r);var i={method:t.method,url:t.url,proxy:this._httpProxy,headers:{}};if((t.body||""===t.body)&&(i.body=t.body),t.headers)for(var o in t.headers)i.headers[o]=t.headers[o];return d.super_.prototype.httpRequest.call(this,i,e)}}).call(this,t("_process"))},{"./browser/canvas":4,"./browser/jsonp":6,"./promise":17,_process:46,inherits:39,request:7}],27:[function(t,e,r){(function(t){"use strict";function r(t){i.length||(n(),!0),i[i.length]=t}e.exports=r;var n,i=[],o=0;function s(){for(;o<i.length;){var t=o;if(o+=1,i[t].call(),o>1024){for(var e=0,r=i.length-o;e<r;e++)i[e]=i[e+o];i.length-=o,o=0}}i.length=0,o=0,!1}var a,u,c,l=void 0!==t?t:self,h=l.MutationObserver||l.WebKitMutationObserver;function p(t){return function(){var e=setTimeout(n,0),r=setInterval(n,50);function n(){clearTimeout(e),clearInterval(r),t()}}}"function"==typeof h?(a=1,u=new h(s),c=document.createTextNode(""),u.observe(c,{characterData:!0}),n=function(){a=-a,c.data=a}):n=p(s),r.requestFlush=n,r.makeRequestCallFromTimer=p}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],28:[function(t,e,r){"use strict";r.byteLength=function(t){var e=u(t),r=e[0],n=e[1];return 3*(r+n)/4-n},r.toByteArray=function(t){for(var e,r=u(t),n=r[0],s=r[1],a=new o(function(t,e,r){return 3*(e+r)/4-r}(0,n,s)),c=0,l=s>0?n-4:n,h=0;h<l;h+=4)e=i[t.charCodeAt(h)]<<18|i[t.charCodeAt(h+1)]<<12|i[t.charCodeAt(h+2)]<<6|i[t.charCodeAt(h+3)],a[c++]=e>>16&255,a[c++]=e>>8&255,a[c++]=255&e;2===s&&(e=i[t.charCodeAt(h)]<<2|i[t.charCodeAt(h+1)]>>4,a[c++]=255&e);1===s&&(e=i[t.charCodeAt(h)]<<10|i[t.charCodeAt(h+1)]<<4|i[t.charCodeAt(h+2)]>>2,a[c++]=e>>8&255,a[c++]=255&e);return a},r.fromByteArray=function(t){for(var e,r=t.length,i=r%3,o=[],s=16383,a=0,u=r-i;a<u;a+=s)o.push(c(t,a,a+s>u?u:a+s));1===i?(e=t[r-1],o.push(n[e>>2]+n[e<<4&63]+"==")):2===i&&(e=(t[r-2]<<8)+t[r-1],o.push(n[e>>10]+n[e>>4&63]+n[e<<2&63]+"="));return o.join("")};for(var n=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0;a<64;++a)n[a]=s[a],i[s.charCodeAt(a)]=a;function u(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return-1===r&&(r=e),[r,r===e?0:4-r%4]}function c(t,e,r){for(var i,o,s=[],a=e;a<r;a+=3)i=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),s.push(n[(o=i)>>18&63]+n[o>>12&63]+n[o>>6&63]+n[63&o]);return s.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},{}],29:[function(t,e,r){},{}],30:[function(t,e,r){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
"use strict";var n=t("base64-js"),i=t("ieee754");r.Buffer=a,r.SlowBuffer=function(t){+t!=t&&(t=0);return a.alloc(+t)},r.INSPECT_MAX_BYTES=50;var o=2147483647;function s(t){if(t>o)throw new RangeError("Invalid typed array length");var e=new Uint8Array(t);return e.__proto__=a.prototype,e}function a(t,e,r){if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return l(t)}return u(t,e,r)}function u(t,e,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return B(t)||t&&B(t.buffer)?function(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');var n;n=void 0===e&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,e):new Uint8Array(t,e,r);return n.__proto__=a.prototype,n}(t,e,r):"string"==typeof t?function(t,e){"string"==typeof e&&""!==e||(e="utf8");if(!a.isEncoding(e))throw new TypeError("Unknown encoding: "+e);var r=0|f(t,e),n=s(r),i=n.write(t,e);i!==r&&(n=n.slice(0,i));return n}(t,e):function(t){if(a.isBuffer(t)){var e=0|p(t.length),r=s(e);return 0===r.length||t.copy(r,0,0,e),r}if(t){if(ArrayBuffer.isView(t)||"length"in t)return"number"!=typeof t.length||X(t.length)?s(0):h(t);if("Buffer"===t.type&&Array.isArray(t.data))return h(t.data)}throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object.")}(t)}function c(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('"size" argument must not be negative')}function l(t){return c(t),s(t<0?0:0|p(t))}function h(t){for(var e=t.length<0?0:0|p(t.length),r=s(e),n=0;n<e;n+=1)r[n]=255&t[n];return r}function p(t){if(t>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|t}function f(t,e){if(a.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||B(t))return t.byteLength;"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return U(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return F(t).length;default:if(n)return U(t).length;e=(""+e).toLowerCase(),n=!0}}function d(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return D(this,e,r);case"utf8":case"utf-8":return S(this,e,r);case"ascii":return N(this,e,r);case"latin1":case"binary":return I(this,e,r);case"base64":return O(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function y(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function m(t,e,r,n,i){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),X(r=+r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof e&&(e=a.from(e,n)),a.isBuffer(e))return 0===e.length?-1:g(t,e,r,n,i);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):g(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function g(t,e,r,n,i){var o,s=1,a=t.length,u=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;s=2,a/=2,u/=2,r/=2}function c(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(i){var l=-1;for(o=r;o<a;o++)if(c(t,o)===c(e,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===u)return l*s}else-1!==l&&(o-=o-l),l=-1}else for(r+u>a&&(r=a-u),o=r;o>=0;o--){for(var h=!0,p=0;p<u;p++)if(c(t,o+p)!==c(e,p)){h=!1;break}if(h)return o}return-1}function _(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=e.length;n>o/2&&(n=o/2);for(var s=0;s<n;++s){var a=parseInt(e.substr(2*s,2),16);if(X(a))return s;t[r+s]=a}return s}function v(t,e,r,n){return q(U(e,t.length-r),t,r,n)}function b(t,e,r,n){return q(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function w(t,e,r,n){return b(t,e,r,n)}function T(t,e,r,n){return q(F(e),t,r,n)}function E(t,e,r,n){return q(function(t,e){for(var r,n,i,o=[],s=0;s<t.length&&!((e-=2)<0);++s)n=(r=t.charCodeAt(s))>>8,i=r%256,o.push(i),o.push(n);return o}(e,t.length-r),t,r,n)}function O(t,e,r){return 0===e&&r===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,r))}function S(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var o,s,a,u,c=t[i],l=null,h=c>239?4:c>223?3:c>191?2:1;if(i+h<=r)switch(h){case 1:c<128&&(l=c);break;case 2:128==(192&(o=t[i+1]))&&(u=(31&c)<<6|63&o)>127&&(l=u);break;case 3:o=t[i+1],s=t[i+2],128==(192&o)&&128==(192&s)&&(u=(15&c)<<12|(63&o)<<6|63&s)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:o=t[i+1],s=t[i+2],a=t[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(u=(15&c)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&u<1114112&&(l=u)}null===l?(l=65533,h=1):l>65535&&(l-=65536,n.push(l>>>10&1023|55296),l=56320|1023&l),n.push(l),i+=h}return function(t){var e=t.length;if(e<=x)return String.fromCharCode.apply(String,t);var r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=x));return r}(n)}r.kMaxLength=o,a.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()}catch(t){return!1}}(),a.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(a.prototype,"parent",{get:function(){if(this instanceof a)return this.buffer}}),Object.defineProperty(a.prototype,"offset",{get:function(){if(this instanceof a)return this.byteOffset}}),"undefined"!=typeof Symbol&&Symbol.species&&a[Symbol.species]===a&&Object.defineProperty(a,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),a.poolSize=8192,a.from=function(t,e,r){return u(t,e,r)},a.prototype.__proto__=Uint8Array.prototype,a.__proto__=Uint8Array,a.alloc=function(t,e,r){return function(t,e,r){return c(t),t<=0?s(t):void 0!==e?"string"==typeof r?s(t).fill(e,r):s(t).fill(e):s(t)}(t,e,r)},a.allocUnsafe=function(t){return l(t)},a.allocUnsafeSlow=function(t){return l(t)},a.isBuffer=function(t){return null!=t&&!0===t._isBuffer},a.compare=function(t,e){if(!a.isBuffer(t)||!a.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},a.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return a.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=a.allocUnsafe(e),i=0;for(r=0;r<t.length;++r){var o=t[r];if(ArrayBuffer.isView(o)&&(o=a.from(o)),!a.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,i),i+=o.length}return n},a.byteLength=f,a.prototype._isBuffer=!0,a.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)y(this,e,e+1);return this},a.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)y(this,e,e+3),y(this,e+1,e+2);return this},a.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)y(this,e,e+7),y(this,e+1,e+6),y(this,e+2,e+5),y(this,e+3,e+4);return this},a.prototype.toString=function(){var t=this.length;return 0===t?"":0===arguments.length?S(this,0,t):d.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(t){if(!a.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===a.compare(this,t)},a.prototype.inspect=function(){var t="",e=r.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},a.prototype.compare=function(t,e,r,n,i){if(!a.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(n>>>=0),s=(r>>>=0)-(e>>>=0),u=Math.min(o,s),c=this.slice(n,i),l=t.slice(e,r),h=0;h<u;++h)if(c[h]!==l[h]){o=c[h],s=l[h];break}return o<s?-1:s<o?1:0},a.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},a.prototype.indexOf=function(t,e,r){return m(this,t,e,r,!0)},a.prototype.lastIndexOf=function(t,e,r){return m(this,t,e,r,!1)},a.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return _(this,t,e,r);case"utf8":case"utf-8":return v(this,t,e,r);case"ascii":return b(this,t,e,r);case"latin1":case"binary":return w(this,t,e,r);case"base64":return T(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var x=4096;function N(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function I(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function D(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=e;o<r;++o)i+=P(t[o]);return i}function C(t,e,r){for(var n=t.slice(e,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function A(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function L(t,e,r,n,i,o){if(!a.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function j(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function M(t,e,r,n,o){return e=+e,r>>>=0,o||j(t,0,r,4),i.write(t,e,r,n,23,4),r+4}function R(t,e,r,n,o){return e=+e,r>>>=0,o||j(t,0,r,8),i.write(t,e,r,n,52,8),r+8}a.prototype.slice=function(t,e){var r=this.length;(t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t);var n=this.subarray(t,e);return n.__proto__=a.prototype,n},a.prototype.readUIntLE=function(t,e,r){t>>>=0,e>>>=0,r||A(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n},a.prototype.readUIntBE=function(t,e,r){t>>>=0,e>>>=0,r||A(t,e,this.length);for(var n=this[t+--e],i=1;e>0&&(i*=256);)n+=this[t+--e]*i;return n},a.prototype.readUInt8=function(t,e){return t>>>=0,e||A(t,1,this.length),this[t]},a.prototype.readUInt16LE=function(t,e){return t>>>=0,e||A(t,2,this.length),this[t]|this[t+1]<<8},a.prototype.readUInt16BE=function(t,e){return t>>>=0,e||A(t,2,this.length),this[t]<<8|this[t+1]},a.prototype.readUInt32LE=function(t,e){return t>>>=0,e||A(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},a.prototype.readUInt32BE=function(t,e){return t>>>=0,e||A(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},a.prototype.readIntLE=function(t,e,r){t>>>=0,e>>>=0,r||A(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*e)),n},a.prototype.readIntBE=function(t,e,r){t>>>=0,e>>>=0,r||A(t,e,this.length);for(var n=e,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},a.prototype.readInt8=function(t,e){return t>>>=0,e||A(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},a.prototype.readInt16LE=function(t,e){t>>>=0,e||A(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},a.prototype.readInt16BE=function(t,e){t>>>=0,e||A(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},a.prototype.readInt32LE=function(t,e){return t>>>=0,e||A(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},a.prototype.readInt32BE=function(t,e){return t>>>=0,e||A(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},a.prototype.readFloatLE=function(t,e){return t>>>=0,e||A(t,4,this.length),i.read(this,t,!0,23,4)},a.prototype.readFloatBE=function(t,e){return t>>>=0,e||A(t,4,this.length),i.read(this,t,!1,23,4)},a.prototype.readDoubleLE=function(t,e){return t>>>=0,e||A(t,8,this.length),i.read(this,t,!0,52,8)},a.prototype.readDoubleBE=function(t,e){return t>>>=0,e||A(t,8,this.length),i.read(this,t,!1,52,8)},a.prototype.writeUIntLE=function(t,e,r,n){(t=+t,e>>>=0,r>>>=0,n)||L(this,t,e,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[e]=255&t;++o<r&&(i*=256);)this[e+o]=t/i&255;return e+r},a.prototype.writeUIntBE=function(t,e,r,n){(t=+t,e>>>=0,r>>>=0,n)||L(this,t,e,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+r},a.prototype.writeUInt8=function(t,e,r){return t=+t,e>>>=0,r||L(this,t,e,1,255,0),this[e]=255&t,e+1},a.prototype.writeUInt16LE=function(t,e,r){return t=+t,e>>>=0,r||L(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},a.prototype.writeUInt16BE=function(t,e,r){return t=+t,e>>>=0,r||L(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},a.prototype.writeUInt32LE=function(t,e,r){return t=+t,e>>>=0,r||L(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},a.prototype.writeUInt32BE=function(t,e,r){return t=+t,e>>>=0,r||L(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},a.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e>>>=0,!n){var i=Math.pow(2,8*r-1);L(this,t,e,r,i-1,-i)}var o=0,s=1,a=0;for(this[e]=255&t;++o<r&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+r},a.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e>>>=0,!n){var i=Math.pow(2,8*r-1);L(this,t,e,r,i-1,-i)}var o=r-1,s=1,a=0;for(this[e+o]=255&t;--o>=0&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+r},a.prototype.writeInt8=function(t,e,r){return t=+t,e>>>=0,r||L(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},a.prototype.writeInt16LE=function(t,e,r){return t=+t,e>>>=0,r||L(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},a.prototype.writeInt16BE=function(t,e,r){return t=+t,e>>>=0,r||L(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},a.prototype.writeInt32LE=function(t,e,r){return t=+t,e>>>=0,r||L(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},a.prototype.writeInt32BE=function(t,e,r){return t=+t,e>>>=0,r||L(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},a.prototype.writeFloatLE=function(t,e,r){return M(this,t,e,!0,r)},a.prototype.writeFloatBE=function(t,e,r){return M(this,t,e,!1,r)},a.prototype.writeDoubleLE=function(t,e,r){return R(this,t,e,!0,r)},a.prototype.writeDoubleBE=function(t,e,r){return R(this,t,e,!1,r)},a.prototype.copy=function(t,e,r,n){if(!a.isBuffer(t))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var i=n-r;if(this===t&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(e,r,n);else if(this===t&&r<e&&e<n)for(var o=i-1;o>=0;--o)t[o+e]=this[o+r];else Uint8Array.prototype.set.call(t,this.subarray(r,n),e);return i},a.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!a.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===t.length){var i=t.charCodeAt(0);("utf8"===n&&i<128||"latin1"===n)&&(t=i)}}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var o;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(o=e;o<r;++o)this[o]=t;else{var s=a.isBuffer(t)?t:new a(t,n),u=s.length;if(0===u)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(o=0;o<r-e;++o)this[o+e]=s[o%u]}return this};var k=/[^+/0-9A-Za-z-_]/g;function P(t){return t<16?"0"+t.toString(16):t.toString(16)}function U(t,e){var r;e=e||1/0;for(var n=t.length,i=null,o=[],s=0;s<n;++s){if((r=t.charCodeAt(s))>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function F(t){return n.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(k,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function q(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function B(t){return t instanceof ArrayBuffer||null!=t&&null!=t.constructor&&"ArrayBuffer"===t.constructor.name&&"number"==typeof t.byteLength}function X(t){return t!=t}},{"base64-js":28,ieee754:38}],31:[function(t,e,r){(function(t){function e(t){return Object.prototype.toString.call(t)}r.isArray=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===e(t)},r.isBoolean=function(t){return"boolean"==typeof t},r.isNull=function(t){return null===t},r.isNullOrUndefined=function(t){return null==t},r.isNumber=function(t){return"number"==typeof t},r.isString=function(t){return"string"==typeof t},r.isSymbol=function(t){return"symbol"==typeof t},r.isUndefined=function(t){return void 0===t},r.isRegExp=function(t){return"[object RegExp]"===e(t)},r.isObject=function(t){return"object"==typeof t&&null!==t},r.isDate=function(t){return"[object Date]"===e(t)},r.isError=function(t){return"[object Error]"===e(t)||t instanceof Error},r.isFunction=function(t){return"function"==typeof t},r.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},r.isBuffer=t.isBuffer}).call(this,{isBuffer:t("../../is-buffer/index.js")})},{"../../is-buffer/index.js":40}],32:[function(t,e,r){(function(t){"use strict";function r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var n=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.size=r,this.length=0,this.buf=t.alloc(r)}var n,i,o;return n=e,(i=[{key:"prepend",value:function(t){var e=this.length++;e===this.size&&this.resize();var r=this.clone();this.buf[0]=t,r.copy(this.buf,1,0,e)}},{key:"append",value:function(t){var e=this.length++;e===this.size&&this.resize(),this.buf[e]=t}},{key:"clone",value:function(){return t.from(this.buf.slice(0,this.length))}},{key:"resize",value:function(){var e=this.length;this.size=2*this.size;var r=t.alloc(this.size);this.buf.copy(r,0,0,e),this.buf=r}},{key:"toString",value:function(){return this.buf.slice(0,this.length).toString()}},{key:"toJSON",value:function(){return this.toString()}},{key:"reset",value:function(){this.length=0}}])&&r(n.prototype,i),o&&r(n,o),e}();e.exports=n}).call(this,t("buffer").Buffer)},{buffer:30}],33:[function(t,e,r){(function(r,n){"use strict";function i(t){var e="function"==typeof Map?new Map:void 0;return i=function(t){if(null===t||(r=t,-1===Function.toString.call(r).indexOf("[native code]")))return t;var r;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return o(t,arguments,y(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),g(n,t)},i(t)}function o(t,e,r){return o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,r){var n=[null];n.push.apply(n,e);var i=new(Function.bind.apply(t,n));return r&&g(i,r.prototype),i},o.apply(null,arguments)}function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function a(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t))&&"[object Arguments]"!==Object.prototype.toString.call(t))return;var r=[],n=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!e||r.length!==e);n=!0);}catch(t){i=!0,o=t}finally{try{n||null==a.return||a.return()}finally{if(i)throw o}}return r}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function u(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function c(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function l(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function f(t,e){return!e||"object"!==s(e)&&"function"!=typeof e?d(t):e}function d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(t){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},y(t)}function m(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&g(t,e)}function g(t,e){return g=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},g(t,e)}var _=t("stream").Transform,v=t("./ResizeableBuffer"),b=r.from([239,187,191]),w=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};h(this,e),t=f(this,y(e).call(this,function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?c(Object(r),!0).forEach((function(e){l(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},{readableObjectMode:!0},{},n)));var i={};for(var o in n)i[O(o)]=n[o];if(void 0===i.bom||null===i.bom||!1===i.bom)i.bom=!1;else if(!0!==i.bom)throw new E("CSV_INVALID_OPTION_BOM",["Invalid option bom:","bom must be true,","got ".concat(JSON.stringify(i.bom))]);var s=null;if(void 0===i.cast||null===i.cast||!1===i.cast||""===i.cast)i.cast=void 0;else if("function"==typeof i.cast)s=i.cast,i.cast=!0;else if(!0!==i.cast)throw new E("CSV_INVALID_OPTION_CAST",["Invalid option cast:","cast must be true or a function,","got ".concat(JSON.stringify(i.cast))]);if(void 0===i.cast_date||null===i.cast_date||!1===i.cast_date||""===i.cast_date)i.cast_date=!1;else if(!0===i.cast_date)i.cast_date=function(t){var e=Date.parse(t);return isNaN(e)?t:new Date(e)};else if("function"!=typeof i.cast_date)throw new E("CSV_INVALID_OPTION_CAST_DATE",["Invalid option cast_date:","cast_date must be true or a function,","got ".concat(JSON.stringify(i.cast_date))]);var a=null;if(!0===i.columns)a=void 0;else if("function"==typeof i.columns)a=i.columns,i.columns=!0;else if(Array.isArray(i.columns))i.columns=N(i.columns);else{if(void 0!==i.columns&&null!==i.columns&&!1!==i.columns)throw new E("CSV_INVALID_OPTION_COLUMNS",["Invalid option columns:","expect an object, a function or true,","got ".concat(JSON.stringify(i.columns))]);i.columns=!1}if(void 0===i.columns_duplicates_to_array||null===i.columns_duplicates_to_array||!1===i.columns_duplicates_to_array)i.columns_duplicates_to_array=!1;else if(!0!==i.columns_duplicates_to_array)throw new E("CSV_INVALID_OPTION_COLUMNS_DUPLICATES_TO_ARRAY",["Invalid option columns_duplicates_to_array:","expect an boolean,","got ".concat(JSON.stringify(i.columns_duplicates_to_array))]);if(void 0===i.comment||null===i.comment||!1===i.comment||""===i.comment)i.comment=null;else if("string"==typeof i.comment&&(i.comment=r.from(i.comment)),!r.isBuffer(i.comment))throw new E("CSV_INVALID_OPTION_COMMENT",["Invalid option comment:","comment must be a buffer or a string,","got ".concat(JSON.stringify(i.comment))]);var p=JSON.stringify(i.delimiter);if(Array.isArray(i.delimiter)||(i.delimiter=[i.delimiter]),0===i.delimiter.length)throw new E("CSV_INVALID_OPTION_DELIMITER",["Invalid option delimiter:","delimiter must be a non empty string or buffer or array of string|buffer,","got ".concat(p)]);if(i.delimiter=i.delimiter.map((function(t){if(null==t||!1===t)return r.from(",");if("string"==typeof t&&(t=r.from(t)),!r.isBuffer(t)||0===t.length)throw new E("CSV_INVALID_OPTION_DELIMITER",["Invalid option delimiter:","delimiter must be a non empty string or buffer or array of string|buffer,","got ".concat(p)]);return t})),void 0===i.escape||null===i.escape?i.escape=r.from('"'):"string"==typeof i.escape&&(i.escape=r.from(i.escape)),!r.isBuffer(i.escape))throw new Error("Invalid Option: escape must be a buffer or a string, got ".concat(JSON.stringify(i.escape)));if(1!==i.escape.length)throw new Error("Invalid Option Length: escape must be one character, got ".concat(i.escape.length));if(i.escape=i.escape[0],void 0===i.from||null===i.from)i.from=1;else{if("string"==typeof i.from&&/\d+/.test(i.from)&&(i.from=parseInt(i.from)),!Number.isInteger(i.from))throw new Error("Invalid Option: from must be an integer, got ".concat(JSON.stringify(i.from)));if(i.from<0)throw new Error("Invalid Option: from must be a positive integer, got ".concat(JSON.stringify(n.from)))}if(void 0===i.from_line||null===i.from_line)i.from_line=1;else{if("string"==typeof i.from_line&&/\d+/.test(i.from_line)&&(i.from_line=parseInt(i.from_line)),!Number.isInteger(i.from_line))throw new Error("Invalid Option: from_line must be an integer, got ".concat(JSON.stringify(n.from_line)));if(i.from_line<=0)throw new Error("Invalid Option: from_line must be a positive integer greater than 0, got ".concat(JSON.stringify(n.from_line)))}if(void 0===i.info||null===i.info||!1===i.info)i.info=!1;else if(!0!==i.info)throw new Error("Invalid Option: info must be true, got ".concat(JSON.stringify(i.info)));if(void 0===i.max_record_size||null===i.max_record_size||!1===i.max_record_size)i.max_record_size=0;else if(Number.isInteger(i.max_record_size)&&i.max_record_size>=0);else{if("string"!=typeof i.max_record_size||!/\d+/.test(i.max_record_size))throw new Error("Invalid Option: max_record_size must be a positive integer, got ".concat(JSON.stringify(i.max_record_size)));i.max_record_size=parseInt(i.max_record_size)}if(void 0===i.objname||null===i.objname||!1===i.objname)i.objname=void 0;else if(r.isBuffer(i.objname)){if(0===i.objname.length)throw new Error("Invalid Option: objname must be a non empty buffer");i.objname=i.objname.toString()}else{if("string"!=typeof i.objname)throw new Error("Invalid Option: objname must be a string or a buffer, got ".concat(i.objname));if(0===i.objname.length)throw new Error("Invalid Option: objname must be a non empty string")}if(void 0===i.on_record||null===i.on_record)i.on_record=void 0;else if("function"!=typeof i.on_record)throw new E("CSV_INVALID_OPTION_ON_RECORD",["Invalid option `on_record`:","expect a function,","got ".concat(JSON.stringify(i.on_record))]);if(null===i.quote||!1===i.quote||""===i.quote)i.quote=null;else{if(void 0===i.quote||!0===i.quote?i.quote=r.from('"'):"string"==typeof i.quote&&(i.quote=r.from(i.quote)),!r.isBuffer(i.quote))throw new Error("Invalid Option: quote must be a buffer or a string, got ".concat(JSON.stringify(i.quote)));if(1!==i.quote.length)throw new Error("Invalid Option Length: quote must be one character, got ".concat(i.quote.length));i.quote=i.quote[0]}if(void 0===i.raw||null===i.raw||!1===i.raw)i.raw=!1;else if(!0!==i.raw)throw new Error("Invalid Option: raw must be true, got ".concat(JSON.stringify(i.raw)));if(i.record_delimiter?Array.isArray(i.record_delimiter)||(i.record_delimiter=[i.record_delimiter]):i.record_delimiter=[],i.record_delimiter=i.record_delimiter.map((function(t){return"string"==typeof t&&(t=r.from(t)),t})),"boolean"==typeof i.relax);else{if(void 0!==i.relax&&null!==i.relax)throw new Error("Invalid Option: relax must be a boolean, got ".concat(JSON.stringify(i.relax)));i.relax=!1}if("boolean"==typeof i.relax_column_count);else{if(void 0!==i.relax_column_count&&null!==i.relax_column_count)throw new Error("Invalid Option: relax_column_count must be a boolean, got ".concat(JSON.stringify(i.relax_column_count)));i.relax_column_count=!1}if("boolean"==typeof i.relax_column_count_less);else{if(void 0!==i.relax_column_count_less&&null!==i.relax_column_count_less)throw new Error("Invalid Option: relax_column_count_less must be a boolean, got ".concat(JSON.stringify(i.relax_column_count_less)));i.relax_column_count_less=!1}if("boolean"==typeof i.relax_column_count_more);else{if(void 0!==i.relax_column_count_more&&null!==i.relax_column_count_more)throw new Error("Invalid Option: relax_column_count_more must be a boolean, got ".concat(JSON.stringify(i.relax_column_count_more)));i.relax_column_count_more=!1}if("boolean"==typeof i.skip_empty_lines);else{if(void 0!==i.skip_empty_lines&&null!==i.skip_empty_lines)throw new Error("Invalid Option: skip_empty_lines must be a boolean, got ".concat(JSON.stringify(i.skip_empty_lines)));i.skip_empty_lines=!1}if("boolean"==typeof i.skip_lines_with_empty_values);else{if(void 0!==i.skip_lines_with_empty_values&&null!==i.skip_lines_with_empty_values)throw new Error("Invalid Option: skip_lines_with_empty_values must be a boolean, got ".concat(JSON.stringify(i.skip_lines_with_empty_values)));i.skip_lines_with_empty_values=!1}if("boolean"==typeof i.skip_lines_with_error);else{if(void 0!==i.skip_lines_with_error&&null!==i.skip_lines_with_error)throw new Error("Invalid Option: skip_lines_with_error must be a boolean, got ".concat(JSON.stringify(i.skip_lines_with_error)));i.skip_lines_with_error=!1}if(void 0===i.rtrim||null===i.rtrim||!1===i.rtrim)i.rtrim=!1;else if(!0!==i.rtrim)throw new Error("Invalid Option: rtrim must be a boolean, got ".concat(JSON.stringify(i.rtrim)));if(void 0===i.ltrim||null===i.ltrim||!1===i.ltrim)i.ltrim=!1;else if(!0!==i.ltrim)throw new Error("Invalid Option: ltrim must be a boolean, got ".concat(JSON.stringify(i.ltrim)));if(void 0===i.trim||null===i.trim||!1===i.trim)i.trim=!1;else if(!0!==i.trim)throw new Error("Invalid Option: trim must be a boolean, got ".concat(JSON.stringify(i.trim)));if(!0===i.trim&&!1!==n.ltrim?i.ltrim=!0:!0!==i.ltrim&&(i.ltrim=!1),!0===i.trim&&!1!==n.rtrim?i.rtrim=!0:!0!==i.rtrim&&(i.rtrim=!1),void 0===i.to||null===i.to)i.to=-1;else{if("string"==typeof i.to&&/\d+/.test(i.to)&&(i.to=parseInt(i.to)),!Number.isInteger(i.to))throw new Error("Invalid Option: to must be an integer, got ".concat(JSON.stringify(n.to)));if(i.to<=0)throw new Error("Invalid Option: to must be a positive integer greater than 0, got ".concat(JSON.stringify(n.to)))}if(void 0===i.to_line||null===i.to_line)i.to_line=-1;else{if("string"==typeof i.to_line&&/\d+/.test(i.to_line)&&(i.to_line=parseInt(i.to_line)),!Number.isInteger(i.to_line))throw new Error("Invalid Option: to_line must be an integer, got ".concat(JSON.stringify(n.to_line)));if(i.to_line<=0)throw new Error("Invalid Option: to_line must be a positive integer greater than 0, got ".concat(JSON.stringify(n.to_line)))}return t.info={comment_lines:0,empty_lines:0,invalid_field_length:0,lines:1,records:0},t.options=i,t.state={bomSkipped:!1,castField:s,commenting:!1,enabled:1===i.from_line,escaping:!1,escapeIsQuote:i.escape===i.quote,expectedRecordLength:null===i.columns?0:i.columns.length,field:new v(20),firstLineToHeaders:a,info:Object.assign({},t.info),previousBuf:void 0,quoting:!1,stop:!1,rawBuffer:new v(100),record:[],recordHasError:!1,record_length:0,recordDelimiterMaxLength:0===i.record_delimiter.length?2:Math.max.apply(Math,u(i.record_delimiter.map((function(t){return t.length})))),trimChars:[r.from(" ")[0],r.from("\t")[0]],wasQuoting:!1,wasRowDelimiter:!1},t}var n,i,o;return m(e,t),n=e,(i=[{key:"_transform",value:function(t,e,r){if(!0!==this.state.stop){var n=this.__parse(t,!1);void 0!==n&&(this.state.stop=!0),r(n)}}},{key:"_flush",value:function(t){!0!==this.state.stop&&t(this.__parse(void 0,!0))}},{key:"__parse",value:function(t,e){var n,i=this.options,o=i.bom,s=i.comment,a=i.escape,u=i.from_line,c=i.info,l=i.ltrim,h=i.max_record_size,p=i.quote,f=i.raw,d=i.relax,y=i.rtrim,m=i.skip_empty_lines,g=i.to,_=i.to_line,v=this.options.record_delimiter,w=this.state,T=w.bomSkipped,O=w.previousBuf,S=w.rawBuffer,x=w.escapeIsQuote;if(void 0===O){if(void 0===t)return void this.push(null);n=t}else n=void 0!==O&&void 0===t?O:r.concat([O,t]);if(!1===T)if(!1===o)this.state.bomSkipped=!0;else if(n.length<3){if(!1===e)return void(this.state.previousBuf=n)}else 0===b.compare(n,0,3)&&(n=n.slice(3)),this.state.bomSkipped=!0;var N,I=n.length;for(N=0;N<I&&!this.__needMoreData(N,I,e);N++){if(!0===this.state.wasRowDelimiter&&(this.info.lines++,!0===c&&0===this.state.record.length&&0===this.state.field.length&&!1===this.state.wasQuoting&&(this.state.info=Object.assign({},this.info)),this.state.wasRowDelimiter=!1),-1!==_&&this.info.lines>_)return this.state.stop=!0,void this.push(null);!1===this.state.quoting&&0===v.length&&this.__autoDiscoverRowDelimiter(n,N)&&(v=this.options.record_delimiter);var D=n[N];if(!0===f&&S.append(D),13!==D&&10!==D||!1!==this.state.wasRowDelimiter||(this.state.wasRowDelimiter=!0),!0===this.state.escaping)this.state.escaping=!1;else{if(!0===this.state.quoting&&D===a&&N+1<I){if(!x){this.state.escaping=!0;continue}if(n[N+1]===p){this.state.escaping=!0;continue}}if(!1===this.state.commenting&&D===p)if(!0===this.state.quoting){var C=n[N+1],A=y&&this.__isCharTrimable(C),L=null!==s&&this.__compareBytes(s,n,N+1,C),j=this.__isDelimiter(C,n,N+1),M=0===v.length?this.__autoDiscoverRowDelimiter(n,N+1):this.__isRecordDelimiter(C,n,N+1);if(D===a&&C===p)N++;else{if(!C||j||M||L||A){this.state.quoting=!1,this.state.wasQuoting=!0;continue}if(!1===d){var R=this.__error(new E("CSV_INVALID_CLOSING_QUOTE",["Invalid Closing Quote:",'got "'.concat(String.fromCharCode(C),'"'),"at line ".concat(this.info.lines),"instead of delimiter, row delimiter, trimable character","(if activated) or comment"],this.__context()));if(void 0!==R)return R}else this.state.quoting=!1,this.state.wasQuoting=!0,this.state.field.prepend(p)}}else{if(0===this.state.field.length){this.state.quoting=!0;continue}if(!1===d){var k=this.__error(new E("INVALID_OPENING_QUOTE",["Invalid Opening Quote:","a quote is found inside a field at line ".concat(this.info.lines)],this.__context(),{field:this.state.field}));if(void 0!==k)return k}}if(!1===this.state.quoting){var P=this.__isRecordDelimiter(D,n,N);if(0!==P){if(this.state.commenting&&!1===this.state.wasQuoting&&0===this.state.record.length&&0===this.state.field.length)this.info.comment_lines++;else{if(!0===m&&!1===this.state.wasQuoting&&0===this.state.record.length&&0===this.state.field.length){this.info.empty_lines++,N+=P-1;continue}if(!1===this.state.enabled&&this.info.lines+(!0===this.state.wasRowDelimiter?1:0)>=u){this.state.enabled=!0,this.__resetField(),this.__resetRow(),N+=P-1;continue}var U=this.__onField();if(void 0!==U)return U;var F=this.__onRow();if(void 0!==F)return F;if(-1!==g&&this.info.records>=g)return this.state.stop=!0,void this.push(null)}this.state.commenting=!1,N+=P-1;continue}if(this.state.commenting)continue;if(0!==(null===s?0:this.__compareBytes(s,n,N,D))){this.state.commenting=!0;continue}var q=this.__isDelimiter(D,n,N);if(0!==q){var B=this.__onField();if(void 0!==B)return B;N+=q-1;continue}}}if(!1===this.state.commenting&&0!==h&&this.state.record_length+this.state.field.length>h){var X=this.__error(new E("CSV_MAX_RECORD_SIZE",["Max Record Size:","record exceed the maximum number of tolerated bytes","of ".concat(h),"at line ".concat(this.info.lines)],this.__context()));if(void 0!==X)return X}var V=!1===l||!0===this.state.quoting||0!==this.state.field.length||!this.__isCharTrimable(D),z=!1===y||!1===this.state.wasQuoting;if(!0===V&&!0===z)this.state.field.append(D);else if(!0===y&&!this.__isCharTrimable(D)){var W=this.__error(new E("CSV_NON_TRIMABLE_CHAR_AFTER_CLOSING_QUOTE",["Invalid Closing Quote:","found non trimable byte after quote","at line ".concat(this.info.lines)],this.__context()));if(void 0!==W)return W}}if(!0===e)if(!0===this.state.quoting){var H=this.__error(new E("CSV_QUOTE_NOT_CLOSED",["Quote Not Closed:","the parsing is finished with an opening quote at line ".concat(this.info.lines)],this.__context()));if(void 0!==H)return H}else if(!0===this.state.wasQuoting||0!==this.state.record.length||0!==this.state.field.length){var G=this.__onField();if(void 0!==G)return G;var Q=this.__onRow();if(void 0!==Q)return Q}else!0===this.state.wasRowDelimiter?this.info.empty_lines++:!0===this.state.commenting&&this.info.comment_lines++;else this.state.previousBuf=n.slice(N);!0===this.state.wasRowDelimiter&&(this.info.lines++,this.state.wasRowDelimiter=!1)}},{key:"__isCharTrimable",value:function(t){return 32===t||9===t||13===t||10===t||12===t}},{key:"__onRow",value:function(){var t=this.options,e=t.columns,r=t.columns_duplicates_to_array,n=t.info,i=t.from,o=t.relax_column_count,s=t.relax_column_count_less,a=t.relax_column_count_more,u=t.raw,c=t.skip_lines_with_empty_values,l=this.state,h=l.enabled,p=l.record;if(!1===h)return this.__resetRow();var f=p.length;if(!0===e)return x(p)?void this.__resetRow():this.__firstLineToColumns(p);if(!1===e&&0===this.info.records&&(this.state.expectedRecordLength=f),f!==this.state.expectedRecordLength)if(!0===o||!0===s&&f<this.state.expectedRecordLength||!0===a&&f>this.state.expectedRecordLength)this.info.invalid_field_length++;else if(!1===e){var d=this.__error(new E("CSV_INCONSISTENT_RECORD_LENGTH",["Invalid Record Length:","expect ".concat(this.state.expectedRecordLength,","),"got ".concat(f," on line ").concat(this.info.lines)],this.__context(),{record:p}));if(void 0!==d)return d}else{var y=this.__error(new E("CSV_RECORD_DONT_MATCH_COLUMNS_LENGTH",["Invalid Record Length:","columns length is ".concat(e.length,","),"got ".concat(f," on line ").concat(this.info.lines)],this.__context(),{record:p}));if(void 0!==y)return y}if(!0===c&&x(p))this.__resetRow();else{if(!0===this.state.recordHasError)return this.__resetRow(),void(this.state.recordHasError=!1);if(this.info.records++,1===i||this.info.records>=i)if(!1!==e){for(var m={},g=0,_=p.length;g<_;g++)void 0===e[g]||e[g].disabled||(!0===r&&m[e[g].name]?Array.isArray(m[e[g].name])?m[e[g].name]=m[e[g].name].concat(p[g]):m[e[g].name]=[m[e[g].name],p[g]]:m[e[g].name]=p[g]);var v=this.options.objname;if(void 0===v)if(!0===u||!0===n){var b=this.__push(Object.assign({record:m},!0===u?{raw:this.state.rawBuffer.toString()}:{},!0===n?{info:this.state.info}:{}));if(b)return b}else{var w=this.__push(m);if(w)return w}else if(!0===u||!0===n){var T=this.__push(Object.assign({record:[m[v],m]},!0===u?{raw:this.state.rawBuffer.toString()}:{},!0===n?{info:this.state.info}:{}));if(T)return T}else{var O=this.__push([m[v],m]);if(O)return O}}else if(!0===u||!0===n){var S=this.__push(Object.assign({record:p},!0===u?{raw:this.state.rawBuffer.toString()}:{},!0===n?{info:this.state.info}:{}));if(S)return S}else{var N=this.__push(p);if(N)return N}this.__resetRow()}}},{key:"__firstLineToColumns",value:function(t){var e=this.state.firstLineToHeaders;try{var r=void 0===e?t:e.call(null,t);if(!Array.isArray(r))return this.__error(new E("CSV_INVALID_COLUMN_MAPPING",["Invalid Column Mapping:","expect an array from column function,","got ".concat(JSON.stringify(r))],this.__context(),{headers:r}));var n=N(r);return this.state.expectedRecordLength=n.length,this.options.columns=n,void this.__resetRow()}catch(t){return t}}},{key:"__resetRow",value:function(){!0===this.options.raw&&this.state.rawBuffer.reset(),this.state.record=[],this.state.record_length=0}},{key:"__onField",value:function(){var t=this.options,e=t.cast,r=t.rtrim,n=t.max_record_size,i=this.state,o=i.enabled,s=i.wasQuoting;if(!1===o)return this.__resetField();var u=this.state.field.toString();if(!0===r&&!1===s&&(u=u.trimRight()),!0===e){var c=a(this.__cast(u),2),l=c[0],h=c[1];if(void 0!==l)return l;u=h}this.state.record.push(u),0!==n&&"string"==typeof u&&(this.state.record_length+=u.length),this.__resetField()}},{key:"__resetField",value:function(){this.state.field.reset(),this.state.wasQuoting=!1}},{key:"__push",value:function(t){var e=this.options.on_record;if(void 0!==e){var r=this.__context();try{t=e.call(null,t,r)}catch(t){return t}if(null==t)return}this.push(t)}},{key:"__cast",value:function(t){var e=this.options,r=e.columns,n=e.relax_column_count;if(!0===Array.isArray(r)&&n&&this.options.columns.length<=this.state.record.length)return[void 0,void 0];var i=this.__context();if(null!==this.state.castField)try{return[void 0,this.state.castField.call(null,t,i)]}catch(t){return[t]}return this.__isFloat(t)?[void 0,parseFloat(t)]:!1!==this.options.cast_date?[void 0,this.options.cast_date.call(null,t,i)]:[void 0,t]}},{key:"__isFloat",value:function(t){return t-parseFloat(t)+1>=0}},{key:"__compareBytes",value:function(t,e,r,n){if(t[0]!==n)return 0;for(var i=t.length,o=1;o<i;o++)if(t[o]!==e[r+o])return 0;return i}},{key:"__needMoreData",value:function(t,e,r){if(r)return!1;var n=this.options,i=n.comment,o=n.delimiter,s=this.state,a=s.quoting,u=s.recordDelimiterMaxLength;return e-t-1<Math.max(i?i.length:0,u,a?1+u:0,o.length,1)}},{key:"__isDelimiter",value:function(t,e,r){var n=this.options.delimiter;t:for(var i=0;i<n.length;i++){var o=n[i];if(o[0]===t){for(var s=1;s<o.length;s++)if(o[s]!==e[r+s])continue t;return o.length}}return 0}},{key:"__isRecordDelimiter",value:function(t,e,r){var n=this.options.record_delimiter,i=n.length;t:for(var o=0;o<i;o++){var s=n[o],a=s.length;if(s[0]===t){for(var u=1;u<a;u++)if(s[u]!==e[r+u])continue t;return s.length}}return 0}},{key:"__autoDiscoverRowDelimiter",value:function(t,e){var n=t[e];return 13===n?10===t[e+1]?(this.options.record_delimiter.push(r.from("\r\n")),this.state.recordDelimiterMaxLength=2,2):(this.options.record_delimiter.push(r.from("\r")),this.state.recordDelimiterMaxLength=1,1):10===n?(this.options.record_delimiter.push(r.from("\n")),this.state.recordDelimiterMaxLength=1,1):0}},{key:"__error",value:function(t){var e=this.options.skip_lines_with_error,r="string"==typeof t?new Error(t):t;return e?(this.state.recordHasError=!0,void this.emit("skip",r)):r}},{key:"__context",value:function(){var t=this.options.columns;return{column:!0===Array.isArray(t)?t.length>this.state.record.length?t[this.state.record.length].name:null:this.state.record.length,empty_lines:this.info.empty_lines,header:!0===t,index:this.state.record.length,invalid_field_length:this.info.invalid_field_length,quoting:this.state.wasQuoting,lines:this.info.lines,records:this.info.records}}}])&&p(n.prototype,i),o&&p(n,o),e}(_),T=function(){var t,e,i;for(var o in arguments){var a=arguments[o],u=s(a);if(void 0!==t||"string"!=typeof a&&!r.isBuffer(a))if(void 0===e&&S(a))e=a;else{if(void 0!==i||"function"!==u)throw new E("CSV_INVALID_ARGUMENT",["Invalid argument:","got ".concat(JSON.stringify(a)," at index ").concat(o)]);i=a}else t=a}var c=new w(e);if(i){var l=void 0===e||void 0===e.objname?[]:{};c.on("readable",(function(){for(var t;null!==(t=this.read());)void 0===e||void 0===e.objname?l.push(t):l[t[0]]=t[1]})),c.on("error",(function(t){i(t,void 0,c.info)})),c.on("end",(function(){i(void 0,l,c.info)}))}return void 0!==t&&("function"==typeof n?n((function(){c.write(t),c.end()})):(c.write(t),c.end())),c},E=function(t){function e(t,n){var i;h(this,e),Array.isArray(n)&&(n=n.join(" ")),i=f(this,y(e).call(this,n)),void 0!==Error.captureStackTrace&&Error.captureStackTrace(d(i),e),i.code=t;for(var o=arguments.length,s=new Array(o>2?o-2:0),a=2;a<o;a++)s[a-2]=arguments[a];for(var u=0,c=s;u<c.length;u++){var l=c[u];for(var p in l){var m=l[p];i[p]=r.isBuffer(m)?m.toString():null==m?m:JSON.parse(JSON.stringify(m))}}return i}return m(e,t),e}(i(Error));T.Parser=w,T.CsvError=E,e.exports=T;var O=function(t){return t.replace(/([A-Z])/g,(function(t,e){return"_"+e.toLowerCase()}))},S=function(t){return"object"===s(t)&&null!==t&&!Array.isArray(t)},x=function(t){return t.every((function(t){return null==t||t.toString&&""===t.toString().trim()}))},N=function(t){for(var e=[],r=0,n=t.length;r<n;r++){var i=t[r];if(null==i||!1===i)e[r]={disabled:!0};else if("string"==typeof i)e[r]={name:i};else{if(!S(i))throw new E("CSV_INVALID_COLUMN_DEFINITION",["Invalid column definition:","expect a string or a literal object,","got ".concat(JSON.stringify(i)," at position ").concat(r)]);if("string"!=typeof i.name)throw new E("CSV_OPTION_COLUMNS_MISSING_NAME",["Option columns missing name:",'property "name" is required at position '.concat(r),"when column is an object literal"]);e[r]=i}}return e}}).call(this,t("buffer").Buffer,t("timers").setImmediate)},{"./ResizeableBuffer":32,buffer:30,stream:67,timers:69}],34:[function(t,e,r){(function(r){"use strict";var n=t(".");e.exports=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"string"==typeof t&&(t=r.from(t));var i=e&&e.objname?{}:[],o=new n.Parser(e);o.push=function(t){null!==t&&(void 0===e.objname?i.push(t):i[t[0]]=t[1])};var s=o.__parse(t,!1);if(void 0!==s)throw s;var a=o.__parse(void 0,!0);if(void 0!==a)throw a;return i}}).call(this,t("buffer").Buffer)},{".":33,buffer:30}],35:[function(t,e,r){(function(r){var n,i,o,s;o=t("stream"),s=t("util"),i=t("lodash.get"),e.exports=function(){var t,e,i,o,s;return 3===arguments.length?(i=arguments[0],o=arguments[1],t=arguments[2]):2===arguments.length?(Array.isArray(arguments[0])?i=arguments[0]:o=arguments[0],"function"==typeof arguments[1]?t=arguments[1]:o=arguments[1]):1===arguments.length&&("function"==typeof arguments[0]?t=arguments[0]:Array.isArray(arguments[0])?i=arguments[0]:o=arguments[0]),null==o&&(o={}),s=new n(o),i&&r.nextTick((function(){var t,e,r;for(e=0,r=i.length;e<r;e++)t=i[e],s.write(t);return s.end()})),t&&(e=[],s.on("readable",(function(){var t,r;for(r=[];t=s.read();)r.push(e.push(t));return r})),s.on("error",(function(e){return t(e)})),s.on("end",(function(){return t(null,e.join(""))}))),s},n=function(t){var e,r,n,i,s,a,u,c,l,h,p,f,d,y,m,g,_;for(m in null==t&&(t={}),g={},t)_=t[m],g[m]=_;switch(o.Transform.call(this,g),this.options=g,null==(e=this.options).delimiter&&(e.delimiter=","),null==(r=this.options).quote&&(r.quote='"'),null==(u=this.options).quoted&&(u.quoted=!1),null==(c=this.options).quotedEmpty&&(c.quotedEmpty=void 0),null==(l=this.options).quotedString&&(l.quotedString=!1),null==(h=this.options).eof&&(h.eof=!0),null==(p=this.options).escape&&(p.escape='"'),null==(f=this.options).columns&&(f.columns=null),null==(d=this.options).header&&(d.header=!1),null==(y=this.options).formatters&&(y.formatters={}),null==(n=this.options.formatters).date&&(n.date=function(t){return""+t.getTime()}),null==(i=this.options.formatters).bool&&(i.bool=function(t){return t?"1":""}),null==(s=this.options.formatters).object&&(s.object=function(t){return JSON.stringify(t)}),null==(a=this.options).rowDelimiter&&(a.rowDelimiter="\n"),null==this.countWriten&&(this.countWriten=0),this.options.rowDelimiter){case"auto":this.options.rowDelimiter=null;break;case"unix":this.options.rowDelimiter="\n";break;case"mac":this.options.rowDelimiter="\r";break;case"windows":this.options.rowDelimiter="\r\n";break;case"unicode":this.options.rowDelimiter="\u2028"}return this},s.inherits(n,o.Transform),e.exports.Stringifier=n,n.prototype.headers=function(){var t,e,r;if(this.options.header&&this.options.columns)return"object"==typeof(r=this.options.columns)&&(r=function(){var n;for(t in n=[],r)e=r[t],n.push(e);return n}()),r=this.options.eof?this.stringify(r)+this.options.rowDelimiter:this.stringify(r),o.Transform.prototype.write.call(this,r)},n.prototype.end=function(t,e,r){return 0===this.countWriten&&this.headers(),o.Transform.prototype.end.apply(this,arguments)},n.prototype.write=function(t,e,r){var n,i,s;if(null!=t){if(!(s="object"!=typeof t)){0!==this.countWriten||Array.isArray(t)||null==(n=this.options).columns&&(n.columns=Object.keys(t));try{this.emit("record",t,this.countWriten)}catch(t){return i=t,this.emit("error",i)}this.options.eof?t=this.stringify(t)+this.options.rowDelimiter:(t=this.stringify(t),(this.options.header||this.countWriten)&&(t=this.options.rowDelimiter+t))}return"number"==typeof t&&(t=""+t),0===this.countWriten&&this.headers(),s||this.countWriten++,o.Transform.prototype.write.call(this,t,e,r)}},n.prototype._transform=function(t,e,r){return this.push(t),r()},n.prototype.stringify=function(t){var e,r,n,o,s,a,u,c,l,h,p,f,d,y,m,g,_,v,b,w;if("object"!=typeof t)return t;if("object"!=typeof(n=this.options.columns)||null===n||Array.isArray(n)||(n=Object.keys(n)),c=this.options.delimiter,m=this.options.quote,l=this.options.escape,Array.isArray(t))n&&t.splice(n.length);else{if(e=[],n)for(p=f=0,g=n.length;0<=g?f<g:f>g;p=0<=g?++f:--f)r=n[p],w=i(t,r),e[p]=null==w?"":w;else for(r in t)e.push(t[r]);t=e,e=null}if(Array.isArray(t)){for(y="",p=d=0,_=t.length;0<=_?d<_:d>_;p=0<=_?++d:--d)"string"==typeof(h=t[p])||("number"==typeof h?h=""+h:"boolean"==typeof h?h=this.options.formatters.bool(h):h instanceof Date?h=this.options.formatters.date(h):"object"==typeof h&&null!==h&&(h=this.options.formatters.object(h))),h?(u=h.indexOf(c)>=0,a=h.indexOf(m)>=0,o=h.indexOf(l)>=0&&l!==m,s=h.indexOf("\r")>=0||h.indexOf("\n")>=0,(b=a||u||s||this.options.quoted||this.options.quotedString&&"string"==typeof t[p])&&o&&(v="\\"===l?new RegExp(l+l,"g"):new RegExp(l,"g"),h=h.replace(v,l+l)),a&&(v=new RegExp(m,"g"),h=h.replace(v,l+m)),b&&(h=m+h+m),y+=h):(this.options.quotedEmpty||null==this.options.quotedEmpty&&""===t[p]&&this.options.quotedString)&&(y+=m+m),p!==t.length-1&&(y+=c);t=y}return t}}).call(this,t("_process"))},{_process:46,"lodash.get":42,stream:67,util:72}],36:[function(t,e,r){(function(r){var n,i;n=t("string_decoder").StringDecoder,i=t("./index"),e.exports=function(t,e){var o,s,a,u,c;for(null==e&&(e={}),o=[],t instanceof r&&(t=(new n).write(t)),(c=new i.Stringifier(e)).push=function(t){if(t)return o.push(t.toString())},s=0,a=t.length;s<a;s++)u=t[s],c.write(u);return c.end(),o.join("")}}).call(this,t("buffer").Buffer)},{"./index":35,buffer:30,string_decoder:68}],37:[function(t,e,r){var n=Object.create||function(t){var e=function(){};return e.prototype=t,new e},i=Object.keys||function(t){var e=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.push(r);return r},o=Function.prototype.bind||function(t){var e=this;return function(){return e.apply(t,arguments)}};function s(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=n(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}e.exports=s,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._maxListeners=void 0;var a,u=10;try{var c={};Object.defineProperty&&Object.defineProperty(c,"x",{value:0}),a=0===c.x}catch(t){a=!1}function l(t){return void 0===t._maxListeners?s.defaultMaxListeners:t._maxListeners}function h(t,e,r,i){var o,s,a;if("function"!=typeof r)throw new TypeError('"listener" argument must be a function');if((s=t._events)?(s.newListener&&(t.emit("newListener",e,r.listener?r.listener:r),s=t._events),a=s[e]):(s=t._events=n(null),t._eventsCount=0),a){if("function"==typeof a?a=s[e]=i?[r,a]:[a,r]:i?a.unshift(r):a.push(r),!a.warned&&(o=l(t))&&o>0&&a.length>o){a.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+a.length+' "'+String(e)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');u.name="MaxListenersExceededWarning",u.emitter=t,u.type=e,u.count=a.length,"object"==typeof console&&console.warn&&console.warn("%s: %s",u.name,u.message)}}else a=s[e]=r,++t._eventsCount;return t}function p(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var t=new Array(arguments.length),e=0;e<t.length;++e)t[e]=arguments[e];this.listener.apply(this.target,t)}}function f(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=o.call(p,n);return i.listener=r,n.wrapFn=i,i}function d(t,e,r){var n=t._events;if(!n)return[];var i=n[e];return i?"function"==typeof i?r?[i.listener||i]:[i]:r?function(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}(i):m(i,i.length):[]}function y(t){var e=this._events;if(e){var r=e[t];if("function"==typeof r)return 1;if(r)return r.length}return 0}function m(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}a?Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(t){if("number"!=typeof t||t<0||t!=t)throw new TypeError('"defaultMaxListeners" must be a positive number');u=t}}):s.defaultMaxListeners=u,s.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=t,this},s.prototype.getMaxListeners=function(){return l(this)},s.prototype.emit=function(t){var e,r,n,i,o,s,a="error"===t;if(s=this._events)a=a&&null==s.error;else if(!a)return!1;if(a){if(arguments.length>1&&(e=arguments[1]),e instanceof Error)throw e;var u=new Error('Unhandled "error" event. ('+e+")");throw u.context=e,u}if(!(r=s[t]))return!1;var c="function"==typeof r;switch(n=arguments.length){case 1:!function(t,e,r){if(e)t.call(r);else for(var n=t.length,i=m(t,n),o=0;o<n;++o)i[o].call(r)}(r,c,this);break;case 2:!function(t,e,r,n){if(e)t.call(r,n);else for(var i=t.length,o=m(t,i),s=0;s<i;++s)o[s].call(r,n)}(r,c,this,arguments[1]);break;case 3:!function(t,e,r,n,i){if(e)t.call(r,n,i);else for(var o=t.length,s=m(t,o),a=0;a<o;++a)s[a].call(r,n,i)}(r,c,this,arguments[1],arguments[2]);break;case 4:!function(t,e,r,n,i,o){if(e)t.call(r,n,i,o);else for(var s=t.length,a=m(t,s),u=0;u<s;++u)a[u].call(r,n,i,o)}(r,c,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(n-1),o=1;o<n;o++)i[o-1]=arguments[o];!function(t,e,r,n){if(e)t.apply(r,n);else for(var i=t.length,o=m(t,i),s=0;s<i;++s)o[s].apply(r,n)}(r,c,this,i)}return!0},s.prototype.addListener=function(t,e){return h(this,t,e,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(t,e){return h(this,t,e,!0)},s.prototype.once=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.on(t,f(this,t,e)),this},s.prototype.prependOnceListener=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.prependListener(t,f(this,t,e)),this},s.prototype.removeListener=function(t,e){var r,i,o,s,a;if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');if(!(i=this._events))return this;if(!(r=i[t]))return this;if(r===e||r.listener===e)0==--this._eventsCount?this._events=n(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,r.listener||e));else if("function"!=typeof r){for(o=-1,s=r.length-1;s>=0;s--)if(r[s]===e||r[s].listener===e){a=r[s].listener,o=s;break}if(o<0)return this;0===o?r.shift():function(t,e){for(var r=e,n=r+1,i=t.length;n<i;r+=1,n+=1)t[r]=t[n];t.pop()}(r,o),1===r.length&&(i[t]=r[0]),i.removeListener&&this.emit("removeListener",t,a||e)}return this},s.prototype.removeAllListeners=function(t){var e,r,o;if(!(r=this._events))return this;if(!r.removeListener)return 0===arguments.length?(this._events=n(null),this._eventsCount=0):r[t]&&(0==--this._eventsCount?this._events=n(null):delete r[t]),this;if(0===arguments.length){var s,a=i(r);for(o=0;o<a.length;++o)"removeListener"!==(s=a[o])&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=n(null),this._eventsCount=0,this}if("function"==typeof(e=r[t]))this.removeListener(t,e);else if(e)for(o=e.length-1;o>=0;o--)this.removeListener(t,e[o]);return this},s.prototype.listeners=function(t){return d(this,t,!0)},s.prototype.rawListeners=function(t){return d(this,t,!1)},s.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):y.call(t,e)},s.prototype.listenerCount=y,s.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]}},{}],38:[function(t,e,r){r.read=function(t,e,r,n,i){var o,s,a=8*i-n-1,u=(1<<a)-1,c=u>>1,l=-7,h=r?i-1:0,p=r?-1:1,f=t[e+h];for(h+=p,o=f&(1<<-l)-1,f>>=-l,l+=a;l>0;o=256*o+t[e+h],h+=p,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=n;l>0;s=256*s+t[e+h],h+=p,l-=8);if(0===o)o=1-c;else{if(o===u)return s?NaN:1/0*(f?-1:1);s+=Math.pow(2,n),o-=c}return(f?-1:1)*s*Math.pow(2,o-n)},r.write=function(t,e,r,n,i,o){var s,a,u,c=8*o-i-1,l=(1<<c)-1,h=l>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:o-1,d=n?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=l):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),(e+=s+h>=1?p/u:p*Math.pow(2,1-h))*u>=2&&(s++,u/=2),s+h>=l?(a=0,s=l):s+h>=1?(a=(e*u-1)*Math.pow(2,i),s+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;t[r+f]=255&a,f+=d,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;t[r+f]=255&s,f+=d,s/=256,c-=8);t[r+f-d]|=128*y}},{}],39:[function(t,e,r){"function"==typeof Object.create?e.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}},{}],40:[function(t,e,r){function n(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
e.exports=function(t){return null!=t&&(n(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&n(t.slice(0,0))}(t)||!!t._isBuffer)}},{}],41:[function(t,e,r){var n={}.toString;e.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},{}],42:[function(t,e,r){(function(t){var r="__lodash_hash_undefined__",n=1/0,i="[object Function]",o="[object GeneratorFunction]",s="[object Symbol]",a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,u=/^\w*$/,c=/^\./,l=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,h=/\\(\\)?/g,p=/^\[object .+?Constructor\]$/,f="object"==typeof t&&t&&t.Object===Object&&t,d="object"==typeof self&&self&&self.Object===Object&&self,y=f||d||Function("return this")();var m,g=Array.prototype,_=Function.prototype,v=Object.prototype,b=y["__core-js_shared__"],w=(m=/[^.]+$/.exec(b&&b.keys&&b.keys.IE_PROTO||""))?"Symbol(src)_1."+m:"",T=_.toString,E=v.hasOwnProperty,O=v.toString,S=RegExp("^"+T.call(E).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),x=y.Symbol,N=g.splice,I=F(y,"Map"),D=F(Object,"create"),C=x?x.prototype:void 0,A=C?C.toString:void 0;function L(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function j(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function M(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function R(t,e){for(var r,n,i=t.length;i--;)if((r=t[i][0])===(n=e)||r!=r&&n!=n)return i;return-1}function k(t,e){var r;e=function(t,e){if(V(t))return!1;var r=typeof t;if("number"==r||"symbol"==r||"boolean"==r||null==t||W(t))return!0;return u.test(t)||!a.test(t)||null!=e&&t in Object(e)}(e,t)?[e]:V(r=e)?r:q(r);for(var n=0,i=e.length;null!=t&&n<i;)t=t[B(e[n++])];return n&&n==i?t:void 0}function P(t){if(!z(t)||(e=t,w&&w in e))return!1;var e,r=function(t){var e=z(t)?O.call(t):"";return e==i||e==o}(t)||function(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}(t)?S:p;return r.test(function(t){if(null!=t){try{return T.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(t))}function U(t,e){var r,n,i=t.__data__;return("string"==(n=typeof(r=e))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?i["string"==typeof e?"string":"hash"]:i.map}function F(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return P(r)?r:void 0}L.prototype.clear=function(){this.__data__=D?D(null):{}},L.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},L.prototype.get=function(t){var e=this.__data__;if(D){var n=e[t];return n===r?void 0:n}return E.call(e,t)?e[t]:void 0},L.prototype.has=function(t){var e=this.__data__;return D?void 0!==e[t]:E.call(e,t)},L.prototype.set=function(t,e){return this.__data__[t]=D&&void 0===e?r:e,this},j.prototype.clear=function(){this.__data__=[]},j.prototype.delete=function(t){var e=this.__data__,r=R(e,t);return!(r<0)&&(r==e.length-1?e.pop():N.call(e,r,1),!0)},j.prototype.get=function(t){var e=this.__data__,r=R(e,t);return r<0?void 0:e[r][1]},j.prototype.has=function(t){return R(this.__data__,t)>-1},j.prototype.set=function(t,e){var r=this.__data__,n=R(r,t);return n<0?r.push([t,e]):r[n][1]=e,this},M.prototype.clear=function(){this.__data__={hash:new L,map:new(I||j),string:new L}},M.prototype.delete=function(t){return U(this,t).delete(t)},M.prototype.get=function(t){return U(this,t).get(t)},M.prototype.has=function(t){return U(this,t).has(t)},M.prototype.set=function(t,e){return U(this,t).set(t,e),this};var q=X((function(t){var e;t=null==(e=t)?"":function(t){if("string"==typeof t)return t;if(W(t))return A?A.call(t):"";var e=t+"";return"0"==e&&1/t==-n?"-0":e}(e);var r=[];return c.test(t)&&r.push(""),t.replace(l,(function(t,e,n,i){r.push(n?i.replace(h,"$1"):e||t)})),r}));function B(t){if("string"==typeof t||W(t))return t;var e=t+"";return"0"==e&&1/t==-n?"-0":e}function X(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new TypeError("Expected a function");var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var s=t.apply(this,n);return r.cache=o.set(i,s),s};return r.cache=new(X.Cache||M),r}X.Cache=M;var V=Array.isArray;function z(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function W(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&O.call(t)==s}e.exports=function(t,e,r){var n=null==t?void 0:k(t,e);return void 0===n?r:n}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],43:[function(t,e,r){(function(t){(function(){var n,i="Expected a function",o=1,s=2,a=9007199254740991,u="[object Arguments]",c="[object Array]",l="[object AsyncFunction]",h="[object Boolean]",p="[object Date]",f="[object Error]",d="[object Function]",y="[object GeneratorFunction]",m="[object Number]",g="[object Object]",_="[object Proxy]",v="[object RegExp]",b="[object String]",w=/[&<>"']/g,T=RegExp(w.source),E=/^(?:0|[1-9]\d*)$/,O="object"==typeof t&&t&&t.Object===Object&&t,S="object"==typeof self&&self&&self.Object===Object&&self,x=O||S||Function("return this")(),N="object"==typeof r&&r&&!r.nodeType&&r,I=N&&"object"==typeof e&&e&&!e.nodeType&&e;function D(t,e){return t.push.apply(t,e),t}function C(t){return function(e){return null==e?n:e[t]}}var A,L=(A={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},function(t){return null==A?n:A[t]});var j,M,R=Array.prototype,k=Object.prototype,P=k.hasOwnProperty,U=0,F=k.toString,q=x._,B=Object.create,X=k.propertyIsEnumerable,V=x.isFinite,z=(j=Object.keys,M=Object,function(t){return j(M(t))}),W=Math.max;function H(t){return t instanceof Q?t:new Q(t)}var G=function(){function t(){}return function(e){if(!Wt(e))return{};if(B)return B(e);t.prototype=e;var r=new t;return t.prototype=n,r}}();function Q(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e}function Y(t,e,r){var i=t[e];P.call(t,e)&&Ft(i,r)&&(r!==n||e in t)||$(t,e,r)}function $(t,e,r){t[e]=r}function J(t,e,r){if("function"!=typeof t)throw new TypeError(i);return setTimeout((function(){t.apply(n,r)}),e)}Q.prototype=G(H.prototype),Q.prototype.constructor=Q;var K,Z,tt=(K=ot,function(t,e){if(null==t)return t;if(!Xt(t))return K(t,e);for(var r=t.length,n=Z?r:-1,i=Object(t);(Z?n--:++n<r)&&!1!==e(i[n],n,i););return t});function et(t,e,r){for(var i=-1,o=t.length;++i<o;){var s=t[i],a=e(s);if(null!=a&&(u===n?a==a:r(a,u)))var u=a,c=s}return c}function rt(t,e){var r=[];return tt(t,(function(t,n,i){e(t,n,i)&&r.push(t)})),r}function nt(t,e,r,n,i){var o=-1,s=t.length;for(r||(r=Tt),i||(i=[]);++o<s;){var a=t[o];e>0&&r(a)?e>1?nt(a,e-1,r,n,i):D(i,a):n||(i[i.length]=a)}return i}var it=function(t){return function(e,r,n){for(var i=-1,o=Object(e),s=n(e),a=s.length;a--;){var u=s[t?a:++i];if(!1===r(o[u],u,o))break}return e}}();function ot(t,e){return t&&it(t,e,re)}function st(t,e){return rt(e,(function(e){return zt(t[e])}))}function at(t){return function(t){return F.call(t)}(t)}function ut(t,e){return t>e}var ct=le;function lt(t,e,r,i,a){return t===e||(null==t||null==e||!Ht(t)&&!Ht(e)?t!=t&&e!=e:function(t,e,r,i,a,l){var d=Bt(t),y=Bt(e),_=d?c:at(t),w=y?c:at(e),T=(_=_==u?g:_)==g,E=(w=w==u?g:w)==g,O=_==w;l||(l=[]);var S=Lt(l,(function(e){return e[0]==t})),x=Lt(l,(function(t){return t[0]==e}));if(S&&x)return S[1]==e;if(l.push([t,e]),l.push([e,t]),O&&!T){var N=d?function(t,e,r,i,a,u){var c=r&o,l=t.length,h=e.length;if(l!=h&&!(c&&h>l))return!1;var p=-1,f=!0,d=r&s?[]:n;for(;++p<l;){var y,m=t[p],g=e[p];if(y!==n){if(y)continue;f=!1;break}if(d){if(!_t(e,(function(t,e){if(!Dt(d,e)&&(m===t||a(m,t,r,i,u)))return d.push(e)}))){f=!1;break}}else if(m!==g&&!a(m,g,r,i,u)){f=!1;break}}return f}(t,e,r,i,a,l):function(t,e,r,n,i,o,s){switch(r){case h:case p:case m:return Ft(+t,+e);case f:return t.name==e.name&&t.message==e.message;case v:case b:return t==e+""}return!1}(t,e,_);return l.pop(),N}if(!(r&o)){var I=T&&P.call(t,"__wrapped__"),D=E&&P.call(e,"__wrapped__");if(I||D){N=a(I?t.value():t,D?e.value():e,r,i,l);return l.pop(),N}}if(!O)return!1;N=function(t,e,r,i,s,a){var u=r&o,c=re(t),l=c.length,h=re(e),p=h.length;if(l!=p&&!u)return!1;var f=l;for(;f--;){var d=c[f];if(!(u?d in e:P.call(e,d)))return!1}var y=!0,m=u;for(;++f<l;){var g,_=t[d=c[f]],v=e[d];if(!(g===n?_===v||s(_,v,r,i,a):g)){y=!1;break}m||(m="constructor"==d)}if(y&&!m){var b=t.constructor,w=e.constructor;b==w||!("constructor"in t)||!("constructor"in e)||"function"==typeof b&&b instanceof b&&"function"==typeof w&&w instanceof w||(y=!1)}return y}(t,e,r,i,a,l);return l.pop(),N}(t,e,r,i,lt,a))}function ht(t){return"function"==typeof t?t:null==t?se:("object"==typeof t?dt:C)(t)}function pt(t,e){return t<e}function ft(t,e){var r=-1,n=Xt(t)?Array(t.length):[];return tt(t,(function(t,i,o){n[++r]=e(t,i,o)})),n}function dt(t){var e=z(t);return function(r){var n=e.length;if(null==r)return!n;for(r=Object(r);n--;){var i=e[n];if(!(i in r)||!lt(t[i],r[i],o|s))return!1}return!0}}function yt(t,e){return xt(St(t,e,se),t+"")}function mt(t,e,r){var n=-1,i=t.length;e<0&&(e=-e>i?0:i+e),(r=r>i?i:r)<0&&(r+=i),i=e>r?0:r-e>>>0,e>>>=0;for(var o=Array(i);++n<i;)o[n]=t[n+e];return o}function gt(t){return mt(t,0,t.length)}function _t(t,e){var r;return tt(t,(function(t,n,i){return!(r=e(t,n,i))})),!!r}function vt(t,e,r,i){var o=!r;r||(r={});for(var s=-1,a=e.length;++s<a;){var u=e[s],c=i?i(r[u],t[u],u,r,t):n;c===n&&(c=t[u]),o?$(r,u,c):Y(r,u,c)}return r}function bt(t){return yt((function(e,r){var i=-1,o=r.length,s=o>1?r[o-1]:n;for(s=t.length>3&&"function"==typeof s?(o--,s):n,e=Object(e);++i<o;){var a=r[i];a&&t(e,a,i,s)}return e}))}function wt(t,e,r,n){if("function"!=typeof t)throw new TypeError(i);var o=1&e,s=function(t){return function(){var e=arguments,r=G(t.prototype),n=t.apply(r,e);return Wt(n)?n:r}}(t);return function e(){for(var i=-1,a=arguments.length,u=-1,c=n.length,l=Array(c+a),h=this&&this!==x&&this instanceof e?s:t;++u<c;)l[u]=n[u];for(;a--;)l[u++]=arguments[++i];return h.apply(o?r:this,l)}}function Tt(t){return Bt(t)||qt(t)}function Et(t,e,r){if(!Wt(r))return!1;var n=typeof e;return!!("number"==n?Xt(r)&&function(t,e){var r=typeof t;return!!(e=null==e?a:e)&&("number"==r||"symbol"!=r&&E.test(t))&&t>-1&&t%1==0&&t<e}(e,r.length):"string"==n&&e in r)&&Ft(r[e],t)}function Ot(t){var e=[];if(null!=t)for(var r in Object(t))e.push(r);return e}function St(t,e,r){return e=W(e===n?t.length-1:e,0),function(){for(var n=arguments,i=-1,o=W(n.length-e,0),s=Array(o);++i<o;)s[i]=n[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=n[i];return a[e]=r(s),t.apply(this,a)}}var xt=se;function Nt(t){return(null==t?0:t.length)?nt(t,1):[]}function It(t){return t&&t.length?t[0]:n}function Dt(t,e,r){for(var n=null==t?0:t.length,i=((r="number"==typeof r?r<0?W(n+r,0):r:0)||0)-1,o=e==e;++i<n;){var s=t[i];if(o?s===e:s!=s)return i}return-1}function Ct(t){var e=H(t);return e.__chain__=!0,e}var At,Lt=(At=function(t,e,r){var n=null==t?0:t.length;if(!n)return-1;var i=null==r?0:$t(r);return i<0&&(i=W(n+i,0)),function(t,e,r,n){for(var i=t.length,o=r+(n?1:-1);n?o--:++o<i;)if(e(t[o],o,t))return o;return-1}(t,ht(e),i)},function(t,e,r){var i=Object(t);if(!Xt(t)){var o=ht(e);t=re(t),e=function(t){return o(i[t],t,i)}}var s=At(t,e,r);return s>-1?i[o?t[s]:s]:n});function jt(t,e){return tt(t,ht(e))}function Mt(t,e,r){return function(t,e,r,n,i){return i(t,(function(t,i,o){r=n?(n=!1,t):e(r,t,i,o)})),r}(t,ht(e),r,arguments.length<3,tt)}function Rt(t,e){var r;if("function"!=typeof e)throw new TypeError(i);return t=$t(t),function(){return--t>0&&(r=e.apply(this,arguments)),t<=1&&(e=n),r}}var kt=yt((function(t,e,r){return wt(t,33,e,r)})),Pt=yt((function(t,e){return J(t,1,e)})),Ut=yt((function(t,e,r){return J(t,Jt(e)||0,r)}));function Ft(t,e){return t===e||t!=t&&e!=e}var qt=ct(function(){return arguments}())?ct:function(t){return Ht(t)&&P.call(t,"callee")&&!X.call(t,"callee")},Bt=Array.isArray;function Xt(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=a}(t.length)&&!zt(t)}var Vt=function(t){return Ht(t)&&at(t)==p};function zt(t){if(!Wt(t))return!1;var e=at(t);return e==d||e==y||e==l||e==_}function Wt(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Ht(t){return null!=t&&"object"==typeof t}function Gt(t){return"number"==typeof t||Ht(t)&&at(t)==m}var Qt=function(t){return Ht(t)&&at(t)==v};function Yt(t){return"string"==typeof t||!Bt(t)&&Ht(t)&&at(t)==b}var $t=Number,Jt=Number;function Kt(t){return"string"==typeof t?t:null==t?"":t+""}var Zt=bt((function(t,e){vt(e,z(e),t)})),te=bt((function(t,e){vt(e,Ot(e),t)}));var ee=yt((function(t,e){t=Object(t);var r=-1,i=e.length,o=i>2?e[2]:n;for(o&&Et(e[0],e[1],o)&&(i=1);++r<i;)for(var s=e[r],a=ne(s),u=-1,c=a.length;++u<c;){var l=a[u],h=t[l];(h===n||Ft(h,k[l])&&!P.call(t,l))&&(t[l]=s[l])}return t}));var re=z,ne=Ot,ie=function(t){return xt(St(t,n,Nt),t+"")}((function(t,e){return null==t?{}:function(t,e){return t=Object(t),Mt(e,(function(e,r){return r in t&&(e[r]=t[r]),e}),{})}(t,e)}));function oe(t){return null==t?[]:function(t,e){return ft(e,(function(e){return t[e]}))}(t,re(t))}function se(t){return t}var ae,ue=ht;function ce(t,e,r){var n=re(e),i=st(e,n);null!=r||Wt(e)&&(i.length||!n.length)||(r=e,e=t,t=this,i=st(e,re(e)));var o=!(Wt(r)&&"chain"in r&&!r.chain),s=zt(t);return tt(i,(function(r){var n=e[r];t[r]=n,s&&(t.prototype[r]=function(){var e=this.__chain__;if(o||e){var r=t(this.__wrapped__);return(r.__actions__=gt(this.__actions__)).push({func:n,args:arguments,thisArg:t}),r.__chain__=e,r}return n.apply(t,D([this.value()],arguments))})})),t}function le(){}H.assignIn=te,H.before=Rt,H.bind=kt,H.chain=Ct,H.compact=function(t){return rt(t,Boolean)},H.concat=function(){var t=arguments.length;if(!t)return[];for(var e=Array(t-1),r=arguments[0],n=t;n--;)e[n-1]=arguments[n];return D(Bt(r)?gt(r):[r],nt(e,1))},H.create=function(t,e){var r=G(t);return null==e?r:Zt(r,e)},H.defaults=ee,H.defer=Pt,H.delay=Ut,H.filter=function(t,e){return rt(t,ht(e))},H.flatten=Nt,H.flattenDeep=function(t){return(null==t?0:t.length)?nt(t,Infinity):[]},H.iteratee=ue,H.keys=re,H.map=function(t,e){return ft(t,ht(e))},H.matches=function(t){return dt(Zt({},t))},H.mixin=ce,H.negate=function(t){if("function"!=typeof t)throw new TypeError(i);return function(){var e=arguments;return!t.apply(this,e)}},H.once=function(t){return Rt(2,t)},H.pick=ie,H.slice=function(t,e,r){var i=null==t?0:t.length;return e=null==e?0:+e,r=r===n?i:+r,i?mt(t,e,r):[]},H.sortBy=function(t,e){var r=0;return e=ht(e),ft(ft(t,(function(t,n,i){return{value:t,index:r++,criteria:e(t,n,i)}})).sort((function(t,e){return function(t,e){if(t!==e){var r=t!==n,i=null===t,o=t==t,s=e!==n,a=null===e,u=e==e;if(!a&&t>e||i&&s&&u||!r&&u||!o)return 1;if(!i&&t<e||a&&r&&o||!s&&o||!u)return-1}return 0}(t.criteria,e.criteria)||t.index-e.index})),C("value"))},H.tap=function(t,e){return e(t),t},H.thru=function(t,e){return e(t)},H.toArray=function(t){return Xt(t)?t.length?gt(t):[]:oe(t)},H.values=oe,H.extend=te,ce(H,H),H.clone=function(t){return Wt(t)?Bt(t)?gt(t):vt(t,z(t)):t},H.escape=function(t){return(t=Kt(t))&&T.test(t)?t.replace(w,L):t},H.every=function(t,e,r){return function(t,e){var r=!0;return tt(t,(function(t,n,i){return r=!!e(t,n,i)})),r}(t,ht(e=r?n:e))},H.find=Lt,H.forEach=jt,H.has=function(t,e){return null!=t&&P.call(t,e)},H.head=It,H.identity=se,H.indexOf=Dt,H.isArguments=qt,H.isArray=Bt,H.isBoolean=function(t){return!0===t||!1===t||Ht(t)&&at(t)==h},H.isDate=Vt,H.isEmpty=function(t){return Xt(t)&&(Bt(t)||Yt(t)||zt(t.splice)||qt(t))?!t.length:!z(t).length},H.isEqual=function(t,e){return lt(t,e)},H.isFinite=function(t){return"number"==typeof t&&V(t)},H.isFunction=zt,H.isNaN=function(t){return Gt(t)&&t!=+t},H.isNull=function(t){return null===t},H.isNumber=Gt,H.isObject=Wt,H.isRegExp=Qt,H.isString=Yt,H.isUndefined=function(t){return t===n},H.last=function(t){var e=null==t?0:t.length;return e?t[e-1]:n},H.max=function(t){return t&&t.length?et(t,se,ut):n},H.min=function(t){return t&&t.length?et(t,se,pt):n},H.noConflict=function(){return x._===this&&(x._=q),this},H.noop=le,H.reduce=Mt,H.result=function(t,e,r){var i=null==t?n:t[e];return i===n&&(i=r),zt(i)?i.call(t):i},H.size=function(t){return null==t?0:(t=Xt(t)?t:z(t)).length},H.some=function(t,e,r){return _t(t,ht(e=r?n:e))},H.uniqueId=function(t){var e=++U;return Kt(t)+e},H.each=jt,H.first=It,ce(H,(ae={},ot(H,(function(t,e){P.call(H.prototype,e)||(ae[e]=t)})),ae),{chain:!1}),H.VERSION="4.17.15",tt(["pop","join","replace","reverse","split","push","shift","sort","splice","unshift"],(function(t){var e=(/^(?:replace|split)$/.test(t)?String.prototype:R)[t],r=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",n=/^(?:pop|join|replace|shift)$/.test(t);H.prototype[t]=function(){var t=arguments;if(n&&!this.__chain__){var i=this.value();return e.apply(Bt(i)?i:[],t)}return this[r]((function(r){return e.apply(Bt(r)?r:[],t)}))}})),H.prototype.toJSON=H.prototype.valueOf=H.prototype.value=function(){return t=this.__wrapped__,Mt(this.__actions__,(function(t,e){return e.func.apply(e.thisArg,D([t],e.args))}),t);var t},I&&((I.exports=H)._=H,N._=H)}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],44:[function(t,e,r){e.exports=o;var n=t("inherits"),i=t("readable-stream");function o(t,e){var r=this;if(!(r instanceof o))return new o(t,e);i.Readable.call(r,e),r.destroyed=!1,r._drained=!1,r._forwarding=!1,r._current=null,r._toStreams2=e&&e.objectMode?s:a,"function"==typeof t?r._queue=t:(r._queue=t.map(r._toStreams2),r._queue.forEach((function(t){"function"!=typeof t&&r._attachErrorListener(t)}))),r._next()}function s(t){return u(t,{objectMode:!0,highWaterMark:16})}function a(t){return u(t)}function u(t,e){if(!t||"function"==typeof t||t._readableState)return t;var r=new i.Readable(e).wrap(t);return t.destroy&&(r.destroy=t.destroy.bind(t)),r}n(o,i.Readable),o.obj=function(t){return new o(t,{objectMode:!0,highWaterMark:16})},o.prototype._read=function(){this._drained=!0,this._forward()},o.prototype._forward=function(){if(!this._forwarding&&this._drained&&this._current){var t;for(this._forwarding=!0;null!==(t=this._current.read());)this._drained=this.push(t);this._forwarding=!1}},o.prototype.destroy=function(t){this.destroyed||(this.destroyed=!0,this._current&&this._current.destroy&&this._current.destroy(),"function"!=typeof this._queue&&this._queue.forEach((function(t){t.destroy&&t.destroy()})),t&&this.emit("error",t),this.emit("close"))},o.prototype._next=function(){var t=this;if(t._current=null,"function"==typeof t._queue)t._queue((function(e,r){if(e)return t.destroy(e);r=t._toStreams2(r),t._attachErrorListener(r),t._gotNextStream(r)}));else{var e=t._queue.shift();"function"==typeof e&&(e=t._toStreams2(e()),t._attachErrorListener(e)),t._gotNextStream(e)}},o.prototype._gotNextStream=function(t){var e=this;if(!t)return e.push(null),void e.destroy();function r(){e._forward()}function n(){t._readableState.ended||e.destroy()}e._current=t,e._forward(),t.on("readable",r),t.once("end",(function i(){e._current=null,t.removeListener("readable",r),t.removeListener("end",i),t.removeListener("close",n),e._next()})),t.once("close",n)},o.prototype._attachErrorListener=function(t){var e=this;t&&t.once("error",(function r(n){t.removeListener("error",r),e.destroy(n)}))}},{inherits:39,"readable-stream":62}],45:[function(t,e,r){(function(t){"use strict";!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?e.exports={nextTick:function(e,r,n,i){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var o,s,a=arguments.length;switch(a){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick((function(){e.call(null,r)}));case 3:return t.nextTick((function(){e.call(null,r,n)}));case 4:return t.nextTick((function(){e.call(null,r,n,i)}));default:for(o=new Array(a-1),s=0;s<o.length;)o[s++]=arguments[s];return t.nextTick((function(){e.apply(null,o)}))}}}:e.exports=t}).call(this,t("_process"))},{_process:46}],46:[function(t,e,r){var n,i,o=e.exports={};function s(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function u(t){if(n===setTimeout)return setTimeout(t,0);if((n===s||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:s}catch(t){n=s}try{i="function"==typeof clearTimeout?clearTimeout:a}catch(t){i=a}}();var c,l=[],h=!1,p=-1;function f(){h&&c&&(h=!1,c.length?l=c.concat(l):p=-1,l.length&&d())}function d(){if(!h){var t=u(f);h=!0;for(var e=l.length;e;){for(c=l,l=[];++p<e;)c&&c[p].run();p=-1,e=l.length}c=null,h=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===a||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{return i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function y(t,e){this.fun=t,this.array=e}function m(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];l.push(new y(t,e)),1!==l.length||h||u(d)},y.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=m,o.addListener=m,o.once=m,o.off=m,o.removeListener=m,o.removeAllListeners=m,o.emit=m,o.prependListener=m,o.prependOnceListener=m,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],47:[function(t,e,r){"use strict";var n=t("asap/raw");function i(){}var o=null,s={};function a(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("Promise constructor's argument is not a function");this._40=0,this._65=0,this._55=null,this._72=null,t!==i&&f(t,this)}function u(t,e){for(;3===t._65;)t=t._55;if(a._37&&a._37(t),0===t._65)return 0===t._40?(t._40=1,void(t._72=e)):1===t._40?(t._40=2,void(t._72=[t._72,e])):void t._72.push(e);!function(t,e){n((function(){var r=1===t._65?e.onFulfilled:e.onRejected;if(null!==r){var n=function(t,e){try{return t(e)}catch(t){return o=t,s}}(r,t._55);n===s?l(e.promise,o):c(e.promise,n)}else 1===t._65?c(e.promise,t._55):l(e.promise,t._55)}))}(t,e)}function c(t,e){if(e===t)return l(t,new TypeError("A promise cannot be resolved with itself."));if(e&&("object"==typeof e||"function"==typeof e)){var r=function(t){try{return t.then}catch(t){return o=t,s}}(e);if(r===s)return l(t,o);if(r===t.then&&e instanceof a)return t._65=3,t._55=e,void h(t);if("function"==typeof r)return void f(r.bind(e),t)}t._65=1,t._55=e,h(t)}function l(t,e){t._65=2,t._55=e,a._87&&a._87(t,e),h(t)}function h(t){if(1===t._40&&(u(t,t._72),t._72=null),2===t._40){for(var e=0;e<t._72.length;e++)u(t,t._72[e]);t._72=null}}function p(t,e,r){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=r}function f(t,e){var r=!1,n=function(t,e,r){try{t(e,r)}catch(t){return o=t,s}}(t,(function(t){r||(r=!0,c(e,t))}),(function(t){r||(r=!0,l(e,t))}));r||n!==s||(r=!0,l(e,o))}e.exports=a,a._37=null,a._87=null,a._61=i,a.prototype.then=function(t,e){if(this.constructor!==a)return function(t,e,r){return new t.constructor((function(n,o){var s=new a(i);s.then(n,o),u(t,new p(e,r,s))}))}(this,t,e);var r=new a(i);return u(this,new p(t,e,r)),r}},{"asap/raw":27}],48:[function(t,e,r){"use strict";var n=t("./core.js");e.exports=n;var i=l(!0),o=l(!1),s=l(null),a=l(void 0),u=l(0),c=l("");function l(t){var e=new n(n._61);return e._65=1,e._55=t,e}n.resolve=function(t){if(t instanceof n)return t;if(null===t)return s;if(void 0===t)return a;if(!0===t)return i;if(!1===t)return o;if(0===t)return u;if(""===t)return c;if("object"==typeof t||"function"==typeof t)try{var e=t.then;if("function"==typeof e)return new n(e.bind(t))}catch(t){return new n((function(e,r){r(t)}))}return l(t)},n.all=function(t){var e=Array.prototype.slice.call(t);return new n((function(t,r){if(0===e.length)return t([]);var i=e.length;function o(s,a){if(a&&("object"==typeof a||"function"==typeof a)){if(a instanceof n&&a.then===n.prototype.then){for(;3===a._65;)a=a._55;return 1===a._65?o(s,a._55):(2===a._65&&r(a._55),void a.then((function(t){o(s,t)}),r))}var u=a.then;if("function"==typeof u)return void new n(u.bind(a)).then((function(t){o(s,t)}),r)}e[s]=a,0==--i&&t(e)}for(var s=0;s<e.length;s++)o(s,e[s])}))},n.reject=function(t){return new n((function(e,r){r(t)}))},n.race=function(t){return new n((function(e,r){t.forEach((function(t){n.resolve(t).then(e,r)}))}))},n.prototype.catch=function(t){return this.then(null,t)}},{"./core.js":47}],49:[function(t,e,r){"use strict";function n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.exports=function(t,e,r,o){e=e||"&",r=r||"=";var s={};if("string"!=typeof t||0===t.length)return s;var a=/\+/g;t=t.split(e);var u=1e3;o&&"number"==typeof o.maxKeys&&(u=o.maxKeys);var c=t.length;u>0&&c>u&&(c=u);for(var l=0;l<c;++l){var h,p,f,d,y=t[l].replace(a,"%20"),m=y.indexOf(r);m>=0?(h=y.substr(0,m),p=y.substr(m+1)):(h=y,p=""),f=decodeURIComponent(h),d=decodeURIComponent(p),n(s,f)?i(s[f])?s[f].push(d):s[f]=[s[f],d]:s[f]=d}return s};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},{}],50:[function(t,e,r){"use strict";var n=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};e.exports=function(t,e,r,a){return e=e||"&",r=r||"=",null===t&&(t=void 0),"object"==typeof t?o(s(t),(function(s){var a=encodeURIComponent(n(s))+r;return i(t[s])?o(t[s],(function(t){return a+encodeURIComponent(n(t))})).join(e):a+encodeURIComponent(n(t[s]))})).join(e):a?encodeURIComponent(n(a))+r+encodeURIComponent(n(t)):""};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function o(t,e){if(t.map)return t.map(e);for(var r=[],n=0;n<t.length;n++)r.push(e(t[n],n));return r}var s=Object.keys||function(t){var e=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.push(r);return e}},{}],51:[function(t,e,r){"use strict";r.decode=r.parse=t("./decode"),r.encode=r.stringify=t("./encode")},{"./decode":49,"./encode":50}],52:[function(t,e,r){e.exports=t("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":53}],53:[function(t,e,r){"use strict";var n=t("process-nextick-args"),i=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};e.exports=h;var o=t("core-util-is");o.inherits=t("inherits");var s=t("./_stream_readable"),a=t("./_stream_writable");o.inherits(h,s);for(var u=i(a.prototype),c=0;c<u.length;c++){var l=u[c];h.prototype[l]||(h.prototype[l]=a.prototype[l])}function h(t){if(!(this instanceof h))return new h(t);s.call(this,t),a.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",p)}function p(){this.allowHalfOpen||this._writableState.ended||n.nextTick(f,this)}function f(t){t.end()}Object.defineProperty(h.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(h.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),h.prototype._destroy=function(t,e){this.push(null),this.end(),n.nextTick(e,t)}},{"./_stream_readable":55,"./_stream_writable":57,"core-util-is":31,inherits:39,"process-nextick-args":45}],54:[function(t,e,r){"use strict";e.exports=o;var n=t("./_stream_transform"),i=t("core-util-is");function o(t){if(!(this instanceof o))return new o(t);n.call(this,t)}i.inherits=t("inherits"),i.inherits(o,n),o.prototype._transform=function(t,e,r){r(null,t)}},{"./_stream_transform":56,"core-util-is":31,inherits:39}],55:[function(t,e,r){(function(r,n){"use strict";var i=t("process-nextick-args");e.exports=v;var o,s=t("isarray");v.ReadableState=_;t("events").EventEmitter;var a=function(t,e){return t.listeners(e).length},u=t("./internal/streams/stream"),c=t("safe-buffer").Buffer,l=n.Uint8Array||function(){};var h=t("core-util-is");h.inherits=t("inherits");var p=t("util"),f=void 0;f=p&&p.debuglog?p.debuglog("stream"):function(){};var d,y=t("./internal/streams/BufferList"),m=t("./internal/streams/destroy");h.inherits(v,u);var g=["error","close","destroy","pause","resume"];function _(e,r){e=e||{};var n=r instanceof(o=o||t("./_stream_duplex"));this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var i=e.highWaterMark,s=e.readableHighWaterMark,a=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:n&&(s||0===s)?s:a,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new y,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(d||(d=t("string_decoder/").StringDecoder),this.decoder=new d(e.encoding),this.encoding=e.encoding)}function v(e){if(o=o||t("./_stream_duplex"),!(this instanceof v))return new v(e);this._readableState=new _(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),u.call(this)}function b(t,e,r,n,i){var o,s=t._readableState;null===e?(s.reading=!1,function(t,e){if(e.ended)return;if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,O(t)}(t,s)):(i||(o=function(t,e){var r;n=e,c.isBuffer(n)||n instanceof l||"string"==typeof e||void 0===e||t.objectMode||(r=new TypeError("Invalid non-string/buffer chunk"));var n;return r}(s,e)),o?t.emit("error",o):s.objectMode||e&&e.length>0?("string"==typeof e||s.objectMode||Object.getPrototypeOf(e)===c.prototype||(e=function(t){return c.from(t)}(e)),n?s.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):w(t,s,e,!0):s.ended?t.emit("error",new Error("stream.push() after EOF")):(s.reading=!1,s.decoder&&!r?(e=s.decoder.write(e),s.objectMode||0!==e.length?w(t,s,e,!1):x(t,s)):w(t,s,e,!1))):n||(s.reading=!1));return function(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}(s)}function w(t,e,r,n){e.flowing&&0===e.length&&!e.sync?(t.emit("data",r),t.read(0)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&O(t)),x(t,e)}Object.defineProperty(v.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),v.prototype.destroy=m.destroy,v.prototype._undestroy=m.undestroy,v.prototype._destroy=function(t,e){this.push(null),e(t)},v.prototype.push=function(t,e){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof t&&((e=e||n.defaultEncoding)!==n.encoding&&(t=c.from(t,e),e=""),r=!0),b(this,t,e,!1,r)},v.prototype.unshift=function(t){return b(this,t,null,!0,!1)},v.prototype.isPaused=function(){return!1===this._readableState.flowing},v.prototype.setEncoding=function(e){return d||(d=t("string_decoder/").StringDecoder),this._readableState.decoder=new d(e),this._readableState.encoding=e,this};var T=8388608;function E(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=T?t=T:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function O(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(f("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?i.nextTick(S,t):S(t))}function S(t){f("emit readable"),t.emit("readable"),C(t)}function x(t,e){e.readingMore||(e.readingMore=!0,i.nextTick(N,t,e))}function N(t,e){for(var r=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(f("maybeReadMore read 0"),t.read(0),r!==e.length);)r=e.length;e.readingMore=!1}function I(t){f("readable nexttick read 0"),t.read(0)}function D(t,e){e.reading||(f("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),C(t),e.flowing&&!e.reading&&t.read(0)}function C(t){var e=t._readableState;for(f("flow",e.flowing);e.flowing&&null!==t.read(););}function A(t,e){return 0===e.length?null:(e.objectMode?r=e.buffer.shift():!t||t>=e.length?(r=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):r=function(t,e,r){var n;t<e.head.data.length?(n=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):n=t===e.head.data.length?e.shift():r?function(t,e){var r=e.head,n=1,i=r.data;t-=i.length;for(;r=r.next;){var o=r.data,s=t>o.length?o.length:t;if(s===o.length?i+=o:i+=o.slice(0,t),0===(t-=s)){s===o.length?(++n,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r,r.data=o.slice(s));break}++n}return e.length-=n,i}(t,e):function(t,e){var r=c.allocUnsafe(t),n=e.head,i=1;n.data.copy(r),t-=n.data.length;for(;n=n.next;){var o=n.data,s=t>o.length?o.length:t;if(o.copy(r,r.length-t,0,s),0===(t-=s)){s===o.length?(++i,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=o.slice(s));break}++i}return e.length-=i,r}(t,e);return n}(t,e.buffer,e.decoder),r);var r}function L(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,i.nextTick(j,e,t))}function j(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function M(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}v.prototype.read=function(t){f("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return f("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?L(this):O(this),null;if(0===(t=E(t,e))&&e.ended)return 0===e.length&&L(this),null;var n,i=e.needReadable;return f("need readable",i),(0===e.length||e.length-t<e.highWaterMark)&&f("length less than watermark",i=!0),e.ended||e.reading?f("reading or ended",i=!1):i&&(f("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=E(r,e))),null===(n=t>0?A(t,e):null)?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&L(this)),null!==n&&this.emit("data",n),n},v.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))},v.prototype.pipe=function(t,e){var n=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=t;break;case 1:o.pipes=[o.pipes,t];break;default:o.pipes.push(t)}o.pipesCount+=1,f("pipe count=%d opts=%j",o.pipesCount,e);var u=(!e||!1!==e.end)&&t!==r.stdout&&t!==r.stderr?l:v;function c(e,r){f("onunpipe"),e===n&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,f("cleanup"),t.removeListener("close",g),t.removeListener("finish",_),t.removeListener("drain",h),t.removeListener("error",m),t.removeListener("unpipe",c),n.removeListener("end",l),n.removeListener("end",v),n.removeListener("data",y),p=!0,!o.awaitDrain||t._writableState&&!t._writableState.needDrain||h())}function l(){f("onend"),t.end()}o.endEmitted?i.nextTick(u):n.once("end",u),t.on("unpipe",c);var h=function(t){return function(){var e=t._readableState;f("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&a(t,"data")&&(e.flowing=!0,C(t))}}(n);t.on("drain",h);var p=!1;var d=!1;function y(e){f("ondata"),d=!1,!1!==t.write(e)||d||((1===o.pipesCount&&o.pipes===t||o.pipesCount>1&&-1!==M(o.pipes,t))&&!p&&(f("false write response, pause",n._readableState.awaitDrain),n._readableState.awaitDrain++,d=!0),n.pause())}function m(e){f("onerror",e),v(),t.removeListener("error",m),0===a(t,"error")&&t.emit("error",e)}function g(){t.removeListener("finish",_),v()}function _(){f("onfinish"),t.removeListener("close",g),v()}function v(){f("unpipe"),n.unpipe(t)}return n.on("data",y),function(t,e,r){if("function"==typeof t.prependListener)return t.prependListener(e,r);t._events&&t._events[e]?s(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]:t.on(e,r)}(t,"error",m),t.once("close",g),t.once("finish",_),t.emit("pipe",n),o.flowing||(f("pipe resume"),n.resume()),t},v.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r)),this;if(!t){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,r);return this}var s=M(e.pipes,t);return-1===s||(e.pipes.splice(s,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r)),this},v.prototype.on=function(t,e){var r=u.prototype.on.call(this,t,e);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var n=this._readableState;n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&O(this):i.nextTick(I,this))}return r},v.prototype.addListener=v.prototype.on,v.prototype.resume=function(){var t=this._readableState;return t.flowing||(f("resume"),t.flowing=!0,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,i.nextTick(D,t,e))}(this,t)),this},v.prototype.pause=function(){return f("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(f("pause"),this._readableState.flowing=!1,this.emit("pause")),this},v.prototype.wrap=function(t){var e=this,r=this._readableState,n=!1;for(var i in t.on("end",(function(){if(f("wrapped end"),r.decoder&&!r.ended){var t=r.decoder.end();t&&t.length&&e.push(t)}e.push(null)})),t.on("data",(function(i){(f("wrapped data"),r.decoder&&(i=r.decoder.write(i)),r.objectMode&&null==i)||(r.objectMode||i&&i.length)&&(e.push(i)||(n=!0,t.pause()))})),t)void 0===this[i]&&"function"==typeof t[i]&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));for(var o=0;o<g.length;o++)t.on(g[o],this.emit.bind(this,g[o]));return this._read=function(e){f("wrapped _read",e),n&&(n=!1,t.resume())},this},Object.defineProperty(v.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),v._fromList=A}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./_stream_duplex":53,"./internal/streams/BufferList":58,"./internal/streams/destroy":59,"./internal/streams/stream":60,_process:46,"core-util-is":31,events:37,inherits:39,isarray:41,"process-nextick-args":45,"safe-buffer":65,"string_decoder/":68,util:29}],56:[function(t,e,r){"use strict";e.exports=s;var n=t("./_stream_duplex"),i=t("core-util-is");function o(t,e){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,null!=e&&this.push(e),n(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function s(t){if(!(this instanceof s))return new s(t);n.call(this,t),this._transformState={afterTransform:o.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",a)}function a(){var t=this;"function"==typeof this._flush?this._flush((function(e,r){u(t,e,r)})):u(this,null,null)}function u(t,e,r){if(e)return t.emit("error",e);if(null!=r&&t.push(r),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}i.inherits=t("inherits"),i.inherits(s,n),s.prototype.push=function(t,e){return this._transformState.needTransform=!1,n.prototype.push.call(this,t,e)},s.prototype._transform=function(t,e,r){throw new Error("_transform() is not implemented")},s.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},s.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},s.prototype._destroy=function(t,e){var r=this;n.prototype._destroy.call(this,t,(function(t){e(t),r.emit("close")}))}},{"./_stream_duplex":53,"core-util-is":31,inherits:39}],57:[function(t,e,r){(function(r,n,i){"use strict";var o=t("process-nextick-args");function s(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,r){var n=t.entry;t.entry=null;for(;n;){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}(e,t)}}e.exports=_;var a,u=!r.browser&&["v0.10","v0.9."].indexOf(r.version.slice(0,5))>-1?i:o.nextTick;_.WritableState=g;var c=t("core-util-is");c.inherits=t("inherits");var l={deprecate:t("util-deprecate")},h=t("./internal/streams/stream"),p=t("safe-buffer").Buffer,f=n.Uint8Array||function(){};var d,y=t("./internal/streams/destroy");function m(){}function g(e,r){a=a||t("./_stream_duplex"),e=e||{};var n=r instanceof a;this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var i=e.highWaterMark,c=e.writableHighWaterMark,l=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:n&&(c||0===c)?c:l,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var h=!1===e.decodeStrings;this.decodeStrings=!h,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var r=t._writableState,n=r.sync,i=r.writecb;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(r),e)!function(t,e,r,n,i){--e.pendingcb,r?(o.nextTick(i,n),o.nextTick(O,t,e),t._writableState.errorEmitted=!0,t.emit("error",n)):(i(n),t._writableState.errorEmitted=!0,t.emit("error",n),O(t,e))}(t,r,n,e,i);else{var s=T(r);s||r.corked||r.bufferProcessing||!r.bufferedRequest||w(t,r),n?u(b,t,r,s,i):b(t,r,s,i)}}(r,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new s(this)}function _(e){if(a=a||t("./_stream_duplex"),!(d.call(_,this)||this instanceof a))return new _(e);this._writableState=new g(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),h.call(this)}function v(t,e,r,n,i,o,s){e.writelen=n,e.writecb=s,e.writing=!0,e.sync=!0,r?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function b(t,e,r,n){r||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,n(),O(t,e)}function w(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,i=new Array(n),o=e.corkedRequestsFree;o.entry=r;for(var a=0,u=!0;r;)i[a]=r,r.isBuf||(u=!1),r=r.next,a+=1;i.allBuffers=u,v(t,e,!0,e.length,i,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new s(e),e.bufferedRequestCount=0}else{for(;r;){var c=r.chunk,l=r.encoding,h=r.callback;if(v(t,e,!1,e.objectMode?1:c.length,c,l,h),r=r.next,e.bufferedRequestCount--,e.writing)break}null===r&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}function T(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function E(t,e){t._final((function(r){e.pendingcb--,r&&t.emit("error",r),e.prefinished=!0,t.emit("prefinish"),O(t,e)}))}function O(t,e){var r=T(e);return r&&(!function(t,e){e.prefinished||e.finalCalled||("function"==typeof t._final?(e.pendingcb++,e.finalCalled=!0,o.nextTick(E,t,e)):(e.prefinished=!0,t.emit("prefinish")))}(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"))),r}c.inherits(_,h),g.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(g.prototype,"buffer",{get:l.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(d=Function.prototype[Symbol.hasInstance],Object.defineProperty(_,Symbol.hasInstance,{value:function(t){return!!d.call(this,t)||this===_&&(t&&t._writableState instanceof g)}})):d=function(t){return t instanceof this},_.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},_.prototype.write=function(t,e,r){var n,i=this._writableState,s=!1,a=!i.objectMode&&(n=t,p.isBuffer(n)||n instanceof f);return a&&!p.isBuffer(t)&&(t=function(t){return p.from(t)}(t)),"function"==typeof e&&(r=e,e=null),a?e="buffer":e||(e=i.defaultEncoding),"function"!=typeof r&&(r=m),i.ended?function(t,e){var r=new Error("write after end");t.emit("error",r),o.nextTick(e,r)}(this,r):(a||function(t,e,r,n){var i=!0,s=!1;return null===r?s=new TypeError("May not write null values to stream"):"string"==typeof r||void 0===r||e.objectMode||(s=new TypeError("Invalid non-string/buffer chunk")),s&&(t.emit("error",s),o.nextTick(n,s),i=!1),i}(this,i,t,r))&&(i.pendingcb++,s=function(t,e,r,n,i,o){if(!r){var s=function(t,e,r){t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=p.from(e,r));return e}(e,n,i);n!==s&&(r=!0,i="buffer",n=s)}var a=e.objectMode?1:n.length;e.length+=a;var u=e.length<e.highWaterMark;u||(e.needDrain=!0);if(e.writing||e.corked){var c=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},c?c.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else v(t,e,!1,a,n,i,o);return u}(this,i,a,t,e,r)),s},_.prototype.cork=function(){this._writableState.corked++},_.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||w(this,t))},_.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(_.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),_.prototype._write=function(t,e,r){r(new Error("_write() is not implemented"))},_.prototype._writev=null,_.prototype.end=function(t,e,r){var n=this._writableState;"function"==typeof t?(r=t,t=null,e=null):"function"==typeof e&&(r=e,e=null),null!=t&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||function(t,e,r){e.ending=!0,O(t,e),r&&(e.finished?o.nextTick(r):t.once("finish",r));e.ended=!0,t.writable=!1}(this,n,r)},Object.defineProperty(_.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),_.prototype.destroy=y.destroy,_.prototype._undestroy=y.undestroy,_.prototype._destroy=function(t,e){this.end(),e(t)}}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("timers").setImmediate)},{"./_stream_duplex":53,"./internal/streams/destroy":59,"./internal/streams/stream":60,_process:46,"core-util-is":31,inherits:39,"process-nextick-args":45,"safe-buffer":65,timers:69,"util-deprecate":70}],58:[function(t,e,r){"use strict";var n=t("safe-buffer").Buffer,i=t("util");e.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},t.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},t.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,r=""+e.data;e=e.next;)r+=t+e.data;return r},t.prototype.concat=function(t){if(0===this.length)return n.alloc(0);if(1===this.length)return this.head.data;for(var e,r,i,o=n.allocUnsafe(t>>>0),s=this.head,a=0;s;)e=s.data,r=o,i=a,e.copy(r,i),a+=s.data.length,s=s.next;return o},t}(),i&&i.inspect&&i.inspect.custom&&(e.exports.prototype[i.inspect.custom]=function(){var t=i.inspect({length:this.length});return this.constructor.name+" "+t})},{"safe-buffer":65,util:29}],59:[function(t,e,r){"use strict";var n=t("process-nextick-args");function i(t,e){t.emit("error",e)}e.exports={destroy:function(t,e){var r=this,o=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;return o||s?(e?e(t):!t||this._writableState&&this._writableState.errorEmitted||n.nextTick(i,this,t),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!e&&t?(n.nextTick(i,r,t),r._writableState&&(r._writableState.errorEmitted=!0)):e&&e(t)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},{"process-nextick-args":45}],60:[function(t,e,r){e.exports=t("events").EventEmitter},{events:37}],61:[function(t,e,r){e.exports=t("./readable").PassThrough},{"./readable":62}],62:[function(t,e,r){(r=e.exports=t("./lib/_stream_readable.js")).Stream=r,r.Readable=r,r.Writable=t("./lib/_stream_writable.js"),r.Duplex=t("./lib/_stream_duplex.js"),r.Transform=t("./lib/_stream_transform.js"),r.PassThrough=t("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":53,"./lib/_stream_passthrough.js":54,"./lib/_stream_readable.js":55,"./lib/_stream_transform.js":56,"./lib/_stream_writable.js":57}],63:[function(t,e,r){e.exports=t("./readable").Transform},{"./readable":62}],64:[function(t,e,r){e.exports=t("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":57}],65:[function(t,e,r){var n=t("buffer"),i=n.Buffer;function o(t,e){for(var r in t)e[r]=t[r]}function s(t,e,r){return i(t,e,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=n:(o(n,r),r.Buffer=s),o(i,s),s.from=function(t,e,r){if("number"==typeof t)throw new TypeError("Argument must not be a number");return i(t,e,r)},s.alloc=function(t,e,r){if("number"!=typeof t)throw new TypeError("Argument must be a number");var n=i(t);return void 0!==e?"string"==typeof r?n.fill(e,r):n.fill(e):n.fill(0),n},s.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return i(t)},s.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return n.SlowBuffer(t)}},{buffer:30}],66:[function(t,e,r){(function(e){!function(r){r.parser=function(t,e){return new o(t,e)},r.SAXParser=o,r.SAXStream=a,r.createStream=function(t,e){return new a(t,e)},r.MAX_BUFFER_LENGTH=65536;var n,i=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function o(t,e){if(!(this instanceof o))return new o(t,e);var n=this;!function(t){for(var e=0,r=i.length;e<r;e++)t[i[e]]=""}(n),n.q=n.c="",n.bufferCheckPosition=r.MAX_BUFFER_LENGTH,n.opt=e||{},n.opt.lowercase=n.opt.lowercase||n.opt.lowercasetags,n.looseCase=n.opt.lowercase?"toLowerCase":"toUpperCase",n.tags=[],n.closed=n.closedRoot=n.sawRoot=!1,n.tag=n.error=null,n.strict=!!t,n.noscript=!(!t&&!n.opt.noscript),n.state=S.BEGIN,n.strictEntities=n.opt.strictEntities,n.ENTITIES=n.strictEntities?Object.create(r.XML_ENTITIES):Object.create(r.ENTITIES),n.attribList=[],n.opt.xmlns&&(n.ns=Object.create(p)),n.trackPosition=!1!==n.opt.position,n.trackPosition&&(n.position=n.line=n.column=0),N(n,"onready")}r.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(t){function e(){}return e.prototype=t,new e}),Object.keys||(Object.keys=function(t){var e=[];for(var r in t)t.hasOwnProperty(r)&&e.push(r);return e}),o.prototype={end:function(){L(this)},write:function(t){var e=this;if(this.error)throw this.error;if(e.closed)return A(e,"Cannot write after close. Assign an onready handler.");if(null===t)return L(e);"object"==typeof t&&(t=t.toString());var n=0,o="";for(;o=B(t,n++),e.c=o,o;)switch(e.trackPosition&&(e.position++,"\n"===o?(e.line++,e.column=0):e.column++),e.state){case S.BEGIN:if(e.state=S.BEGIN_WHITESPACE,"\ufeff"===o)continue;q(e,o);continue;case S.BEGIN_WHITESPACE:q(e,o);continue;case S.TEXT:if(e.sawRoot&&!e.closedRoot){for(var s=n-1;o&&"<"!==o&&"&"!==o;)(o=B(t,n++))&&e.trackPosition&&(e.position++,"\n"===o?(e.line++,e.column=0):e.column++);e.textNode+=t.substring(s,n-1)}"<"!==o||e.sawRoot&&e.closedRoot&&!e.strict?(g(o)||e.sawRoot&&!e.closedRoot||j(e,"Text data outside of root node."),"&"===o?e.state=S.TEXT_ENTITY:e.textNode+=o):(e.state=S.OPEN_WAKA,e.startTagPosition=e.position);continue;case S.SCRIPT:"<"===o?e.state=S.SCRIPT_ENDING:e.script+=o;continue;case S.SCRIPT_ENDING:"/"===o?e.state=S.CLOSE_TAG:(e.script+="<"+o,e.state=S.SCRIPT);continue;case S.OPEN_WAKA:if("!"===o)e.state=S.SGML_DECL,e.sgmlDecl="";else if(g(o));else if(b(f,o))e.state=S.OPEN_TAG,e.tagName=o;else if("/"===o)e.state=S.CLOSE_TAG,e.tagName="";else if("?"===o)e.state=S.PROC_INST,e.procInstName=e.procInstBody="";else{if(j(e,"Unencoded <"),e.startTagPosition+1<e.position){var a=e.position-e.startTagPosition;o=new Array(a).join(" ")+o}e.textNode+="<"+o,e.state=S.TEXT}continue;case S.SGML_DECL:(e.sgmlDecl+o).toUpperCase()===u?(I(e,"onopencdata"),e.state=S.CDATA,e.sgmlDecl="",e.cdata=""):e.sgmlDecl+o==="--"?(e.state=S.COMMENT,e.comment="",e.sgmlDecl=""):(e.sgmlDecl+o).toUpperCase()===c?(e.state=S.DOCTYPE,(e.doctype||e.sawRoot)&&j(e,"Inappropriately located doctype declaration"),e.doctype="",e.sgmlDecl=""):">"===o?(I(e,"onsgmldeclaration",e.sgmlDecl),e.sgmlDecl="",e.state=S.TEXT):_(o)?(e.state=S.SGML_DECL_QUOTED,e.sgmlDecl+=o):e.sgmlDecl+=o;continue;case S.SGML_DECL_QUOTED:o===e.q&&(e.state=S.SGML_DECL,e.q=""),e.sgmlDecl+=o;continue;case S.DOCTYPE:">"===o?(e.state=S.TEXT,I(e,"ondoctype",e.doctype),e.doctype=!0):(e.doctype+=o,"["===o?e.state=S.DOCTYPE_DTD:_(o)&&(e.state=S.DOCTYPE_QUOTED,e.q=o));continue;case S.DOCTYPE_QUOTED:e.doctype+=o,o===e.q&&(e.q="",e.state=S.DOCTYPE);continue;case S.DOCTYPE_DTD:e.doctype+=o,"]"===o?e.state=S.DOCTYPE:_(o)&&(e.state=S.DOCTYPE_DTD_QUOTED,e.q=o);continue;case S.DOCTYPE_DTD_QUOTED:e.doctype+=o,o===e.q&&(e.state=S.DOCTYPE_DTD,e.q="");continue;case S.COMMENT:"-"===o?e.state=S.COMMENT_ENDING:e.comment+=o;continue;case S.COMMENT_ENDING:"-"===o?(e.state=S.COMMENT_ENDED,e.comment=C(e.opt,e.comment),e.comment&&I(e,"oncomment",e.comment),e.comment=""):(e.comment+="-"+o,e.state=S.COMMENT);continue;case S.COMMENT_ENDED:">"!==o?(j(e,"Malformed comment"),e.comment+="--"+o,e.state=S.COMMENT):e.state=S.TEXT;continue;case S.CDATA:"]"===o?e.state=S.CDATA_ENDING:e.cdata+=o;continue;case S.CDATA_ENDING:"]"===o?e.state=S.CDATA_ENDING_2:(e.cdata+="]"+o,e.state=S.CDATA);continue;case S.CDATA_ENDING_2:">"===o?(e.cdata&&I(e,"oncdata",e.cdata),I(e,"onclosecdata"),e.cdata="",e.state=S.TEXT):"]"===o?e.cdata+="]":(e.cdata+="]]"+o,e.state=S.CDATA);continue;case S.PROC_INST:"?"===o?e.state=S.PROC_INST_ENDING:g(o)?e.state=S.PROC_INST_BODY:e.procInstName+=o;continue;case S.PROC_INST_BODY:if(!e.procInstBody&&g(o))continue;"?"===o?e.state=S.PROC_INST_ENDING:e.procInstBody+=o;continue;case S.PROC_INST_ENDING:">"===o?(I(e,"onprocessinginstruction",{name:e.procInstName,body:e.procInstBody}),e.procInstName=e.procInstBody="",e.state=S.TEXT):(e.procInstBody+="?"+o,e.state=S.PROC_INST_BODY);continue;case S.OPEN_TAG:b(d,o)?e.tagName+=o:(M(e),">"===o?P(e):"/"===o?e.state=S.OPEN_TAG_SLASH:(g(o)||j(e,"Invalid character in tag name"),e.state=S.ATTRIB));continue;case S.OPEN_TAG_SLASH:">"===o?(P(e,!0),U(e)):(j(e,"Forward-slash in opening tag not followed by >"),e.state=S.ATTRIB);continue;case S.ATTRIB:if(g(o))continue;">"===o?P(e):"/"===o?e.state=S.OPEN_TAG_SLASH:b(f,o)?(e.attribName=o,e.attribValue="",e.state=S.ATTRIB_NAME):j(e,"Invalid attribute name");continue;case S.ATTRIB_NAME:"="===o?e.state=S.ATTRIB_VALUE:">"===o?(j(e,"Attribute without value"),e.attribValue=e.attribName,k(e),P(e)):g(o)?e.state=S.ATTRIB_NAME_SAW_WHITE:b(d,o)?e.attribName+=o:j(e,"Invalid attribute name");continue;case S.ATTRIB_NAME_SAW_WHITE:if("="===o)e.state=S.ATTRIB_VALUE;else{if(g(o))continue;j(e,"Attribute without value"),e.tag.attributes[e.attribName]="",e.attribValue="",I(e,"onattribute",{name:e.attribName,value:""}),e.attribName="",">"===o?P(e):b(f,o)?(e.attribName=o,e.state=S.ATTRIB_NAME):(j(e,"Invalid attribute name"),e.state=S.ATTRIB)}continue;case S.ATTRIB_VALUE:if(g(o))continue;_(o)?(e.q=o,e.state=S.ATTRIB_VALUE_QUOTED):(j(e,"Unquoted attribute value"),e.state=S.ATTRIB_VALUE_UNQUOTED,e.attribValue=o);continue;case S.ATTRIB_VALUE_QUOTED:if(o!==e.q){"&"===o?e.state=S.ATTRIB_VALUE_ENTITY_Q:e.attribValue+=o;continue}k(e),e.q="",e.state=S.ATTRIB_VALUE_CLOSED;continue;case S.ATTRIB_VALUE_CLOSED:g(o)?e.state=S.ATTRIB:">"===o?P(e):"/"===o?e.state=S.OPEN_TAG_SLASH:b(f,o)?(j(e,"No whitespace between attributes"),e.attribName=o,e.attribValue="",e.state=S.ATTRIB_NAME):j(e,"Invalid attribute name");continue;case S.ATTRIB_VALUE_UNQUOTED:if(!v(o)){"&"===o?e.state=S.ATTRIB_VALUE_ENTITY_U:e.attribValue+=o;continue}k(e),">"===o?P(e):e.state=S.ATTRIB;continue;case S.CLOSE_TAG:if(e.tagName)">"===o?U(e):b(d,o)?e.tagName+=o:e.script?(e.script+="</"+e.tagName,e.tagName="",e.state=S.SCRIPT):(g(o)||j(e,"Invalid tagname in closing tag"),e.state=S.CLOSE_TAG_SAW_WHITE);else{if(g(o))continue;w(f,o)?e.script?(e.script+="</"+o,e.state=S.SCRIPT):j(e,"Invalid tagname in closing tag."):e.tagName=o}continue;case S.CLOSE_TAG_SAW_WHITE:if(g(o))continue;">"===o?U(e):j(e,"Invalid characters in closing tag");continue;case S.TEXT_ENTITY:case S.ATTRIB_VALUE_ENTITY_Q:case S.ATTRIB_VALUE_ENTITY_U:var l,h;switch(e.state){case S.TEXT_ENTITY:l=S.TEXT,h="textNode";break;case S.ATTRIB_VALUE_ENTITY_Q:l=S.ATTRIB_VALUE_QUOTED,h="attribValue";break;case S.ATTRIB_VALUE_ENTITY_U:l=S.ATTRIB_VALUE_UNQUOTED,h="attribValue"}";"===o?(e[h]+=F(e),e.entity="",e.state=l):b(e.entity.length?m:y,o)?e.entity+=o:(j(e,"Invalid character in entity name"),e[h]+="&"+e.entity+o,e.entity="",e.state=l);continue;default:throw new Error(e,"Unknown state: "+e.state)}e.position>=e.bufferCheckPosition&&function(t){for(var e=Math.max(r.MAX_BUFFER_LENGTH,10),n=0,o=0,s=i.length;o<s;o++){var a=t[i[o]].length;if(a>e)switch(i[o]){case"textNode":D(t);break;case"cdata":I(t,"oncdata",t.cdata),t.cdata="";break;case"script":I(t,"onscript",t.script),t.script="";break;default:A(t,"Max buffer length exceeded: "+i[o])}n=Math.max(n,a)}var u=r.MAX_BUFFER_LENGTH-n;t.bufferCheckPosition=u+t.position}(e);return e}
/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){var t;D(t=this),""!==t.cdata&&(I(t,"oncdata",t.cdata),t.cdata=""),""!==t.script&&(I(t,"onscript",t.script),t.script="")}};try{n=t("stream").Stream}catch(t){n=function(){}}var s=r.EVENTS.filter((function(t){return"error"!==t&&"end"!==t}));function a(t,e){if(!(this instanceof a))return new a(t,e);n.apply(this),this._parser=new o(t,e),this.writable=!0,this.readable=!0;var r=this;this._parser.onend=function(){r.emit("end")},this._parser.onerror=function(t){r.emit("error",t),r._parser.error=null},this._decoder=null,s.forEach((function(t){Object.defineProperty(r,"on"+t,{get:function(){return r._parser["on"+t]},set:function(e){if(!e)return r.removeAllListeners(t),r._parser["on"+t]=e,e;r.on(t,e)},enumerable:!0,configurable:!1})}))}a.prototype=Object.create(n.prototype,{constructor:{value:a}}),a.prototype.write=function(r){if("function"==typeof e&&"function"==typeof e.isBuffer&&e.isBuffer(r)){if(!this._decoder){var n=t("string_decoder").StringDecoder;this._decoder=new n("utf8")}r=this._decoder.write(r)}return this._parser.write(r.toString()),this.emit("data",r),!0},a.prototype.end=function(t){return t&&t.length&&this.write(t),this._parser.end(),!0},a.prototype.on=function(t,e){var r=this;return r._parser["on"+t]||-1===s.indexOf(t)||(r._parser["on"+t]=function(){var e=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);e.splice(0,0,t),r.emit.apply(r,e)}),n.prototype.on.call(r,t,e)};var u="[CDATA[",c="DOCTYPE",l="http://www.w3.org/XML/1998/namespace",h="http://www.w3.org/2000/xmlns/",p={xml:l,xmlns:h},f=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,d=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,y=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,m=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function g(t){return" "===t||"\n"===t||"\r"===t||"\t"===t}function _(t){return'"'===t||"'"===t}function v(t){return">"===t||g(t)}function b(t,e){return t.test(e)}function w(t,e){return!b(t,e)}var T,E,O,S=0;for(var x in r.STATE={BEGIN:S++,BEGIN_WHITESPACE:S++,TEXT:S++,TEXT_ENTITY:S++,OPEN_WAKA:S++,SGML_DECL:S++,SGML_DECL_QUOTED:S++,DOCTYPE:S++,DOCTYPE_QUOTED:S++,DOCTYPE_DTD:S++,DOCTYPE_DTD_QUOTED:S++,COMMENT_STARTING:S++,COMMENT:S++,COMMENT_ENDING:S++,COMMENT_ENDED:S++,CDATA:S++,CDATA_ENDING:S++,CDATA_ENDING_2:S++,PROC_INST:S++,PROC_INST_BODY:S++,PROC_INST_ENDING:S++,OPEN_TAG:S++,OPEN_TAG_SLASH:S++,ATTRIB:S++,ATTRIB_NAME:S++,ATTRIB_NAME_SAW_WHITE:S++,ATTRIB_VALUE:S++,ATTRIB_VALUE_QUOTED:S++,ATTRIB_VALUE_CLOSED:S++,ATTRIB_VALUE_UNQUOTED:S++,ATTRIB_VALUE_ENTITY_Q:S++,ATTRIB_VALUE_ENTITY_U:S++,CLOSE_TAG:S++,CLOSE_TAG_SAW_WHITE:S++,SCRIPT:S++,SCRIPT_ENDING:S++},r.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},r.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(r.ENTITIES).forEach((function(t){var e=r.ENTITIES[t],n="number"==typeof e?String.fromCharCode(e):e;r.ENTITIES[t]=n})),r.STATE)r.STATE[r.STATE[x]]=x;function N(t,e,r){t[e]&&t[e](r)}function I(t,e,r){t.textNode&&D(t),N(t,e,r)}function D(t){t.textNode=C(t.opt,t.textNode),t.textNode&&N(t,"ontext",t.textNode),t.textNode=""}function C(t,e){return t.trim&&(e=e.trim()),t.normalize&&(e=e.replace(/\s+/g," ")),e}function A(t,e){return D(t),t.trackPosition&&(e+="\nLine: "+t.line+"\nColumn: "+t.column+"\nChar: "+t.c),e=new Error(e),t.error=e,N(t,"onerror",e),t}function L(t){return t.sawRoot&&!t.closedRoot&&j(t,"Unclosed root tag"),t.state!==S.BEGIN&&t.state!==S.BEGIN_WHITESPACE&&t.state!==S.TEXT&&A(t,"Unexpected end"),D(t),t.c="",t.closed=!0,N(t,"onend"),o.call(t,t.strict,t.opt),t}function j(t,e){if("object"!=typeof t||!(t instanceof o))throw new Error("bad call to strictFail");t.strict&&A(t,e)}function M(t){t.strict||(t.tagName=t.tagName[t.looseCase]());var e=t.tags[t.tags.length-1]||t,r=t.tag={name:t.tagName,attributes:{}};t.opt.xmlns&&(r.ns=e.ns),t.attribList.length=0,I(t,"onopentagstart",r)}function R(t,e){var r=t.indexOf(":")<0?["",t]:t.split(":"),n=r[0],i=r[1];return e&&"xmlns"===t&&(n="xmlns",i=""),{prefix:n,local:i}}function k(t){if(t.strict||(t.attribName=t.attribName[t.looseCase]()),-1!==t.attribList.indexOf(t.attribName)||t.tag.attributes.hasOwnProperty(t.attribName))t.attribName=t.attribValue="";else{if(t.opt.xmlns){var e=R(t.attribName,!0),r=e.prefix,n=e.local;if("xmlns"===r)if("xml"===n&&t.attribValue!==l)j(t,"xml: prefix must be bound to "+l+"\nActual: "+t.attribValue);else if("xmlns"===n&&t.attribValue!==h)j(t,"xmlns: prefix must be bound to "+h+"\nActual: "+t.attribValue);else{var i=t.tag,o=t.tags[t.tags.length-1]||t;i.ns===o.ns&&(i.ns=Object.create(o.ns)),i.ns[n]=t.attribValue}t.attribList.push([t.attribName,t.attribValue])}else t.tag.attributes[t.attribName]=t.attribValue,I(t,"onattribute",{name:t.attribName,value:t.attribValue});t.attribName=t.attribValue=""}}function P(t,e){if(t.opt.xmlns){var r=t.tag,n=R(t.tagName);r.prefix=n.prefix,r.local=n.local,r.uri=r.ns[n.prefix]||"",r.prefix&&!r.uri&&(j(t,"Unbound namespace prefix: "+JSON.stringify(t.tagName)),r.uri=n.prefix);var i=t.tags[t.tags.length-1]||t;r.ns&&i.ns!==r.ns&&Object.keys(r.ns).forEach((function(e){I(t,"onopennamespace",{prefix:e,uri:r.ns[e]})}));for(var o=0,s=t.attribList.length;o<s;o++){var a=t.attribList[o],u=a[0],c=a[1],l=R(u,!0),h=l.prefix,p=l.local,f=""===h?"":r.ns[h]||"",d={name:u,value:c,prefix:h,local:p,uri:f};h&&"xmlns"!==h&&!f&&(j(t,"Unbound namespace prefix: "+JSON.stringify(h)),d.uri=h),t.tag.attributes[u]=d,I(t,"onattribute",d)}t.attribList.length=0}t.tag.isSelfClosing=!!e,t.sawRoot=!0,t.tags.push(t.tag),I(t,"onopentag",t.tag),e||(t.noscript||"script"!==t.tagName.toLowerCase()?t.state=S.TEXT:t.state=S.SCRIPT,t.tag=null,t.tagName=""),t.attribName=t.attribValue="",t.attribList.length=0}function U(t){if(!t.tagName)return j(t,"Weird empty close tag."),t.textNode+="</>",void(t.state=S.TEXT);if(t.script){if("script"!==t.tagName)return t.script+="</"+t.tagName+">",t.tagName="",void(t.state=S.SCRIPT);I(t,"onscript",t.script),t.script=""}var e=t.tags.length,r=t.tagName;t.strict||(r=r[t.looseCase]());for(var n=r;e--;){if(t.tags[e].name===n)break;j(t,"Unexpected close tag")}if(e<0)return j(t,"Unmatched closing tag: "+t.tagName),t.textNode+="</"+t.tagName+">",void(t.state=S.TEXT);t.tagName=r;for(var i=t.tags.length;i-- >e;){var o=t.tag=t.tags.pop();t.tagName=t.tag.name,I(t,"onclosetag",t.tagName);var s={};for(var a in o.ns)s[a]=o.ns[a];var u=t.tags[t.tags.length-1]||t;t.opt.xmlns&&o.ns!==u.ns&&Object.keys(o.ns).forEach((function(e){var r=o.ns[e];I(t,"onclosenamespace",{prefix:e,uri:r})}))}0===e&&(t.closedRoot=!0),t.tagName=t.attribValue=t.attribName="",t.attribList.length=0,t.state=S.TEXT}function F(t){var e,r=t.entity,n=r.toLowerCase(),i="";return t.ENTITIES[r]?t.ENTITIES[r]:t.ENTITIES[n]?t.ENTITIES[n]:("#"===(r=n).charAt(0)&&("x"===r.charAt(1)?(r=r.slice(2),i=(e=parseInt(r,16)).toString(16)):(r=r.slice(1),i=(e=parseInt(r,10)).toString(10))),r=r.replace(/^0+/,""),isNaN(e)||i.toLowerCase()!==r?(j(t,"Invalid character entity"),"&"+t.entity+";"):String.fromCodePoint(e))}function q(t,e){"<"===e?(t.state=S.OPEN_WAKA,t.startTagPosition=t.position):g(e)||(j(t,"Non-whitespace before first tag."),t.textNode=e,t.state=S.TEXT)}function B(t,e){var r="";return e<t.length&&(r=t.charAt(e)),r}S=r.STATE,String.fromCodePoint||(T=String.fromCharCode,E=Math.floor,O=function(){var t,e,r=[],n=-1,i=arguments.length;if(!i)return"";for(var o="";++n<i;){var s=Number(arguments[n]);if(!isFinite(s)||s<0||s>1114111||E(s)!==s)throw RangeError("Invalid code point: "+s);s<=65535?r.push(s):(t=55296+((s-=65536)>>10),e=s%1024+56320,r.push(t,e)),(n+1===i||r.length>16384)&&(o+=T.apply(null,r),r.length=0)}return o},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:O,configurable:!0,writable:!0}):String.fromCodePoint=O)}(void 0===r?this.sax={}:r)}).call(this,t("buffer").Buffer)},{buffer:30,stream:67,string_decoder:68}],67:[function(t,e,r){e.exports=i;var n=t("events").EventEmitter;function i(){n.call(this)}t("inherits")(i,n),i.Readable=t("readable-stream/readable.js"),i.Writable=t("readable-stream/writable.js"),i.Duplex=t("readable-stream/duplex.js"),i.Transform=t("readable-stream/transform.js"),i.PassThrough=t("readable-stream/passthrough.js"),i.Stream=i,i.prototype.pipe=function(t,e){var r=this;function i(e){t.writable&&!1===t.write(e)&&r.pause&&r.pause()}function o(){r.readable&&r.resume&&r.resume()}r.on("data",i),t.on("drain",o),t._isStdio||e&&!1===e.end||(r.on("end",a),r.on("close",u));var s=!1;function a(){s||(s=!0,t.end())}function u(){s||(s=!0,"function"==typeof t.destroy&&t.destroy())}function c(t){if(l(),0===n.listenerCount(this,"error"))throw t}function l(){r.removeListener("data",i),t.removeListener("drain",o),r.removeListener("end",a),r.removeListener("close",u),r.removeListener("error",c),t.removeListener("error",c),r.removeListener("end",l),r.removeListener("close",l),t.removeListener("close",l)}return r.on("error",c),t.on("error",c),r.on("end",l),r.on("close",l),t.on("close",l),t.emit("pipe",r),t}},{events:37,inherits:39,"readable-stream/duplex.js":52,"readable-stream/passthrough.js":61,"readable-stream/readable.js":62,"readable-stream/transform.js":63,"readable-stream/writable.js":64}],68:[function(t,e,r){"use strict";var n=t("safe-buffer").Buffer,i=n.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(n.isEncoding===i||!i(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=u,this.end=c,e=4;break;case"utf8":this.fillLast=a,e=4;break;case"base64":this.text=l,this.end=h,e=3;break;default:return this.write=p,void(this.end=f)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(e)}function s(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function a(t){var e=this.lastTotal-this.lastNeed,r=function(t,e,r){if(128!=(192&e[0]))return t.lastNeed=0,"";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,""}}(this,t);return void 0!==r?r:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function u(t,e){if((t.length-e)%2==0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function c(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function l(t,e){var r=(t.length-e)%3;return 0===r?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function h(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function p(t){return t.toString(this.encoding)}function f(t){return t&&t.length?this.write(t):""}r.StringDecoder=o,o.prototype.write=function(t){if(0===t.length)return"";var e,r;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""},o.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"":e},o.prototype.text=function(t,e){var r=function(t,e,r){var n=e.length-1;if(n<r)return 0;var i=s(e[n]);if(i>=0)return i>0&&(t.lastNeed=i-1),i;if(--n<r||-2===i)return 0;if(i=s(e[n]),i>=0)return i>0&&(t.lastNeed=i-2),i;if(--n<r||-2===i)return 0;if(i=s(e[n]),i>=0)return i>0&&(2===i?i=0:t.lastNeed=i-3),i;return 0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)},o.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},{"safe-buffer":65}],69:[function(t,e,r){(function(e,n){var i=t("process/browser.js").nextTick,o=Function.prototype.apply,s=Array.prototype.slice,a={},u=0;function c(t,e){this._id=t,this._clearFn=e}r.setTimeout=function(){return new c(o.call(setTimeout,window,arguments),clearTimeout)},r.setInterval=function(){return new c(o.call(setInterval,window,arguments),clearInterval)},r.clearTimeout=r.clearInterval=function(t){t.close()},c.prototype.unref=c.prototype.ref=function(){},c.prototype.close=function(){this._clearFn.call(window,this._id)},r.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},r.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},r._unrefActive=r.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},r.setImmediate="function"==typeof e?e:function(t){var e=u++,n=!(arguments.length<2)&&s.call(arguments,1);return a[e]=!0,i((function(){a[e]&&(n?t.apply(null,n):t.call(null),r.clearImmediate(e))})),e},r.clearImmediate="function"==typeof n?n:function(t){delete a[t]}}).call(this,t("timers").setImmediate,t("timers").clearImmediate)},{"process/browser.js":46,timers:69}],70:[function(t,e,r){(function(t){function r(e){try{if(!t.localStorage)return!1}catch(t){return!1}var r=t.localStorage[e];return null!=r&&"true"===String(r).toLowerCase()}e.exports=function(t,e){if(r("noDeprecation"))return t;var n=!1;return function(){if(!n){if(r("throwDeprecation"))throw new Error(e);r("traceDeprecation")?console.trace(e):console.warn(e),n=!0}return t.apply(this,arguments)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],71:[function(t,e,r){e.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},{}],72:[function(t,e,r){(function(e,n){var i=/%[sdj%]/g;r.format=function(t){if(!g(t)){for(var e=[],r=0;r<arguments.length;r++)e.push(a(arguments[r]));return e.join(" ")}r=1;for(var n=arguments,o=n.length,s=String(t).replace(i,(function(t){if("%%"===t)return"%";if(r>=o)return t;switch(t){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(t){return"[Circular]"}default:return t}})),u=n[r];r<o;u=n[++r])y(u)||!b(u)?s+=" "+u:s+=" "+a(u);return s},r.deprecate=function(t,i){if(_(n.process))return function(){return r.deprecate(t,i).apply(this,arguments)};if(!0===e.noDeprecation)return t;var o=!1;return function(){if(!o){if(e.throwDeprecation)throw new Error(i);e.traceDeprecation?console.trace(i):console.error(i),o=!0}return t.apply(this,arguments)}};var o,s={};function a(t,e){var n={seen:[],stylize:c};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),d(e)?n.showHidden=e:e&&r._extend(n,e),_(n.showHidden)&&(n.showHidden=!1),_(n.depth)&&(n.depth=2),_(n.colors)&&(n.colors=!1),_(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=u),l(n,t,n.depth)}function u(t,e){var r=a.styles[e];return r?"["+a.colors[r][0]+"m"+t+"["+a.colors[r][1]+"m":t}function c(t,e){return t}function l(t,e,n){if(t.customInspect&&e&&E(e.inspect)&&e.inspect!==r.inspect&&(!e.constructor||e.constructor.prototype!==e)){var i=e.inspect(n,t);return g(i)||(i=l(t,i,n)),i}var o=function(t,e){if(_(e))return t.stylize("undefined","undefined");if(g(e)){var r="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(r,"string")}if(m(e))return t.stylize(""+e,"number");if(d(e))return t.stylize(""+e,"boolean");if(y(e))return t.stylize("null","null")}(t,e);if(o)return o;var s=Object.keys(e),a=function(t){var e={};return t.forEach((function(t,r){e[t]=!0})),e}(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(e)),T(e)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return h(e);if(0===s.length){if(E(e)){var u=e.name?": "+e.name:"";return t.stylize("[Function"+u+"]","special")}if(v(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(w(e))return t.stylize(Date.prototype.toString.call(e),"date");if(T(e))return h(e)}var c,b="",O=!1,S=["{","}"];(f(e)&&(O=!0,S=["[","]"]),E(e))&&(b=" [Function"+(e.name?": "+e.name:"")+"]");return v(e)&&(b=" "+RegExp.prototype.toString.call(e)),w(e)&&(b=" "+Date.prototype.toUTCString.call(e)),T(e)&&(b=" "+h(e)),0!==s.length||O&&0!=e.length?n<0?v(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special"):(t.seen.push(e),c=O?function(t,e,r,n,i){for(var o=[],s=0,a=e.length;s<a;++s)N(e,String(s))?o.push(p(t,e,r,n,String(s),!0)):o.push("");return i.forEach((function(i){i.match(/^\d+$/)||o.push(p(t,e,r,n,i,!0))})),o}(t,e,n,a,s):s.map((function(r){return p(t,e,n,a,r,O)})),t.seen.pop(),function(t,e,r){var n=t.reduce((function(t,e){return e.indexOf("\n")>=0&&0,t+e.replace(/\u001b\[\d\d?m/g,"").length+1}),0);if(n>60)return r[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+r[1];return r[0]+e+" "+t.join(", ")+" "+r[1]}(c,b,S)):S[0]+b+S[1]}function h(t){return"["+Error.prototype.toString.call(t)+"]"}function p(t,e,r,n,i,o){var s,a,u;if((u=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]}).get?a=u.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):u.set&&(a=t.stylize("[Setter]","special")),N(n,i)||(s="["+i+"]"),a||(t.seen.indexOf(u.value)<0?(a=y(r)?l(t,u.value,null):l(t,u.value,r-1)).indexOf("\n")>-1&&(a=o?a.split("\n").map((function(t){return"  "+t})).join("\n").substr(2):"\n"+a.split("\n").map((function(t){return"   "+t})).join("\n")):a=t.stylize("[Circular]","special")),_(s)){if(o&&i.match(/^\d+$/))return a;(s=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+a}function f(t){return Array.isArray(t)}function d(t){return"boolean"==typeof t}function y(t){return null===t}function m(t){return"number"==typeof t}function g(t){return"string"==typeof t}function _(t){return void 0===t}function v(t){return b(t)&&"[object RegExp]"===O(t)}function b(t){return"object"==typeof t&&null!==t}function w(t){return b(t)&&"[object Date]"===O(t)}function T(t){return b(t)&&("[object Error]"===O(t)||t instanceof Error)}function E(t){return"function"==typeof t}function O(t){return Object.prototype.toString.call(t)}function S(t){return t<10?"0"+t.toString(10):t.toString(10)}r.debuglog=function(t){if(_(o)&&(o=e.env.NODE_DEBUG||""),t=t.toUpperCase(),!s[t])if(new RegExp("\\b"+t+"\\b","i").test(o)){var n=e.pid;s[t]=function(){var e=r.format.apply(r,arguments);console.error("%s %d: %s",t,n,e)}}else s[t]=function(){};return s[t]},r.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},r.isArray=f,r.isBoolean=d,r.isNull=y,r.isNullOrUndefined=function(t){return null==t},r.isNumber=m,r.isString=g,r.isSymbol=function(t){return"symbol"==typeof t},r.isUndefined=_,r.isRegExp=v,r.isObject=b,r.isDate=w,r.isError=T,r.isFunction=E,r.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},r.isBuffer=t("./support/isBuffer");var x=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function N(t,e){return Object.prototype.hasOwnProperty.call(t,e)}r.log=function(){var t,e;console.log("%s - %s",(t=new Date,e=[S(t.getHours()),S(t.getMinutes()),S(t.getSeconds())].join(":"),[t.getDate(),x[t.getMonth()],e].join(" ")),r.format.apply(r,arguments))},r.inherits=t("inherits"),r._extend=function(t,e){if(!e||!b(e))return t;for(var r=Object.keys(e),n=r.length;n--;)t[r[n]]=e[r[n]];return t}}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":71,_process:46,inherits:39}],73:[function(t,e,r){(function(){"use strict";r.stripBOM=function(t){return"\ufeff"===t[0]?t.substring(1):t}}).call(this)},{}],74:[function(t,e,r){(function(){"use strict";var e,n,i,o,s,a={}.hasOwnProperty;e=t("xmlbuilder"),n=t("./defaults").defaults,o=function(t){return"string"==typeof t&&(t.indexOf("&")>=0||t.indexOf(">")>=0||t.indexOf("<")>=0)},s=function(t){return"<![CDATA["+i(t)+"]]>"},i=function(t){return t.replace("]]>","]]]]><![CDATA[>")},r.Builder=function(){function t(t){var e,r,i;for(e in this.options={},r=n[.2])a.call(r,e)&&(i=r[e],this.options[e]=i);for(e in t)a.call(t,e)&&(i=t[e],this.options[e]=i)}return t.prototype.buildObject=function(t){var r,i,u,c,l,h;return r=this.options.attrkey,i=this.options.charkey,1===Object.keys(t).length&&this.options.rootName===n[.2].rootName?t=t[l=Object.keys(t)[0]]:l=this.options.rootName,h=this,u=function(t,e){var n,c,l,p,f,d;if("object"!=typeof e)h.options.cdata&&o(e)?t.raw(s(e)):t.txt(e);else if(Array.isArray(e)){for(p in e)if(a.call(e,p))for(f in c=e[p])l=c[f],t=u(t.ele(f),l).up()}else for(f in e)if(a.call(e,f))if(c=e[f],f===r){if("object"==typeof c)for(n in c)d=c[n],t=t.att(n,d)}else if(f===i)t=h.options.cdata&&o(c)?t.raw(s(c)):t.txt(c);else if(Array.isArray(c))for(p in c)a.call(c,p)&&(t="string"==typeof(l=c[p])?h.options.cdata&&o(l)?t.ele(f).raw(s(l)).up():t.ele(f,l).up():u(t.ele(f),l).up());else"object"==typeof c?t=u(t.ele(f),c).up():"string"==typeof c&&h.options.cdata&&o(c)?t=t.ele(f).raw(s(c)).up():(null==c&&(c=""),t=t.ele(f,c.toString()).up());return t},c=e.create(l,this.options.xmldec,this.options.doctype,{headless:this.options.headless,allowSurrogateChars:this.options.allowSurrogateChars}),u(c,t).end(this.options.renderOpts)},t}()}).call(this)},{"./defaults":75,xmlbuilder:111}],75:[function(t,e,r){(function(){r.defaults={.1:{explicitCharkey:!1,trim:!0,normalize:!0,normalizeTags:!1,attrkey:"@",charkey:"#",explicitArray:!1,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!1,validator:null,xmlns:!1,explicitChildren:!1,childkey:"@@",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,emptyTag:""},.2:{explicitCharkey:!1,trim:!1,normalize:!1,normalizeTags:!1,attrkey:"$",charkey:"_",explicitArray:!0,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!0,validator:null,xmlns:!1,explicitChildren:!1,preserveChildrenOrder:!1,childkey:"$$",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,rootName:"root",xmldec:{version:"1.0",encoding:"UTF-8",standalone:!0},doctype:null,renderOpts:{pretty:!0,indent:"  ",newline:"\n"},headless:!1,chunkSize:1e4,emptyTag:"",cdata:!1}}}).call(this)},{}],76:[function(t,e,r){(function(){"use strict";var e,n,i,o,s,a,u,c,l=function(t,e){return function(){return t.apply(e,arguments)}},h={}.hasOwnProperty;u=t("sax"),i=t("events"),e=t("./bom"),a=t("./processors"),c=t("timers").setImmediate,n=t("./defaults").defaults,o=function(t){return"object"==typeof t&&null!=t&&0===Object.keys(t).length},s=function(t,e,r){var n,i;for(n=0,i=t.length;n<i;n++)e=(0,t[n])(e,r);return e},r.Parser=function(t){function i(t){var e,i,o;if(this.parseStringPromise=l(this.parseStringPromise,this),this.parseString=l(this.parseString,this),this.reset=l(this.reset,this),this.assignOrPush=l(this.assignOrPush,this),this.processAsync=l(this.processAsync,this),!(this instanceof r.Parser))return new r.Parser(t);for(e in this.options={},i=n[.2])h.call(i,e)&&(o=i[e],this.options[e]=o);for(e in t)h.call(t,e)&&(o=t[e],this.options[e]=o);this.options.xmlns&&(this.options.xmlnskey=this.options.attrkey+"ns"),this.options.normalizeTags&&(this.options.tagNameProcessors||(this.options.tagNameProcessors=[]),this.options.tagNameProcessors.unshift(a.normalize)),this.reset()}return function(t,e){for(var r in e)h.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(i,t),i.prototype.processAsync=function(){var t,e;try{return this.remaining.length<=this.options.chunkSize?(t=this.remaining,this.remaining="",this.saxParser=this.saxParser.write(t),this.saxParser.close()):(t=this.remaining.substr(0,this.options.chunkSize),this.remaining=this.remaining.substr(this.options.chunkSize,this.remaining.length),this.saxParser=this.saxParser.write(t),c(this.processAsync))}catch(t){if(e=t,!this.saxParser.errThrown)return this.saxParser.errThrown=!0,this.emit(e)}},i.prototype.assignOrPush=function(t,e,r){return e in t?(t[e]instanceof Array||(t[e]=[t[e]]),t[e].push(r)):this.options.explicitArray?t[e]=[r]:t[e]=r},i.prototype.reset=function(){var t,e,r,n,i;return this.removeAllListeners(),this.saxParser=u.parser(this.options.strict,{trim:!1,normalize:!1,xmlns:this.options.xmlns}),this.saxParser.errThrown=!1,this.saxParser.onerror=(i=this,function(t){if(i.saxParser.resume(),!i.saxParser.errThrown)return i.saxParser.errThrown=!0,i.emit("error",t)}),this.saxParser.onend=function(t){return function(){if(!t.saxParser.ended)return t.saxParser.ended=!0,t.emit("end",t.resultObject)}}(this),this.saxParser.ended=!1,this.EXPLICIT_CHARKEY=this.options.explicitCharkey,this.resultObject=null,n=[],t=this.options.attrkey,e=this.options.charkey,this.saxParser.onopentag=function(r){return function(i){var o,a,u,c,l;if((u=Object.create(null))[e]="",!r.options.ignoreAttrs)for(o in l=i.attributes)h.call(l,o)&&(t in u||r.options.mergeAttrs||(u[t]=Object.create(null)),a=r.options.attrValueProcessors?s(r.options.attrValueProcessors,i.attributes[o],o):i.attributes[o],c=r.options.attrNameProcessors?s(r.options.attrNameProcessors,o):o,r.options.mergeAttrs?r.assignOrPush(u,c,a):u[t][c]=a);return u["#name"]=r.options.tagNameProcessors?s(r.options.tagNameProcessors,i.name):i.name,r.options.xmlns&&(u[r.options.xmlnskey]={uri:i.uri,local:i.local}),n.push(u)}}(this),this.saxParser.onclosetag=function(t){return function(){var r,i,a,u,c,l,p,f,d,y;if(l=n.pop(),c=l["#name"],t.options.explicitChildren&&t.options.preserveChildrenOrder||delete l["#name"],!0===l.cdata&&(r=l.cdata,delete l.cdata),d=n[n.length-1],l[e].match(/^\s*$/)&&!r?(i=l[e],delete l[e]):(t.options.trim&&(l[e]=l[e].trim()),t.options.normalize&&(l[e]=l[e].replace(/\s{2,}/g," ").trim()),l[e]=t.options.valueProcessors?s(t.options.valueProcessors,l[e],c):l[e],1===Object.keys(l).length&&e in l&&!t.EXPLICIT_CHARKEY&&(l=l[e])),o(l)&&(l="function"==typeof t.options.emptyTag?t.options.emptyTag():""!==t.options.emptyTag?t.options.emptyTag:i),null!=t.options.validator&&(y="/"+function(){var t,e,r;for(r=[],t=0,e=n.length;t<e;t++)u=n[t],r.push(u["#name"]);return r}().concat(c).join("/"),function(){var e;try{return l=t.options.validator(y,d&&d[c],l)}catch(r){return e=r,t.emit("error",e)}}()),t.options.explicitChildren&&!t.options.mergeAttrs&&"object"==typeof l)if(t.options.preserveChildrenOrder){if(d){for(a in d[t.options.childkey]=d[t.options.childkey]||[],p=Object.create(null),l)h.call(l,a)&&(p[a]=l[a]);d[t.options.childkey].push(p),delete l["#name"],1===Object.keys(l).length&&e in l&&!t.EXPLICIT_CHARKEY&&(l=l[e])}}else u=Object.create(null),t.options.attrkey in l&&(u[t.options.attrkey]=l[t.options.attrkey],delete l[t.options.attrkey]),!t.options.charsAsChildren&&t.options.charkey in l&&(u[t.options.charkey]=l[t.options.charkey],delete l[t.options.charkey]),Object.getOwnPropertyNames(l).length>0&&(u[t.options.childkey]=l),l=u;return n.length>0?t.assignOrPush(d,c,l):(t.options.explicitRoot&&(f=l,(l=Object.create(null))[c]=f),t.resultObject=l,t.saxParser.ended=!0,t.emit("end",t.resultObject))}}(this),r=function(t){return function(r){var i,o;if(o=n[n.length-1])return o[e]+=r,t.options.explicitChildren&&t.options.preserveChildrenOrder&&t.options.charsAsChildren&&(t.options.includeWhiteChars||""!==r.replace(/\\n/g,"").trim())&&(o[t.options.childkey]=o[t.options.childkey]||[],(i={"#name":"__text__"})[e]=r,t.options.normalize&&(i[e]=i[e].replace(/\s{2,}/g," ").trim()),o[t.options.childkey].push(i)),o}}(this),this.saxParser.ontext=r,this.saxParser.oncdata=function(t){var e;if(e=r(t))return e.cdata=!0}},i.prototype.parseString=function(t,r){var n;null!=r&&"function"==typeof r&&(this.on("end",(function(t){return this.reset(),r(null,t)})),this.on("error",(function(t){return this.reset(),r(t)})));try{return""===(t=t.toString()).trim()?(this.emit("end",null),!0):(t=e.stripBOM(t),this.options.async?(this.remaining=t,c(this.processAsync),this.saxParser):this.saxParser.write(t).close())}catch(t){if(n=t,!this.saxParser.errThrown&&!this.saxParser.ended)return this.emit("error",n),this.saxParser.errThrown=!0;if(this.saxParser.ended)throw n}},i.prototype.parseStringPromise=function(t){return new Promise((e=this,function(r,n){return e.parseString(t,(function(t,e){return t?n(t):r(e)}))}));var e},i}(i),r.parseString=function(t,e,n){var i,o;return null!=n?("function"==typeof n&&(i=n),"object"==typeof e&&(o=e)):("function"==typeof e&&(i=e),o={}),new r.Parser(o).parseString(t,i)},r.parseStringPromise=function(t,e){var n;return"object"==typeof e&&(n=e),new r.Parser(n).parseStringPromise(t)}}).call(this)},{"./bom":73,"./defaults":75,"./processors":77,events:37,sax:66,timers:69}],77:[function(t,e,r){(function(){"use strict";var t;t=new RegExp(/(?!xmlns)^.*:/),r.normalize=function(t){return t.toLowerCase()},r.firstCharLowerCase=function(t){return t.charAt(0).toLowerCase()+t.slice(1)},r.stripPrefix=function(e){return e.replace(t,"")},r.parseNumbers=function(t){return isNaN(t)||(t=t%1==0?parseInt(t,10):parseFloat(t)),t},r.parseBooleans=function(t){return/^(?:true|false)$/i.test(t)&&(t="true"===t.toLowerCase()),t}}).call(this)},{}],78:[function(t,e,r){(function(){"use strict";var e,n,i,o,s={}.hasOwnProperty;n=t("./defaults"),e=t("./builder"),i=t("./parser"),o=t("./processors"),r.defaults=n.defaults,r.processors=o,r.ValidationError=function(t){function e(t){this.message=t}return function(t,e){for(var r in e)s.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(e,Error),e}(),r.Builder=e.Builder,r.Parser=i.Parser,r.parseString=i.parseString,r.parseStringPromise=i.parseStringPromise}).call(this)},{"./builder":74,"./defaults":75,"./parser":76,"./processors":77}],79:[function(t,e,r){(function(){e.exports={Disconnected:1,Preceding:2,Following:4,Contains:8,ContainedBy:16,ImplementationSpecific:32}}).call(this)},{}],80:[function(t,e,r){(function(){e.exports={Element:1,Attribute:2,Text:3,CData:4,EntityReference:5,EntityDeclaration:6,ProcessingInstruction:7,Comment:8,Document:9,DocType:10,DocumentFragment:11,NotationDeclaration:12,Declaration:201,Raw:202,AttributeDeclaration:203,ElementDeclaration:204,Dummy:205}}).call(this)},{}],81:[function(t,e,r){(function(){var t,r,n,i,o,s,a,u=[].slice,c={}.hasOwnProperty;t=function(){var t,e,r,n,i,s;if(s=arguments[0],i=2<=arguments.length?u.call(arguments,1):[],o(Object.assign))Object.assign.apply(null,arguments);else for(t=0,r=i.length;t<r;t++)if(null!=(n=i[t]))for(e in n)c.call(n,e)&&(s[e]=n[e]);return s},o=function(t){return!!t&&"[object Function]"===Object.prototype.toString.call(t)},s=function(t){var e;return!!t&&("function"==(e=typeof t)||"object"===e)},n=function(t){return o(Array.isArray)?Array.isArray(t):"[object Array]"===Object.prototype.toString.call(t)},i=function(t){var e;if(n(t))return!t.length;for(e in t)if(c.call(t,e))return!1;return!0},a=function(t){var e,r;return s(t)&&(r=Object.getPrototypeOf(t))&&(e=r.constructor)&&"function"==typeof e&&e instanceof e&&Function.prototype.toString.call(e)===Function.prototype.toString.call(Object)},r=function(t){return o(t.valueOf)?t.valueOf():t},e.exports.assign=t,e.exports.isFunction=o,e.exports.isObject=s,e.exports.isArray=n,e.exports.isEmpty=i,e.exports.isPlainObject=a,e.exports.getValue=r}).call(this)},{}],82:[function(t,e,r){(function(){e.exports={None:0,OpenTag:1,InsideTag:2,CloseTag:3}}).call(this)},{}],83:[function(t,e,r){(function(){var r;r=t("./NodeType"),t("./XMLNode"),e.exports=function(){function t(t,e,n){if(this.parent=t,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),null==e)throw new Error("Missing attribute name. "+this.debugInfo(e));this.name=this.stringify.name(e),this.value=this.stringify.attValue(n),this.type=r.Attribute,this.isId=!1,this.schemaTypeInfo=null}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(t.prototype,"ownerElement",{get:function(){return this.parent}}),Object.defineProperty(t.prototype,"textContent",{get:function(){return this.value},set:function(t){return this.value=t||""}}),Object.defineProperty(t.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(t.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(t.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(t.prototype,"specified",{get:function(){return!0}}),t.prototype.clone=function(){return Object.create(this)},t.prototype.toString=function(t){return this.options.writer.attribute(this,this.options.writer.filterOptions(t))},t.prototype.debugInfo=function(t){return null==(t=t||this.name)?"parent: <"+this.parent.name+">":"attribute: {"+t+"}, parent: <"+this.parent.name+">"},t.prototype.isEqualNode=function(t){return t.namespaceURI===this.namespaceURI&&(t.prefix===this.prefix&&(t.localName===this.localName&&t.value===this.value))},t}()}).call(this)},{"./NodeType":80,"./XMLNode":102}],84:[function(t,e,r){(function(){var r,n,i={}.hasOwnProperty;r=t("./NodeType"),n=t("./XMLCharacterData"),e.exports=function(t){function e(t,n){if(e.__super__.constructor.call(this,t),null==n)throw new Error("Missing CDATA text. "+this.debugInfo());this.name="#cdata-section",this.type=r.CData,this.value=this.stringify.cdata(n)}return function(t,e){for(var r in e)i.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(e,t),e.prototype.clone=function(){return Object.create(this)},e.prototype.toString=function(t){return this.options.writer.cdata(this,this.options.writer.filterOptions(t))},e}(n)}).call(this)},{"./NodeType":80,"./XMLCharacterData":85}],85:[function(t,e,r){(function(){var r,n={}.hasOwnProperty;r=t("./XMLNode"),e.exports=function(t){function e(t){e.__super__.constructor.call(this,t),this.value=""}return function(t,e){for(var r in e)n.call(e,r)&&(t[r]=e[r]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(e,t),Object.defineProperty(e.prototype,"data",{get:function(){return this.value},set:function(t){return this.value=t||""}}),Object.defineProperty(e.prototype,"length",{get:function(){return this.value.length}}),Object.defineProperty(e.prototype,"textContent",{get:function(){return this.value},set:function(t){return this.value=t||""}}),e.prototype.clone=function(){return Object.create(this)},e.prototype.substringData=function(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.appendData=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.insertData=function(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.deleteData=function(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.replaceData=function(t,e,r){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.isEqualNode=function(t){return!!e.__super__.isEqualNode.apply(this,arguments).isEqualNode(t)&&t.data===this.data},e}(r)}).call(this)},{"./XMLNode":102}],86:[function(t,e,r){(function(){var r,n,i={}.hasOwnProperty;r=t("./NodeType"),n=t("./XMLCharacterData"),e.exports=function(t){function e(t,n){if(e.__super__.constructor.call(this,t),null==n)throw new Error("Missing comment text. "+this.debugInfo());this.name="#comment",this.type=r.Comment,this.value=this.stringify.comment(n)}return function(t,e){for(var r in e)i.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(e,t),e.prototype.clone=function(){return Object.create(this)},e.prototype.toString=function(t){return this.options.writer.comment(this,this.options.writer.filterOptions(t))},e}(n)}).call(this)},{"./NodeType":80,"./XMLCharacterData":85}],87:[function(t,e,r){(function(){var r,n;r=t("./XMLDOMErrorHandler"),n=t("./XMLDOMStringList"),e.exports=function(){function t(){this.defaultParams={"canonical-form":!1,"cdata-sections":!1,comments:!1,"datatype-normalization":!1,"element-content-whitespace":!0,entities:!0,"error-handler":new r,infoset:!0,"validate-if-schema":!1,namespaces:!0,"namespace-declarations":!0,"normalize-characters":!1,"schema-location":"","schema-type":"","split-cdata-sections":!0,validate:!1,"well-formed":!0},this.params=Object.create(this.defaultParams)}return Object.defineProperty(t.prototype,"parameterNames",{get:function(){return new n(Object.keys(this.defaultParams))}}),t.prototype.getParameter=function(t){return this.params.hasOwnProperty(t)?this.params[t]:null},t.prototype.canSetParameter=function(t,e){return!0},t.prototype.setParameter=function(t,e){return null!=e?this.params[t]=e:delete this.params[t]},t}()}).call(this)},{"./XMLDOMErrorHandler":88,"./XMLDOMStringList":90}],88:[function(t,e,r){(function(){e.exports=function(){function t(){}return t.prototype.handleError=function(t){throw new Error(t)},t}()}).call(this)},{}],89:[function(t,e,r){(function(){e.exports=function(){function t(){}return t.prototype.hasFeature=function(t,e){return!0},t.prototype.createDocumentType=function(t,e,r){throw new Error("This DOM method is not implemented.")},t.prototype.createDocument=function(t,e,r){throw new Error("This DOM method is not implemented.")},t.prototype.createHTMLDocument=function(t){throw new Error("This DOM method is not implemented.")},t.prototype.getFeature=function(t,e){throw new Error("This DOM method is not implemented.")},t}()}).call(this)},{}],90:[function(t,e,r){(function(){e.exports=function(){function t(t){this.arr=t||[]}return Object.defineProperty(t.prototype,"length",{get:function(){return this.arr.length}}),t.prototype.item=function(t){return this.arr[t]||null},t.prototype.contains=function(t){return-1!==this.arr.indexOf(t)},t}()}).call(this)},{}],91:[function(t,e,r){(function(){var r,n,i={}.hasOwnProperty;n=t("./XMLNode"),r=t("./NodeType"),e.exports=function(t){function e(t,n,i,o,s,a){if(e.__super__.constructor.call(this,t),null==n)throw new Error("Missing DTD element name. "+this.debugInfo());if(null==i)throw new Error("Missing DTD attribute name. "+this.debugInfo(n));if(!o)throw new Error("Missing DTD attribute type. "+this.debugInfo(n));if(!s)throw new Error("Missing DTD attribute default. "+this.debugInfo(n));if(0!==s.indexOf("#")&&(s="#"+s),!s.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/))throw new Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT. "+this.debugInfo(n));if(a&&!s.match(/^(#FIXED|#DEFAULT)$/))throw new Error("Default value only applies to #FIXED or #DEFAULT. "+this.debugInfo(n));this.elementName=this.stringify.name(n),this.type=r.AttributeDeclaration,this.attributeName=this.stringify.name(i),this.attributeType=this.stringify.dtdAttType(o),a&&(this.defaultValue=this.stringify.dtdAttDefault(a)),this.defaultValueType=s}return function(t,e){for(var r in e)i.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(e,t),e.prototype.toString=function(t){return this.options.writer.dtdAttList(this,this.options.writer.filterOptions(t))},e}(n)}).call(this)},{"./NodeType":80,"./XMLNode":102}],92:[function(t,e,r){(function(){var r,n,i={}.hasOwnProperty;n=t("./XMLNode"),r=t("./NodeType"),e.exports=function(t){function e(t,n,i){if(e.__super__.constructor.call(this,t),null==n)throw new Error("Missing DTD element name. "+this.debugInfo());i||(i="(#PCDATA)"),Array.isArray(i)&&(i="("+i.join(",")+")"),this.name=this.stringify.name(n),this.type=r.ElementDeclaration,this.value=this.stringify.dtdElementValue(i)}return function(t,e){for(var r in e)i.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(e,t),e.prototype.toString=function(t){return this.options.writer.dtdElement(this,this.options.writer.filterOptions(t))},e}(n)}).call(this)},{"./NodeType":80,"./XMLNode":102}],93:[function(t,e,r){(function(){var r,n,i,o={}.hasOwnProperty;i=t("./Utility").isObject,n=t("./XMLNode"),r=t("./NodeType"),e.exports=function(t){function e(t,n,o,s){if(e.__super__.constructor.call(this,t),null==o)throw new Error("Missing DTD entity name. "+this.debugInfo(o));if(null==s)throw new Error("Missing DTD entity value. "+this.debugInfo(o));if(this.pe=!!n,this.name=this.stringify.name(o),this.type=r.EntityDeclaration,i(s)){if(!s.pubID&&!s.sysID)throw new Error("Public and/or system identifiers are required for an external entity. "+this.debugInfo(o));if(s.pubID&&!s.sysID)throw new Error("System identifier is required for a public external entity. "+this.debugInfo(o));if(this.internal=!1,null!=s.pubID&&(this.pubID=this.stringify.dtdPubID(s.pubID)),null!=s.sysID&&(this.sysID=this.stringify.dtdSysID(s.sysID)),null!=s.nData&&(this.nData=this.stringify.dtdNData(s.nData)),this.pe&&this.nData)throw new Error("Notation declaration is not allowed in a parameter entity. "+this.debugInfo(o))}else this.value=this.stringify.dtdEntityValue(s),this.internal=!0}return function(t,e){for(var r in e)o.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(e,t),Object.defineProperty(e.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(e.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(e.prototype,"notationName",{get:function(){return this.nData||null}}),Object.defineProperty(e.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(e.prototype,"xmlEncoding",{get:function(){return null}}),Object.defineProperty(e.prototype,"xmlVersion",{get:function(){return null}}),e.prototype.toString=function(t){return this.options.writer.dtdEntity(this,this.options.writer.filterOptions(t))},e}(n)}).call(this)},{"./NodeType":80,"./Utility":81,"./XMLNode":102}],94:[function(t,e,r){(function(){var r,n,i={}.hasOwnProperty;n=t("./XMLNode"),r=t("./NodeType"),e.exports=function(t){function e(t,n,i){if(e.__super__.constructor.call(this,t),null==n)throw new Error("Missing DTD notation name. "+this.debugInfo(n));if(!i.pubID&&!i.sysID)throw new Error("Public or system identifiers are required for an external entity. "+this.debugInfo(n));this.name=this.stringify.name(n),this.type=r.NotationDeclaration,null!=i.pubID&&(this.pubID=this.stringify.dtdPubID(i.pubID)),null!=i.sysID&&(this.sysID=this.stringify.dtdSysID(i.sysID))}return function(t,e){for(var r in e)i.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(e,t),Object.defineProperty(e.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(e.prototype,"systemId",{get:function(){return this.sysID}}),e.prototype.toString=function(t){return this.options.writer.dtdNotation(this,this.options.writer.filterOptions(t))},e}(n)}).call(this)},{"./NodeType":80,"./XMLNode":102}],95:[function(t,e,r){(function(){var r,n,i,o={}.hasOwnProperty;i=t("./Utility").isObject,n=t("./XMLNode"),r=t("./NodeType"),e.exports=function(t){function e(t,n,o,s){var a;e.__super__.constructor.call(this,t),i(n)&&(n=(a=n).version,o=a.encoding,s=a.standalone),n||(n="1.0"),this.type=r.Declaration,this.version=this.stringify.xmlVersion(n),null!=o&&(this.encoding=this.stringify.xmlEncoding(o)),null!=s&&(this.standalone=this.stringify.xmlStandalone(s))}return function(t,e){for(var r in e)o.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(e,t),e.prototype.toString=function(t){return this.options.writer.declaration(this,this.options.writer.filterOptions(t))},e}(n)}).call(this)},{"./NodeType":80,"./Utility":81,"./XMLNode":102}],96:[function(t,e,r){(function(){var r,n,i,o,s,a,u,c,l={}.hasOwnProperty;c=t("./Utility").isObject,u=t("./XMLNode"),r=t("./NodeType"),n=t("./XMLDTDAttList"),o=t("./XMLDTDEntity"),i=t("./XMLDTDElement"),s=t("./XMLDTDNotation"),a=t("./XMLNamedNodeMap"),e.exports=function(t){function e(t,n,i){var o,s,a,u,l,h;if(e.__super__.constructor.call(this,t),this.type=r.DocType,t.children)for(s=0,a=(u=t.children).length;s<a;s++)if((o=u[s]).type===r.Element){this.name=o.name;break}this.documentObject=t,c(n)&&(n=(l=n).pubID,i=l.sysID),null==i&&(i=(h=[n,i])[0],n=h[1]),null!=n&&(this.pubID=this.stringify.dtdPubID(n)),null!=i&&(this.sysID=this.stringify.dtdSysID(i))}return function(t,e){for(var r in e)l.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(e,t),Object.defineProperty(e.prototype,"entities",{get:function(){var t,e,n,i,o;for(i={},e=0,n=(o=this.children).length;e<n;e++)(t=o[e]).type!==r.EntityDeclaration||t.pe||(i[t.name]=t);return new a(i)}}),Object.defineProperty(e.prototype,"notations",{get:function(){var t,e,n,i,o;for(i={},e=0,n=(o=this.children).length;e<n;e++)(t=o[e]).type===r.NotationDeclaration&&(i[t.name]=t);return new a(i)}}),Object.defineProperty(e.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(e.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(e.prototype,"internalSubset",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),e.prototype.element=function(t,e){var r;return r=new i(this,t,e),this.children.push(r),this},e.prototype.attList=function(t,e,r,i,o){var s;return s=new n(this,t,e,r,i,o),this.children.push(s),this},e.prototype.entity=function(t,e){var r;return r=new o(this,!1,t,e),this.children.push(r),this},e.prototype.pEntity=function(t,e){var r;return r=new o(this,!0,t,e),this.children.push(r),this},e.prototype.notation=function(t,e){var r;return r=new s(this,t,e),this.children.push(r),this},e.prototype.toString=function(t){return this.options.writer.docType(this,this.options.writer.filterOptions(t))},e.prototype.ele=function(t,e){return this.element(t,e)},e.prototype.att=function(t,e,r,n,i){return this.attList(t,e,r,n,i)},e.prototype.ent=function(t,e){return this.entity(t,e)},e.prototype.pent=function(t,e){return this.pEntity(t,e)},e.prototype.not=function(t,e){return this.notation(t,e)},e.prototype.up=function(){return this.root()||this.documentObject},e.prototype.isEqualNode=function(t){return!!e.__super__.isEqualNode.apply(this,arguments).isEqualNode(t)&&(t.name===this.name&&(t.publicId===this.publicId&&t.systemId===this.systemId))},e}(u)}).call(this)},{"./NodeType":80,"./Utility":81,"./XMLDTDAttList":91,"./XMLDTDElement":92,"./XMLDTDEntity":93,"./XMLDTDNotation":94,"./XMLNamedNodeMap":101,"./XMLNode":102}],97:[function(t,e,r){(function(){var r,n,i,o,s,a,u,c={}.hasOwnProperty;u=t("./Utility").isPlainObject,i=t("./XMLDOMImplementation"),n=t("./XMLDOMConfiguration"),o=t("./XMLNode"),r=t("./NodeType"),a=t("./XMLStringifier"),s=t("./XMLStringWriter"),e.exports=function(t){function e(t){e.__super__.constructor.call(this,null),this.name="#document",this.type=r.Document,this.documentURI=null,this.domConfig=new n,t||(t={}),t.writer||(t.writer=new s),this.options=t,this.stringify=new a(t)}return function(t,e){for(var r in e)c.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(e,t),Object.defineProperty(e.prototype,"implementation",{value:new i}),Object.defineProperty(e.prototype,"doctype",{get:function(){var t,e,n,i;for(e=0,n=(i=this.children).length;e<n;e++)if((t=i[e]).type===r.DocType)return t;return null}}),Object.defineProperty(e.prototype,"documentElement",{get:function(){return this.rootObject||null}}),Object.defineProperty(e.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(e.prototype,"strictErrorChecking",{get:function(){return!1}}),Object.defineProperty(e.prototype,"xmlEncoding",{get:function(){return 0!==this.children.length&&this.children[0].type===r.Declaration?this.children[0].encoding:null}}),Object.defineProperty(e.prototype,"xmlStandalone",{get:function(){return 0!==this.children.length&&this.children[0].type===r.Declaration&&"yes"===this.children[0].standalone}}),Object.defineProperty(e.prototype,"xmlVersion",{get:function(){return 0!==this.children.length&&this.children[0].type===r.Declaration?this.children[0].version:"1.0"}}),Object.defineProperty(e.prototype,"URL",{get:function(){return this.documentURI}}),Object.defineProperty(e.prototype,"origin",{get:function(){return null}}),Object.defineProperty(e.prototype,"compatMode",{get:function(){return null}}),Object.defineProperty(e.prototype,"characterSet",{get:function(){return null}}),Object.defineProperty(e.prototype,"contentType",{get:function(){return null}}),e.prototype.end=function(t){var e;return e={},t?u(t)&&(e=t,t=this.options.writer):t=this.options.writer,t.document(this,t.filterOptions(e))},e.prototype.toString=function(t){return this.options.writer.document(this,this.options.writer.filterOptions(t))},e.prototype.createElement=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.createDocumentFragment=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.createTextNode=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.createComment=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.createCDATASection=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.createProcessingInstruction=function(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.createAttribute=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.createEntityReference=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.getElementsByTagName=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.importNode=function(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.createElementNS=function(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.createAttributeNS=function(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.getElementsByTagNameNS=function(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.getElementById=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.adoptNode=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.normalizeDocument=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.renameNode=function(t,e,r){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.getElementsByClassName=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.createEvent=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.createRange=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.createNodeIterator=function(t,e,r){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.createTreeWalker=function(t,e,r){throw new Error("This DOM method is not implemented."+this.debugInfo())},e}(o)}).call(this)},{"./NodeType":80,"./Utility":81,"./XMLDOMConfiguration":87,"./XMLDOMImplementation":89,"./XMLNode":102,"./XMLStringWriter":107,"./XMLStringifier":108}],98:[function(t,e,r){(function(){var r,n,i,o,s,a,u,c,l,h,p,f,d,y,m,g,_,v,b,w,T,E,O,S={}.hasOwnProperty;O=t("./Utility"),T=O.isObject,w=O.isFunction,E=O.isPlainObject,b=O.getValue,r=t("./NodeType"),f=t("./XMLDocument"),d=t("./XMLElement"),o=t("./XMLCData"),s=t("./XMLComment"),m=t("./XMLRaw"),v=t("./XMLText"),y=t("./XMLProcessingInstruction"),h=t("./XMLDeclaration"),p=t("./XMLDocType"),a=t("./XMLDTDAttList"),c=t("./XMLDTDEntity"),u=t("./XMLDTDElement"),l=t("./XMLDTDNotation"),i=t("./XMLAttribute"),_=t("./XMLStringifier"),g=t("./XMLStringWriter"),n=t("./WriterState"),e.exports=function(){function t(t,e,n){var i;this.name="?xml",this.type=r.Document,t||(t={}),i={},t.writer?E(t.writer)&&(i=t.writer,t.writer=new g):t.writer=new g,this.options=t,this.writer=t.writer,this.writerOptions=this.writer.filterOptions(i),this.stringify=new _(t),this.onDataCallback=e||function(){},this.onEndCallback=n||function(){},this.currentNode=null,this.currentLevel=-1,this.openTags={},this.documentStarted=!1,this.documentCompleted=!1,this.root=null}return t.prototype.createChildNode=function(t){var e,n,i,o,s,a,u,c;switch(t.type){case r.CData:this.cdata(t.value);break;case r.Comment:this.comment(t.value);break;case r.Element:for(n in i={},u=t.attribs)S.call(u,n)&&(e=u[n],i[n]=e.value);this.node(t.name,i);break;case r.Dummy:this.dummy();break;case r.Raw:this.raw(t.value);break;case r.Text:this.text(t.value);break;case r.ProcessingInstruction:this.instruction(t.target,t.value);break;default:throw new Error("This XML node type is not supported in a JS object: "+t.constructor.name)}for(s=0,a=(c=t.children).length;s<a;s++)o=c[s],this.createChildNode(o),o.type===r.Element&&this.up();return this},t.prototype.dummy=function(){return this},t.prototype.node=function(t,e,r){var n;if(null==t)throw new Error("Missing node name.");if(this.root&&-1===this.currentLevel)throw new Error("Document can only have one root node. "+this.debugInfo(t));return this.openCurrent(),t=b(t),null==e&&(e={}),e=b(e),T(e)||(r=(n=[e,r])[0],e=n[1]),this.currentNode=new d(this,t,e),this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,null!=r&&this.text(r),this},t.prototype.element=function(t,e,n){var i,o,s,a,u,c;if(this.currentNode&&this.currentNode.type===r.DocType)this.dtdElement.apply(this,arguments);else if(Array.isArray(t)||T(t)||w(t))for(a=this.options.noValidation,this.options.noValidation=!0,(c=new f(this.options).element("TEMP_ROOT")).element(t),this.options.noValidation=a,o=0,s=(u=c.children).length;o<s;o++)i=u[o],this.createChildNode(i),i.type===r.Element&&this.up();else this.node(t,e,n);return this},t.prototype.attribute=function(t,e){var r,n;if(!this.currentNode||this.currentNode.children)throw new Error("att() can only be used immediately after an ele() call in callback mode. "+this.debugInfo(t));if(null!=t&&(t=b(t)),T(t))for(r in t)S.call(t,r)&&(n=t[r],this.attribute(r,n));else w(e)&&(e=e.apply()),this.options.keepNullAttributes&&null==e?this.currentNode.attribs[t]=new i(this,t,""):null!=e&&(this.currentNode.attribs[t]=new i(this,t,e));return this},t.prototype.text=function(t){var e;return this.openCurrent(),e=new v(this,t),this.onData(this.writer.text(e,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},t.prototype.cdata=function(t){var e;return this.openCurrent(),e=new o(this,t),this.onData(this.writer.cdata(e,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},t.prototype.comment=function(t){var e;return this.openCurrent(),e=new s(this,t),this.onData(this.writer.comment(e,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},t.prototype.raw=function(t){var e;return this.openCurrent(),e=new m(this,t),this.onData(this.writer.raw(e,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},t.prototype.instruction=function(t,e){var r,n,i,o,s;if(this.openCurrent(),null!=t&&(t=b(t)),null!=e&&(e=b(e)),Array.isArray(t))for(r=0,o=t.length;r<o;r++)n=t[r],this.instruction(n);else if(T(t))for(n in t)S.call(t,n)&&(i=t[n],this.instruction(n,i));else w(e)&&(e=e.apply()),s=new y(this,t,e),this.onData(this.writer.processingInstruction(s,this.writerOptions,this.currentLevel+1),this.currentLevel+1);return this},t.prototype.declaration=function(t,e,r){var n;if(this.openCurrent(),this.documentStarted)throw new Error("declaration() must be the first node.");return n=new h(this,t,e,r),this.onData(this.writer.declaration(n,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},t.prototype.doctype=function(t,e,r){if(this.openCurrent(),null==t)throw new Error("Missing root node name.");if(this.root)throw new Error("dtd() must come before the root node.");return this.currentNode=new p(this,e,r),this.currentNode.rootNodeName=t,this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,this},t.prototype.dtdElement=function(t,e){var r;return this.openCurrent(),r=new u(this,t,e),this.onData(this.writer.dtdElement(r,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},t.prototype.attList=function(t,e,r,n,i){var o;return this.openCurrent(),o=new a(this,t,e,r,n,i),this.onData(this.writer.dtdAttList(o,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},t.prototype.entity=function(t,e){var r;return this.openCurrent(),r=new c(this,!1,t,e),this.onData(this.writer.dtdEntity(r,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},t.prototype.pEntity=function(t,e){var r;return this.openCurrent(),r=new c(this,!0,t,e),this.onData(this.writer.dtdEntity(r,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},t.prototype.notation=function(t,e){var r;return this.openCurrent(),r=new l(this,t,e),this.onData(this.writer.dtdNotation(r,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},t.prototype.up=function(){if(this.currentLevel<0)throw new Error("The document node has no parent.");return this.currentNode?(this.currentNode.children?this.closeNode(this.currentNode):this.openNode(this.currentNode),this.currentNode=null):this.closeNode(this.openTags[this.currentLevel]),delete this.openTags[this.currentLevel],this.currentLevel--,this},t.prototype.end=function(){for(;this.currentLevel>=0;)this.up();return this.onEnd()},t.prototype.openCurrent=function(){if(this.currentNode)return this.currentNode.children=!0,this.openNode(this.currentNode)},t.prototype.openNode=function(t){var e,i,o,s;if(!t.isOpen){if(this.root||0!==this.currentLevel||t.type!==r.Element||(this.root=t),i="",t.type===r.Element){for(o in this.writerOptions.state=n.OpenTag,i=this.writer.indent(t,this.writerOptions,this.currentLevel)+"<"+t.name,s=t.attribs)S.call(s,o)&&(e=s[o],i+=this.writer.attribute(e,this.writerOptions,this.currentLevel));i+=(t.children?">":"/>")+this.writer.endline(t,this.writerOptions,this.currentLevel),this.writerOptions.state=n.InsideTag}else this.writerOptions.state=n.OpenTag,i=this.writer.indent(t,this.writerOptions,this.currentLevel)+"<!DOCTYPE "+t.rootNodeName,t.pubID&&t.sysID?i+=' PUBLIC "'+t.pubID+'" "'+t.sysID+'"':t.sysID&&(i+=' SYSTEM "'+t.sysID+'"'),t.children?(i+=" [",this.writerOptions.state=n.InsideTag):(this.writerOptions.state=n.CloseTag,i+=">"),i+=this.writer.endline(t,this.writerOptions,this.currentLevel);return this.onData(i,this.currentLevel),t.isOpen=!0}},t.prototype.closeNode=function(t){var e;if(!t.isClosed)return e="",this.writerOptions.state=n.CloseTag,e=t.type===r.Element?this.writer.indent(t,this.writerOptions,this.currentLevel)+"</"+t.name+">"+this.writer.endline(t,this.writerOptions,this.currentLevel):this.writer.indent(t,this.writerOptions,this.currentLevel)+"]>"+this.writer.endline(t,this.writerOptions,this.currentLevel),this.writerOptions.state=n.None,this.onData(e,this.currentLevel),t.isClosed=!0},t.prototype.onData=function(t,e){return this.documentStarted=!0,this.onDataCallback(t,e+1)},t.prototype.onEnd=function(){return this.documentCompleted=!0,this.onEndCallback()},t.prototype.debugInfo=function(t){return null==t?"":"node: <"+t+">"},t.prototype.ele=function(){return this.element.apply(this,arguments)},t.prototype.nod=function(t,e,r){return this.node(t,e,r)},t.prototype.txt=function(t){return this.text(t)},t.prototype.dat=function(t){return this.cdata(t)},t.prototype.com=function(t){return this.comment(t)},t.prototype.ins=function(t,e){return this.instruction(t,e)},t.prototype.dec=function(t,e,r){return this.declaration(t,e,r)},t.prototype.dtd=function(t,e,r){return this.doctype(t,e,r)},t.prototype.e=function(t,e,r){return this.element(t,e,r)},t.prototype.n=function(t,e,r){return this.node(t,e,r)},t.prototype.t=function(t){return this.text(t)},t.prototype.d=function(t){return this.cdata(t)},t.prototype.c=function(t){return this.comment(t)},t.prototype.r=function(t){return this.raw(t)},t.prototype.i=function(t,e){return this.instruction(t,e)},t.prototype.att=function(){return this.currentNode&&this.currentNode.type===r.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},t.prototype.a=function(){return this.currentNode&&this.currentNode.type===r.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},t.prototype.ent=function(t,e){return this.entity(t,e)},t.prototype.pent=function(t,e){return this.pEntity(t,e)},t.prototype.not=function(t,e){return this.notation(t,e)},t}()}).call(this)},{"./NodeType":80,"./Utility":81,"./WriterState":82,"./XMLAttribute":83,"./XMLCData":84,"./XMLComment":86,"./XMLDTDAttList":91,"./XMLDTDElement":92,"./XMLDTDEntity":93,"./XMLDTDNotation":94,"./XMLDeclaration":95,"./XMLDocType":96,"./XMLDocument":97,"./XMLElement":100,"./XMLProcessingInstruction":104,"./XMLRaw":105,"./XMLStringWriter":107,"./XMLStringifier":108,"./XMLText":109}],99:[function(t,e,r){(function(){var r,n,i={}.hasOwnProperty;n=t("./XMLNode"),r=t("./NodeType"),e.exports=function(t){function e(t){e.__super__.constructor.call(this,t),this.type=r.Dummy}return function(t,e){for(var r in e)i.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(e,t),e.prototype.clone=function(){return Object.create(this)},e.prototype.toString=function(t){return""},e}(n)}).call(this)},{"./NodeType":80,"./XMLNode":102}],100:[function(t,e,r){(function(){var r,n,i,o,s,a,u,c,l={}.hasOwnProperty;c=t("./Utility"),u=c.isObject,a=c.isFunction,s=c.getValue,o=t("./XMLNode"),r=t("./NodeType"),n=t("./XMLAttribute"),i=t("./XMLNamedNodeMap"),e.exports=function(t){function e(t,n,i){var o,s,a,u;if(e.__super__.constructor.call(this,t),null==n)throw new Error("Missing element name. "+this.debugInfo());if(this.name=this.stringify.name(n),this.type=r.Element,this.attribs={},this.schemaTypeInfo=null,null!=i&&this.attribute(i),t.type===r.Document&&(this.isRoot=!0,this.documentObject=t,t.rootObject=this,t.children))for(s=0,a=(u=t.children).length;s<a;s++)if((o=u[s]).type===r.DocType){o.name=this.name;break}}return function(t,e){for(var r in e)l.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(e,t),Object.defineProperty(e.prototype,"tagName",{get:function(){return this.name}}),Object.defineProperty(e.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(e.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(e.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(e.prototype,"id",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(e.prototype,"className",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(e.prototype,"classList",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(e.prototype,"attributes",{get:function(){return this.attributeMap&&this.attributeMap.nodes||(this.attributeMap=new i(this.attribs)),this.attributeMap}}),e.prototype.clone=function(){var t,e,r,n;for(e in(r=Object.create(this)).isRoot&&(r.documentObject=null),r.attribs={},n=this.attribs)l.call(n,e)&&(t=n[e],r.attribs[e]=t.clone());return r.children=[],this.children.forEach((function(t){var e;return(e=t.clone()).parent=r,r.children.push(e)})),r},e.prototype.attribute=function(t,e){var r,i;if(null!=t&&(t=s(t)),u(t))for(r in t)l.call(t,r)&&(i=t[r],this.attribute(r,i));else a(e)&&(e=e.apply()),this.options.keepNullAttributes&&null==e?this.attribs[t]=new n(this,t,""):null!=e&&(this.attribs[t]=new n(this,t,e));return this},e.prototype.removeAttribute=function(t){var e,r,n;if(null==t)throw new Error("Missing attribute name. "+this.debugInfo());if(t=s(t),Array.isArray(t))for(r=0,n=t.length;r<n;r++)e=t[r],delete this.attribs[e];else delete this.attribs[t];return this},e.prototype.toString=function(t){return this.options.writer.element(this,this.options.writer.filterOptions(t))},e.prototype.att=function(t,e){return this.attribute(t,e)},e.prototype.a=function(t,e){return this.attribute(t,e)},e.prototype.getAttribute=function(t){return this.attribs.hasOwnProperty(t)?this.attribs[t].value:null},e.prototype.setAttribute=function(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.getAttributeNode=function(t){return this.attribs.hasOwnProperty(t)?this.attribs[t]:null},e.prototype.setAttributeNode=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.removeAttributeNode=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.getElementsByTagName=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.getAttributeNS=function(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.setAttributeNS=function(t,e,r){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.removeAttributeNS=function(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.getAttributeNodeNS=function(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.setAttributeNodeNS=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.getElementsByTagNameNS=function(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.hasAttribute=function(t){return this.attribs.hasOwnProperty(t)},e.prototype.hasAttributeNS=function(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.setIdAttribute=function(t,e){return this.attribs.hasOwnProperty(t)?this.attribs[t].isId:e},e.prototype.setIdAttributeNS=function(t,e,r){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.setIdAttributeNode=function(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.getElementsByTagName=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.getElementsByTagNameNS=function(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.getElementsByClassName=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.isEqualNode=function(t){var r,n,i;if(!e.__super__.isEqualNode.apply(this,arguments).isEqualNode(t))return!1;if(t.namespaceURI!==this.namespaceURI)return!1;if(t.prefix!==this.prefix)return!1;if(t.localName!==this.localName)return!1;if(t.attribs.length!==this.attribs.length)return!1;for(r=n=0,i=this.attribs.length-1;0<=i?n<=i:n>=i;r=0<=i?++n:--n)if(!this.attribs[r].isEqualNode(t.attribs[r]))return!1;return!0},e}(o)}).call(this)},{"./NodeType":80,"./Utility":81,"./XMLAttribute":83,"./XMLNamedNodeMap":101,"./XMLNode":102}],101:[function(t,e,r){(function(){e.exports=function(){function t(t){this.nodes=t}return Object.defineProperty(t.prototype,"length",{get:function(){return Object.keys(this.nodes).length||0}}),t.prototype.clone=function(){return this.nodes=null},t.prototype.getNamedItem=function(t){return this.nodes[t]},t.prototype.setNamedItem=function(t){var e;return e=this.nodes[t.nodeName],this.nodes[t.nodeName]=t,e||null},t.prototype.removeNamedItem=function(t){var e;return e=this.nodes[t],delete this.nodes[t],e||null},t.prototype.item=function(t){return this.nodes[Object.keys(this.nodes)[t]]||null},t.prototype.getNamedItemNS=function(t,e){throw new Error("This DOM method is not implemented.")},t.prototype.setNamedItemNS=function(t){throw new Error("This DOM method is not implemented.")},t.prototype.removeNamedItemNS=function(t,e){throw new Error("This DOM method is not implemented.")},t}()}).call(this)},{}],102:[function(t,e,r){(function(){var r,n,i,o,s,a,u,c,l,h,p,f,d,y,m,g,_,v={}.hasOwnProperty;_=t("./Utility"),g=_.isObject,m=_.isFunction,y=_.isEmpty,d=_.getValue,c=null,i=null,o=null,s=null,a=null,p=null,f=null,h=null,u=null,n=null,l=null,r=null,e.exports=function(){function e(e){this.parent=e,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),this.value=null,this.children=[],this.baseURI=null,c||(c=t("./XMLElement"),i=t("./XMLCData"),o=t("./XMLComment"),s=t("./XMLDeclaration"),a=t("./XMLDocType"),p=t("./XMLRaw"),f=t("./XMLText"),h=t("./XMLProcessingInstruction"),u=t("./XMLDummy"),n=t("./NodeType"),l=t("./XMLNodeList"),t("./XMLNamedNodeMap"),r=t("./DocumentPosition"))}return Object.defineProperty(e.prototype,"nodeName",{get:function(){return this.name}}),Object.defineProperty(e.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(e.prototype,"nodeValue",{get:function(){return this.value}}),Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.parent}}),Object.defineProperty(e.prototype,"childNodes",{get:function(){return this.childNodeList&&this.childNodeList.nodes||(this.childNodeList=new l(this.children)),this.childNodeList}}),Object.defineProperty(e.prototype,"firstChild",{get:function(){return this.children[0]||null}}),Object.defineProperty(e.prototype,"lastChild",{get:function(){return this.children[this.children.length-1]||null}}),Object.defineProperty(e.prototype,"previousSibling",{get:function(){var t;return t=this.parent.children.indexOf(this),this.parent.children[t-1]||null}}),Object.defineProperty(e.prototype,"nextSibling",{get:function(){var t;return t=this.parent.children.indexOf(this),this.parent.children[t+1]||null}}),Object.defineProperty(e.prototype,"ownerDocument",{get:function(){return this.document()||null}}),Object.defineProperty(e.prototype,"textContent",{get:function(){var t,e,r,i,o;if(this.nodeType===n.Element||this.nodeType===n.DocumentFragment){for(o="",e=0,r=(i=this.children).length;e<r;e++)(t=i[e]).textContent&&(o+=t.textContent);return o}return null},set:function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),e.prototype.setParent=function(t){var e,r,n,i,o;for(this.parent=t,t&&(this.options=t.options,this.stringify=t.stringify),o=[],r=0,n=(i=this.children).length;r<n;r++)e=i[r],o.push(e.setParent(this));return o},e.prototype.element=function(t,e,r){var n,i,o,s,a,u,c,l,h,p,f;if(u=null,null===e&&null==r&&(e=(h=[{},null])[0],r=h[1]),null==e&&(e={}),e=d(e),g(e)||(r=(p=[e,r])[0],e=p[1]),null!=t&&(t=d(t)),Array.isArray(t))for(o=0,c=t.length;o<c;o++)i=t[o],u=this.element(i);else if(m(t))u=this.element(t.apply());else if(g(t)){for(a in t)if(v.call(t,a))if(f=t[a],m(f)&&(f=f.apply()),!this.options.ignoreDecorators&&this.stringify.convertAttKey&&0===a.indexOf(this.stringify.convertAttKey))u=this.attribute(a.substr(this.stringify.convertAttKey.length),f);else if(!this.options.separateArrayItems&&Array.isArray(f)&&y(f))u=this.dummy();else if(g(f)&&y(f))u=this.element(a);else if(this.options.keepNullNodes||null!=f)if(!this.options.separateArrayItems&&Array.isArray(f))for(s=0,l=f.length;s<l;s++)i=f[s],(n={})[a]=i,u=this.element(n);else g(f)?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&0===a.indexOf(this.stringify.convertTextKey)?u=this.element(f):(u=this.element(a)).element(f):u=this.element(a,f);else u=this.dummy()}else u=this.options.keepNullNodes||null!==r?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&0===t.indexOf(this.stringify.convertTextKey)?this.text(r):!this.options.ignoreDecorators&&this.stringify.convertCDataKey&&0===t.indexOf(this.stringify.convertCDataKey)?this.cdata(r):!this.options.ignoreDecorators&&this.stringify.convertCommentKey&&0===t.indexOf(this.stringify.convertCommentKey)?this.comment(r):!this.options.ignoreDecorators&&this.stringify.convertRawKey&&0===t.indexOf(this.stringify.convertRawKey)?this.raw(r):!this.options.ignoreDecorators&&this.stringify.convertPIKey&&0===t.indexOf(this.stringify.convertPIKey)?this.instruction(t.substr(this.stringify.convertPIKey.length),r):this.node(t,e,r):this.dummy();if(null==u)throw new Error("Could not create any elements with: "+t+". "+this.debugInfo());return u},e.prototype.insertBefore=function(t,e,r){var n,i,o,s,a;if(null!=t?t.type:void 0)return s=e,(o=t).setParent(this),s?(i=children.indexOf(s),a=children.splice(i),children.push(o),Array.prototype.push.apply(children,a)):children.push(o),o;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(t));return i=this.parent.children.indexOf(this),a=this.parent.children.splice(i),n=this.parent.element(t,e,r),Array.prototype.push.apply(this.parent.children,a),n},e.prototype.insertAfter=function(t,e,r){var n,i,o;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(t));return i=this.parent.children.indexOf(this),o=this.parent.children.splice(i+1),n=this.parent.element(t,e,r),Array.prototype.push.apply(this.parent.children,o),n},e.prototype.remove=function(){var t;if(this.isRoot)throw new Error("Cannot remove the root element. "+this.debugInfo());return t=this.parent.children.indexOf(this),[].splice.apply(this.parent.children,[t,t-t+1].concat([])),this.parent},e.prototype.node=function(t,e,r){var n,i;return null!=t&&(t=d(t)),e||(e={}),e=d(e),g(e)||(r=(i=[e,r])[0],e=i[1]),n=new c(this,t,e),null!=r&&n.text(r),this.children.push(n),n},e.prototype.text=function(t){var e;return g(t)&&this.element(t),e=new f(this,t),this.children.push(e),this},e.prototype.cdata=function(t){var e;return e=new i(this,t),this.children.push(e),this},e.prototype.comment=function(t){var e;return e=new o(this,t),this.children.push(e),this},e.prototype.commentBefore=function(t){var e,r;return e=this.parent.children.indexOf(this),r=this.parent.children.splice(e),this.parent.comment(t),Array.prototype.push.apply(this.parent.children,r),this},e.prototype.commentAfter=function(t){var e,r;return e=this.parent.children.indexOf(this),r=this.parent.children.splice(e+1),this.parent.comment(t),Array.prototype.push.apply(this.parent.children,r),this},e.prototype.raw=function(t){var e;return e=new p(this,t),this.children.push(e),this},e.prototype.dummy=function(){return new u(this)},e.prototype.instruction=function(t,e){var r,n,i,o,s;if(null!=t&&(t=d(t)),null!=e&&(e=d(e)),Array.isArray(t))for(o=0,s=t.length;o<s;o++)r=t[o],this.instruction(r);else if(g(t))for(r in t)v.call(t,r)&&(n=t[r],this.instruction(r,n));else m(e)&&(e=e.apply()),i=new h(this,t,e),this.children.push(i);return this},e.prototype.instructionBefore=function(t,e){var r,n;return r=this.parent.children.indexOf(this),n=this.parent.children.splice(r),this.parent.instruction(t,e),Array.prototype.push.apply(this.parent.children,n),this},e.prototype.instructionAfter=function(t,e){var r,n;return r=this.parent.children.indexOf(this),n=this.parent.children.splice(r+1),this.parent.instruction(t,e),Array.prototype.push.apply(this.parent.children,n),this},e.prototype.declaration=function(t,e,r){var i,o;return i=this.document(),o=new s(i,t,e,r),0===i.children.length?i.children.unshift(o):i.children[0].type===n.Declaration?i.children[0]=o:i.children.unshift(o),i.root()||i},e.prototype.dtd=function(t,e){var r,i,o,s,u,c,l,h,p;for(r=this.document(),i=new a(r,t,e),o=s=0,c=(h=r.children).length;s<c;o=++s)if(h[o].type===n.DocType)return r.children[o]=i,i;for(o=u=0,l=(p=r.children).length;u<l;o=++u)if(p[o].isRoot)return r.children.splice(o,0,i),i;return r.children.push(i),i},e.prototype.up=function(){if(this.isRoot)throw new Error("The root node has no parent. Use doc() if you need to get the document object.");return this.parent},e.prototype.root=function(){var t;for(t=this;t;){if(t.type===n.Document)return t.rootObject;if(t.isRoot)return t;t=t.parent}},e.prototype.document=function(){var t;for(t=this;t;){if(t.type===n.Document)return t;t=t.parent}},e.prototype.end=function(t){return this.document().end(t)},e.prototype.prev=function(){var t;if((t=this.parent.children.indexOf(this))<1)throw new Error("Already at the first node. "+this.debugInfo());return this.parent.children[t-1]},e.prototype.next=function(){var t;if(-1===(t=this.parent.children.indexOf(this))||t===this.parent.children.length-1)throw new Error("Already at the last node. "+this.debugInfo());return this.parent.children[t+1]},e.prototype.importDocument=function(t){var e;return(e=t.root().clone()).parent=this,e.isRoot=!1,this.children.push(e),this},e.prototype.debugInfo=function(t){var e,r;return null!=(t=t||this.name)||(null!=(e=this.parent)?e.name:void 0)?null==t?"parent: <"+this.parent.name+">":(null!=(r=this.parent)?r.name:void 0)?"node: <"+t+">, parent: <"+this.parent.name+">":"node: <"+t+">":""},e.prototype.ele=function(t,e,r){return this.element(t,e,r)},e.prototype.nod=function(t,e,r){return this.node(t,e,r)},e.prototype.txt=function(t){return this.text(t)},e.prototype.dat=function(t){return this.cdata(t)},e.prototype.com=function(t){return this.comment(t)},e.prototype.ins=function(t,e){return this.instruction(t,e)},e.prototype.doc=function(){return this.document()},e.prototype.dec=function(t,e,r){return this.declaration(t,e,r)},e.prototype.e=function(t,e,r){return this.element(t,e,r)},e.prototype.n=function(t,e,r){return this.node(t,e,r)},e.prototype.t=function(t){return this.text(t)},e.prototype.d=function(t){return this.cdata(t)},e.prototype.c=function(t){return this.comment(t)},e.prototype.r=function(t){return this.raw(t)},e.prototype.i=function(t,e){return this.instruction(t,e)},e.prototype.u=function(){return this.up()},e.prototype.importXMLBuilder=function(t){return this.importDocument(t)},e.prototype.replaceChild=function(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.removeChild=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.appendChild=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.hasChildNodes=function(){return 0!==this.children.length},e.prototype.cloneNode=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.normalize=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.isSupported=function(t,e){return!0},e.prototype.hasAttributes=function(){return 0!==this.attribs.length},e.prototype.compareDocumentPosition=function(t){var e,n;return(e=this)===t?0:this.document()!==t.document()?(n=r.Disconnected|r.ImplementationSpecific,Math.random()<.5?n|=r.Preceding:n|=r.Following,n):e.isAncestor(t)?r.Contains|r.Preceding:e.isDescendant(t)?r.Contains|r.Following:e.isPreceding(t)?r.Preceding:r.Following},e.prototype.isSameNode=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.lookupPrefix=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.isDefaultNamespace=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.lookupNamespaceURI=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.isEqualNode=function(t){var e,r,n;if(t.nodeType!==this.nodeType)return!1;if(t.children.length!==this.children.length)return!1;for(e=r=0,n=this.children.length-1;0<=n?r<=n:r>=n;e=0<=n?++r:--r)if(!this.children[e].isEqualNode(t.children[e]))return!1;return!0},e.prototype.getFeature=function(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.setUserData=function(t,e,r){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.getUserData=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.contains=function(t){return!!t&&(t===this||this.isDescendant(t))},e.prototype.isDescendant=function(t){var e,r,n,i;for(r=0,n=(i=this.children).length;r<n;r++){if(t===(e=i[r]))return!0;if(e.isDescendant(t))return!0}return!1},e.prototype.isAncestor=function(t){return t.isDescendant(this)},e.prototype.isPreceding=function(t){var e,r;return e=this.treePosition(t),r=this.treePosition(this),-1!==e&&-1!==r&&e<r},e.prototype.isFollowing=function(t){var e,r;return e=this.treePosition(t),r=this.treePosition(this),-1!==e&&-1!==r&&e>r},e.prototype.treePosition=function(t){var e,r;return r=0,e=!1,this.foreachTreeNode(this.document(),(function(n){if(r++,!e&&n===t)return e=!0})),e?r:-1},e.prototype.foreachTreeNode=function(t,e){var r,n,i,o,s;for(t||(t=this.document()),n=0,i=(o=t.children).length;n<i;n++){if(s=e(r=o[n]))return s;if(s=this.foreachTreeNode(r,e))return s}},e}()}).call(this)},{"./DocumentPosition":79,"./NodeType":80,"./Utility":81,"./XMLCData":84,"./XMLComment":86,"./XMLDeclaration":95,"./XMLDocType":96,"./XMLDummy":99,"./XMLElement":100,"./XMLNamedNodeMap":101,"./XMLNodeList":103,"./XMLProcessingInstruction":104,"./XMLRaw":105,"./XMLText":109}],103:[function(t,e,r){(function(){e.exports=function(){function t(t){this.nodes=t}return Object.defineProperty(t.prototype,"length",{get:function(){return this.nodes.length||0}}),t.prototype.clone=function(){return this.nodes=null},t.prototype.item=function(t){return this.nodes[t]||null},t}()}).call(this)},{}],104:[function(t,e,r){(function(){var r,n,i={}.hasOwnProperty;r=t("./NodeType"),n=t("./XMLCharacterData"),e.exports=function(t){function e(t,n,i){if(e.__super__.constructor.call(this,t),null==n)throw new Error("Missing instruction target. "+this.debugInfo());this.type=r.ProcessingInstruction,this.target=this.stringify.insTarget(n),this.name=this.target,i&&(this.value=this.stringify.insValue(i))}return function(t,e){for(var r in e)i.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(e,t),e.prototype.clone=function(){return Object.create(this)},e.prototype.toString=function(t){return this.options.writer.processingInstruction(this,this.options.writer.filterOptions(t))},e.prototype.isEqualNode=function(t){return!!e.__super__.isEqualNode.apply(this,arguments).isEqualNode(t)&&t.target===this.target},e}(n)}).call(this)},{"./NodeType":80,"./XMLCharacterData":85}],105:[function(t,e,r){(function(){var r,n,i={}.hasOwnProperty;r=t("./NodeType"),n=t("./XMLNode"),e.exports=function(t){function e(t,n){if(e.__super__.constructor.call(this,t),null==n)throw new Error("Missing raw text. "+this.debugInfo());this.type=r.Raw,this.value=this.stringify.raw(n)}return function(t,e){for(var r in e)i.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(e,t),e.prototype.clone=function(){return Object.create(this)},e.prototype.toString=function(t){return this.options.writer.raw(this,this.options.writer.filterOptions(t))},e}(n)}).call(this)},{"./NodeType":80,"./XMLNode":102}],106:[function(t,e,r){(function(){var r,n,i,o={}.hasOwnProperty;r=t("./NodeType"),i=t("./XMLWriterBase"),n=t("./WriterState"),e.exports=function(t){function e(t,r){this.stream=t,e.__super__.constructor.call(this,r)}return function(t,e){for(var r in e)o.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(e,t),e.prototype.endline=function(t,r,i){return t.isLastRootNode&&r.state===n.CloseTag?"":e.__super__.endline.call(this,t,r,i)},e.prototype.document=function(t,e){var r,n,i,o,s,a,u,c,l;for(n=i=0,s=(u=t.children).length;i<s;n=++i)(r=u[n]).isLastRootNode=n===t.children.length-1;for(e=this.filterOptions(e),l=[],o=0,a=(c=t.children).length;o<a;o++)r=c[o],l.push(this.writeChildNode(r,e,0));return l},e.prototype.attribute=function(t,r,n){return this.stream.write(e.__super__.attribute.call(this,t,r,n))},e.prototype.cdata=function(t,r,n){return this.stream.write(e.__super__.cdata.call(this,t,r,n))},e.prototype.comment=function(t,r,n){return this.stream.write(e.__super__.comment.call(this,t,r,n))},e.prototype.declaration=function(t,r,n){return this.stream.write(e.__super__.declaration.call(this,t,r,n))},e.prototype.docType=function(t,e,r){var i,o,s,a;if(r||(r=0),this.openNode(t,e,r),e.state=n.OpenTag,this.stream.write(this.indent(t,e,r)),this.stream.write("<!DOCTYPE "+t.root().name),t.pubID&&t.sysID?this.stream.write(' PUBLIC "'+t.pubID+'" "'+t.sysID+'"'):t.sysID&&this.stream.write(' SYSTEM "'+t.sysID+'"'),t.children.length>0){for(this.stream.write(" ["),this.stream.write(this.endline(t,e,r)),e.state=n.InsideTag,o=0,s=(a=t.children).length;o<s;o++)i=a[o],this.writeChildNode(i,e,r+1);e.state=n.CloseTag,this.stream.write("]")}return e.state=n.CloseTag,this.stream.write(e.spaceBeforeSlash+">"),this.stream.write(this.endline(t,e,r)),e.state=n.None,this.closeNode(t,e,r)},e.prototype.element=function(t,e,i){var s,a,u,c,l,h,p,f,d;for(p in i||(i=0),this.openNode(t,e,i),e.state=n.OpenTag,this.stream.write(this.indent(t,e,i)+"<"+t.name),f=t.attribs)o.call(f,p)&&(s=f[p],this.attribute(s,e,i));if(c=0===(u=t.children.length)?null:t.children[0],0===u||t.children.every((function(t){return(t.type===r.Text||t.type===r.Raw)&&""===t.value})))e.allowEmpty?(this.stream.write(">"),e.state=n.CloseTag,this.stream.write("</"+t.name+">")):(e.state=n.CloseTag,this.stream.write(e.spaceBeforeSlash+"/>"));else if(!e.pretty||1!==u||c.type!==r.Text&&c.type!==r.Raw||null==c.value){for(this.stream.write(">"+this.endline(t,e,i)),e.state=n.InsideTag,l=0,h=(d=t.children).length;l<h;l++)a=d[l],this.writeChildNode(a,e,i+1);e.state=n.CloseTag,this.stream.write(this.indent(t,e,i)+"</"+t.name+">")}else this.stream.write(">"),e.state=n.InsideTag,e.suppressPrettyCount++,!0,this.writeChildNode(c,e,i+1),e.suppressPrettyCount--,!1,e.state=n.CloseTag,this.stream.write("</"+t.name+">");return this.stream.write(this.endline(t,e,i)),e.state=n.None,this.closeNode(t,e,i)},e.prototype.processingInstruction=function(t,r,n){return this.stream.write(e.__super__.processingInstruction.call(this,t,r,n))},e.prototype.raw=function(t,r,n){return this.stream.write(e.__super__.raw.call(this,t,r,n))},e.prototype.text=function(t,r,n){return this.stream.write(e.__super__.text.call(this,t,r,n))},e.prototype.dtdAttList=function(t,r,n){return this.stream.write(e.__super__.dtdAttList.call(this,t,r,n))},e.prototype.dtdElement=function(t,r,n){return this.stream.write(e.__super__.dtdElement.call(this,t,r,n))},e.prototype.dtdEntity=function(t,r,n){return this.stream.write(e.__super__.dtdEntity.call(this,t,r,n))},e.prototype.dtdNotation=function(t,r,n){return this.stream.write(e.__super__.dtdNotation.call(this,t,r,n))},e}(i)}).call(this)},{"./NodeType":80,"./WriterState":82,"./XMLWriterBase":110}],107:[function(t,e,r){(function(){var r,n={}.hasOwnProperty;r=t("./XMLWriterBase"),e.exports=function(t){function e(t){e.__super__.constructor.call(this,t)}return function(t,e){for(var r in e)n.call(e,r)&&(t[r]=e[r]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(e,t),e.prototype.document=function(t,e){var r,n,i,o,s;for(e=this.filterOptions(e),o="",n=0,i=(s=t.children).length;n<i;n++)r=s[n],o+=this.writeChildNode(r,e,0);return e.pretty&&o.slice(-e.newline.length)===e.newline&&(o=o.slice(0,-e.newline.length)),o},e}(r)}).call(this)},{"./XMLWriterBase":110}],108:[function(t,e,r){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},r={}.hasOwnProperty;e.exports=function(){function e(e){var n,i,o;for(n in this.assertLegalName=t(this.assertLegalName,this),this.assertLegalChar=t(this.assertLegalChar,this),e||(e={}),this.options=e,this.options.version||(this.options.version="1.0"),i=e.stringify||{})r.call(i,n)&&(o=i[n],this[n]=o)}return e.prototype.name=function(t){return this.options.noValidation?t:this.assertLegalName(""+t||"")},e.prototype.text=function(t){return this.options.noValidation?t:this.assertLegalChar(this.textEscape(""+t||""))},e.prototype.cdata=function(t){return this.options.noValidation?t:(t=(t=""+t||"").replace("]]>","]]]]><![CDATA[>"),this.assertLegalChar(t))},e.prototype.comment=function(t){if(this.options.noValidation)return t;if((t=""+t||"").match(/--/))throw new Error("Comment text cannot contain double-hypen: "+t);return this.assertLegalChar(t)},e.prototype.raw=function(t){return this.options.noValidation?t:""+t||""},e.prototype.attValue=function(t){return this.options.noValidation?t:this.assertLegalChar(this.attEscape(t=""+t||""))},e.prototype.insTarget=function(t){return this.options.noValidation?t:this.assertLegalChar(""+t||"")},e.prototype.insValue=function(t){if(this.options.noValidation)return t;if((t=""+t||"").match(/\?>/))throw new Error("Invalid processing instruction value: "+t);return this.assertLegalChar(t)},e.prototype.xmlVersion=function(t){if(this.options.noValidation)return t;if(!(t=""+t||"").match(/1\.[0-9]+/))throw new Error("Invalid version number: "+t);return t},e.prototype.xmlEncoding=function(t){if(this.options.noValidation)return t;if(!(t=""+t||"").match(/^[A-Za-z](?:[A-Za-z0-9._-])*$/))throw new Error("Invalid encoding: "+t);return this.assertLegalChar(t)},e.prototype.xmlStandalone=function(t){return this.options.noValidation?t:t?"yes":"no"},e.prototype.dtdPubID=function(t){return this.options.noValidation?t:this.assertLegalChar(""+t||"")},e.prototype.dtdSysID=function(t){return this.options.noValidation?t:this.assertLegalChar(""+t||"")},e.prototype.dtdElementValue=function(t){return this.options.noValidation?t:this.assertLegalChar(""+t||"")},e.prototype.dtdAttType=function(t){return this.options.noValidation?t:this.assertLegalChar(""+t||"")},e.prototype.dtdAttDefault=function(t){return this.options.noValidation?t:this.assertLegalChar(""+t||"")},e.prototype.dtdEntityValue=function(t){return this.options.noValidation?t:this.assertLegalChar(""+t||"")},e.prototype.dtdNData=function(t){return this.options.noValidation?t:this.assertLegalChar(""+t||"")},e.prototype.convertAttKey="@",e.prototype.convertPIKey="?",e.prototype.convertTextKey="#text",e.prototype.convertCDataKey="#cdata",e.prototype.convertCommentKey="#comment",e.prototype.convertRawKey="#raw",e.prototype.assertLegalChar=function(t){var e,r;if(this.options.noValidation)return t;if(e="","1.0"===this.options.version){if(e=/[\0-\x08\x0B\f\x0E-\x1F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,r=t.match(e))throw new Error("Invalid character in string: "+t+" at index "+r.index)}else if("1.1"===this.options.version&&(e=/[\0\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,r=t.match(e)))throw new Error("Invalid character in string: "+t+" at index "+r.index);return t},e.prototype.assertLegalName=function(t){var e;if(this.options.noValidation)return t;if(this.assertLegalChar(t),e=/^([:A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])([\x2D\.0-:A-Z_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*$/,!t.match(e))throw new Error("Invalid character in name");return t},e.prototype.textEscape=function(t){var e;return this.options.noValidation?t:(e=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,t.replace(e,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;"))},e.prototype.attEscape=function(t){var e;return this.options.noValidation?t:(e=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,t.replace(e,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;"))},e}()}).call(this)},{}],109:[function(t,e,r){(function(){var r,n,i={}.hasOwnProperty;r=t("./NodeType"),n=t("./XMLCharacterData"),e.exports=function(t){function e(t,n){if(e.__super__.constructor.call(this,t),null==n)throw new Error("Missing element text. "+this.debugInfo());this.name="#text",this.type=r.Text,this.value=this.stringify.text(n)}return function(t,e){for(var r in e)i.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(e,t),Object.defineProperty(e.prototype,"isElementContentWhitespace",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(e.prototype,"wholeText",{get:function(){var t,e,r;for(r="",e=this.previousSibling;e;)r=e.data+r,e=e.previousSibling;for(r+=this.data,t=this.nextSibling;t;)r+=t.data,t=t.nextSibling;return r}}),e.prototype.clone=function(){return Object.create(this)},e.prototype.toString=function(t){return this.options.writer.text(this,this.options.writer.filterOptions(t))},e.prototype.splitText=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.replaceWholeText=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},e}(n)}).call(this)},{"./NodeType":80,"./XMLCharacterData":85}],110:[function(t,e,r){(function(){var r,n,i,o={}.hasOwnProperty;i=t("./Utility").assign,r=t("./NodeType"),t("./XMLDeclaration"),t("./XMLDocType"),t("./XMLCData"),t("./XMLComment"),t("./XMLElement"),t("./XMLRaw"),t("./XMLText"),t("./XMLProcessingInstruction"),t("./XMLDummy"),t("./XMLDTDAttList"),t("./XMLDTDElement"),t("./XMLDTDEntity"),t("./XMLDTDNotation"),n=t("./WriterState"),e.exports=function(){function t(t){var e,r,n;for(e in t||(t={}),this.options=t,r=t.writer||{})o.call(r,e)&&(n=r[e],this["_"+e]=this[e],this[e]=n)}return t.prototype.filterOptions=function(t){var e,r,o,s,a,u,c,l;return t||(t={}),t=i({},this.options,t),(e={writer:this}).pretty=t.pretty||!1,e.allowEmpty=t.allowEmpty||!1,e.indent=null!=(r=t.indent)?r:"  ",e.newline=null!=(o=t.newline)?o:"\n",e.offset=null!=(s=t.offset)?s:0,e.dontPrettyTextNodes=null!=(a=null!=(u=t.dontPrettyTextNodes)?u:t.dontprettytextnodes)?a:0,e.spaceBeforeSlash=null!=(c=null!=(l=t.spaceBeforeSlash)?l:t.spacebeforeslash)?c:"",!0===e.spaceBeforeSlash&&(e.spaceBeforeSlash=" "),e.suppressPrettyCount=0,e.user={},e.state=n.None,e},t.prototype.indent=function(t,e,r){var n;return!e.pretty||e.suppressPrettyCount?"":e.pretty&&(n=(r||0)+e.offset+1)>0?new Array(n).join(e.indent):""},t.prototype.endline=function(t,e,r){return!e.pretty||e.suppressPrettyCount?"":e.newline},t.prototype.attribute=function(t,e,r){var n;return this.openAttribute(t,e,r),n=" "+t.name+'="'+t.value+'"',this.closeAttribute(t,e,r),n},t.prototype.cdata=function(t,e,r){var i;return this.openNode(t,e,r),e.state=n.OpenTag,i=this.indent(t,e,r)+"<![CDATA[",e.state=n.InsideTag,i+=t.value,e.state=n.CloseTag,i+="]]>"+this.endline(t,e,r),e.state=n.None,this.closeNode(t,e,r),i},t.prototype.comment=function(t,e,r){var i;return this.openNode(t,e,r),e.state=n.OpenTag,i=this.indent(t,e,r)+"\x3c!-- ",e.state=n.InsideTag,i+=t.value,e.state=n.CloseTag,i+=" --\x3e"+this.endline(t,e,r),e.state=n.None,this.closeNode(t,e,r),i},t.prototype.declaration=function(t,e,r){var i;return this.openNode(t,e,r),e.state=n.OpenTag,i=this.indent(t,e,r)+"<?xml",e.state=n.InsideTag,i+=' version="'+t.version+'"',null!=t.encoding&&(i+=' encoding="'+t.encoding+'"'),null!=t.standalone&&(i+=' standalone="'+t.standalone+'"'),e.state=n.CloseTag,i+=e.spaceBeforeSlash+"?>",i+=this.endline(t,e,r),e.state=n.None,this.closeNode(t,e,r),i},t.prototype.docType=function(t,e,r){var i,o,s,a,u;if(r||(r=0),this.openNode(t,e,r),e.state=n.OpenTag,a=this.indent(t,e,r),a+="<!DOCTYPE "+t.root().name,t.pubID&&t.sysID?a+=' PUBLIC "'+t.pubID+'" "'+t.sysID+'"':t.sysID&&(a+=' SYSTEM "'+t.sysID+'"'),t.children.length>0){for(a+=" [",a+=this.endline(t,e,r),e.state=n.InsideTag,o=0,s=(u=t.children).length;o<s;o++)i=u[o],a+=this.writeChildNode(i,e,r+1);e.state=n.CloseTag,a+="]"}return e.state=n.CloseTag,a+=e.spaceBeforeSlash+">",a+=this.endline(t,e,r),e.state=n.None,this.closeNode(t,e,r),a},t.prototype.element=function(t,e,i){var s,a,u,c,l,h,p,f,d,y,m,g,_,v;for(d in i||(i=0),y=!1,m="",this.openNode(t,e,i),e.state=n.OpenTag,m+=this.indent(t,e,i)+"<"+t.name,g=t.attribs)o.call(g,d)&&(s=g[d],m+=this.attribute(s,e,i));if(c=0===(u=t.children.length)?null:t.children[0],0===u||t.children.every((function(t){return(t.type===r.Text||t.type===r.Raw)&&""===t.value})))e.allowEmpty?(m+=">",e.state=n.CloseTag,m+="</"+t.name+">"+this.endline(t,e,i)):(e.state=n.CloseTag,m+=e.spaceBeforeSlash+"/>"+this.endline(t,e,i));else if(!e.pretty||1!==u||c.type!==r.Text&&c.type!==r.Raw||null==c.value){if(e.dontPrettyTextNodes)for(l=0,p=(_=t.children).length;l<p;l++)if(((a=_[l]).type===r.Text||a.type===r.Raw)&&null!=a.value){e.suppressPrettyCount++,y=!0;break}for(m+=">"+this.endline(t,e,i),e.state=n.InsideTag,h=0,f=(v=t.children).length;h<f;h++)a=v[h],m+=this.writeChildNode(a,e,i+1);e.state=n.CloseTag,m+=this.indent(t,e,i)+"</"+t.name+">",y&&e.suppressPrettyCount--,m+=this.endline(t,e,i),e.state=n.None}else m+=">",e.state=n.InsideTag,e.suppressPrettyCount++,y=!0,m+=this.writeChildNode(c,e,i+1),e.suppressPrettyCount--,y=!1,e.state=n.CloseTag,m+="</"+t.name+">"+this.endline(t,e,i);return this.closeNode(t,e,i),m},t.prototype.writeChildNode=function(t,e,n){switch(t.type){case r.CData:return this.cdata(t,e,n);case r.Comment:return this.comment(t,e,n);case r.Element:return this.element(t,e,n);case r.Raw:return this.raw(t,e,n);case r.Text:return this.text(t,e,n);case r.ProcessingInstruction:return this.processingInstruction(t,e,n);case r.Dummy:return"";case r.Declaration:return this.declaration(t,e,n);case r.DocType:return this.docType(t,e,n);case r.AttributeDeclaration:return this.dtdAttList(t,e,n);case r.ElementDeclaration:return this.dtdElement(t,e,n);case r.EntityDeclaration:return this.dtdEntity(t,e,n);case r.NotationDeclaration:return this.dtdNotation(t,e,n);default:throw new Error("Unknown XML node type: "+t.constructor.name)}},t.prototype.processingInstruction=function(t,e,r){var i;return this.openNode(t,e,r),e.state=n.OpenTag,i=this.indent(t,e,r)+"<?",e.state=n.InsideTag,i+=t.target,t.value&&(i+=" "+t.value),e.state=n.CloseTag,i+=e.spaceBeforeSlash+"?>",i+=this.endline(t,e,r),e.state=n.None,this.closeNode(t,e,r),i},t.prototype.raw=function(t,e,r){var i;return this.openNode(t,e,r),e.state=n.OpenTag,i=this.indent(t,e,r),e.state=n.InsideTag,i+=t.value,e.state=n.CloseTag,i+=this.endline(t,e,r),e.state=n.None,this.closeNode(t,e,r),i},t.prototype.text=function(t,e,r){var i;return this.openNode(t,e,r),e.state=n.OpenTag,i=this.indent(t,e,r),e.state=n.InsideTag,i+=t.value,e.state=n.CloseTag,i+=this.endline(t,e,r),e.state=n.None,this.closeNode(t,e,r),i},t.prototype.dtdAttList=function(t,e,r){var i;return this.openNode(t,e,r),e.state=n.OpenTag,i=this.indent(t,e,r)+"<!ATTLIST",e.state=n.InsideTag,i+=" "+t.elementName+" "+t.attributeName+" "+t.attributeType,"#DEFAULT"!==t.defaultValueType&&(i+=" "+t.defaultValueType),t.defaultValue&&(i+=' "'+t.defaultValue+'"'),e.state=n.CloseTag,i+=e.spaceBeforeSlash+">"+this.endline(t,e,r),e.state=n.None,this.closeNode(t,e,r),i},t.prototype.dtdElement=function(t,e,r){var i;return this.openNode(t,e,r),e.state=n.OpenTag,i=this.indent(t,e,r)+"<!ELEMENT",e.state=n.InsideTag,i+=" "+t.name+" "+t.value,e.state=n.CloseTag,i+=e.spaceBeforeSlash+">"+this.endline(t,e,r),e.state=n.None,this.closeNode(t,e,r),i},t.prototype.dtdEntity=function(t,e,r){var i;return this.openNode(t,e,r),e.state=n.OpenTag,i=this.indent(t,e,r)+"<!ENTITY",e.state=n.InsideTag,t.pe&&(i+=" %"),i+=" "+t.name,t.value?i+=' "'+t.value+'"':(t.pubID&&t.sysID?i+=' PUBLIC "'+t.pubID+'" "'+t.sysID+'"':t.sysID&&(i+=' SYSTEM "'+t.sysID+'"'),t.nData&&(i+=" NDATA "+t.nData)),e.state=n.CloseTag,i+=e.spaceBeforeSlash+">"+this.endline(t,e,r),e.state=n.None,this.closeNode(t,e,r),i},t.prototype.dtdNotation=function(t,e,r){var i;return this.openNode(t,e,r),e.state=n.OpenTag,i=this.indent(t,e,r)+"<!NOTATION",e.state=n.InsideTag,i+=" "+t.name,t.pubID&&t.sysID?i+=' PUBLIC "'+t.pubID+'" "'+t.sysID+'"':t.pubID?i+=' PUBLIC "'+t.pubID+'"':t.sysID&&(i+=' SYSTEM "'+t.sysID+'"'),e.state=n.CloseTag,i+=e.spaceBeforeSlash+">"+this.endline(t,e,r),e.state=n.None,this.closeNode(t,e,r),i},t.prototype.openNode=function(t,e,r){},t.prototype.closeNode=function(t,e,r){},t.prototype.openAttribute=function(t,e,r){},t.prototype.closeAttribute=function(t,e,r){},t}()}).call(this)},{"./NodeType":80,"./Utility":81,"./WriterState":82,"./XMLCData":84,"./XMLComment":86,"./XMLDTDAttList":91,"./XMLDTDElement":92,"./XMLDTDEntity":93,"./XMLDTDNotation":94,"./XMLDeclaration":95,"./XMLDocType":96,"./XMLDummy":99,"./XMLElement":100,"./XMLProcessingInstruction":104,"./XMLRaw":105,"./XMLText":109}],111:[function(t,e,r){(function(){var r,n,i,o,s,a,u,c,l,h;h=t("./Utility"),c=h.assign,l=h.isFunction,i=t("./XMLDOMImplementation"),o=t("./XMLDocument"),s=t("./XMLDocumentCB"),u=t("./XMLStringWriter"),a=t("./XMLStreamWriter"),r=t("./NodeType"),n=t("./WriterState"),e.exports.create=function(t,e,r,n){var i,s;if(null==t)throw new Error("Root element needs a name.");return n=c({},e,r,n),s=(i=new o(n)).element(t),n.headless||(i.declaration(n),null==n.pubID&&null==n.sysID||i.dtd(n)),s},e.exports.begin=function(t,e,r){var n;return l(t)&&(e=(n=[t,e])[0],r=n[1],t={}),e?new s(t,e,r):new o(t)},e.exports.stringWriter=function(t){return new u(t)},e.exports.streamWriter=function(t,e){return new a(t,e)},e.exports.implementation=new i,e.exports.nodeType=r,e.exports.writerState=n}).call(this)},{"./NodeType":80,"./Utility":81,"./WriterState":82,"./XMLDOMImplementation":89,"./XMLDocument":97,"./XMLDocumentCB":98,"./XMLStreamWriter":106,"./XMLStringWriter":107}]},{},[1])(1)}));